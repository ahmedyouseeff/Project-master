"use strict";(self.webpackChunkProject=self.webpackChunkProject||[]).push([[179],{2011:(ot,Te,k)=>{k.d(Te,{Dh:()=>de,GT:()=>le,cc:()=>Se,hO:()=>Le,on:()=>U,pX:()=>re,xv:()=>he});var g=k(4650),J=k(127),O=k(5813);ot=k.hmd(ot);const ie=["ngOnDestroy"],re=(fe,Qe,nt,Ae={})=>new Proxy(fe,{get:(ve,Ie)=>nt.runOutsideAngular(()=>{var Ue;if(fe[Ie])return!(null===(Ue=Ae?.spy)||void 0===Ue)&&Ue.get&&Ae.spy.get(Ie,fe[Ie]),fe[Ie];if(ie.indexOf(Ie)>-1)return()=>{};const je=Qe.toPromise().then(V=>{const pe=V&&V[Ie];return"function"==typeof pe?pe.bind(V):pe&&pe.then?pe.then(z=>nt.run(()=>z)):nt.run(()=>pe)});return new Proxy(()=>{},{get:(V,pe)=>je[pe],apply:(V,pe,z)=>je.then(Q=>{var te;const ee=Q&&Q(...z);return!(null===(te=Ae?.spy)||void 0===te)&&te.apply&&Ae.spy.apply(Ie,z,ee),ee})})})}),le=(fe,Qe)=>{Qe.forEach(nt=>{Object.getOwnPropertyNames(nt.prototype||nt).forEach(Ae=>{Object.defineProperty(fe.prototype,Ae,Object.getOwnPropertyDescriptor(nt.prototype||nt,Ae))})})};class ue{constructor(Qe){return Qe}}const de=new g.OlP("angularfire2.app.options"),he=new g.OlP("angularfire2.app.name");function U(fe,Qe,nt){const ve="object"==typeof nt&&nt||{};ve.name=ve.name||"string"==typeof nt&&nt||"[DEFAULT]";const Ue=J.Z.apps.filter(je=>je&&je.name===ve.name)[0]||Qe.runOutsideAngular(()=>J.Z.initializeApp(fe,ve));try{JSON.stringify(fe)!==JSON.stringify(Ue.options)&&B("error",`${Ue.name} Firebase App already initialized with different options${ot.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ue(Ue)}const B=(fe,...Qe)=>{(0,g.X6Q)()&&typeof console<"u"&&console[fe](...Qe)},W={provide:ue,useFactory:U,deps:[de,g.R0b,[new g.FiY,he]]};let Le=(()=>{class fe{constructor(nt){J.Z.registerVersion("angularfire",O.q4.full,"core"),J.Z.registerVersion("angularfire",O.q4.full,"app-compat"),J.Z.registerVersion("angular",g.q4F.full,nt.toString())}static initializeApp(nt,Ae){return{ngModule:fe,providers:[{provide:de,useValue:nt},{provide:he,useValue:Ae}]}}}return fe.\u0275fac=function(nt){return new(nt||fe)(g.LFG(g.Lbi))},fe.\u0275mod=g.oAB({type:fe}),fe.\u0275inj=g.cJS({providers:[W]}),fe})();function Se(fe,Qe,nt,Ae,ve){const[,Ie,Ue]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===fe)||[];if(Ie)return function we(fe,Qe){try{return fe.toString()===Qe.toString()}catch{return fe===Qe}}(ve,Ue)||(ge("error",`${Qe} was already initialized on the ${nt} Firebase App with different settings.${et?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:ve,was:Ue})),Ie;{const je=Ae();return globalThis.\u0275AngularfireInstanceCache.push([fe,je,ve]),je}}const et=!!ot.hot,ge=(fe,...Qe)=>{(0,g.X6Q)()&&typeof console<"u"&&console[fe](...Qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ot,Te,k)=>{k.d(Te,{q4:()=>Sr,iC:()=>ts,HU:()=>gu,vb:()=>Gr,JM:()=>la});var g=k(4650),J=k(5867),O=k(5861),ie=k(9681),re=k(2090),le=k(4859),ue=k(1877),de=k(8766);const he="@firebase/installations",U="0.5.16",W=`w:${U}`,Le="FIS_v2",Qe=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function nt(D){return D instanceof re.ZR&&D.code.includes("request-failed")}function Ae({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function ve(D){return{token:D.token,requestStatus:2,expiresIn:Q(D.expiresIn),creationTime:Date.now()}}function Ie(D,C){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,O.Z)(function*(D,C){const F=(yield C.json()).error;return Qe.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function je({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function V(D,{refreshToken:C}){const x=je(D);return x.append("Authorization",function te(D){return`${Le} ${D}`}(C)),x}function pe(D){return z.apply(this,arguments)}function z(){return(z=(0,O.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function Q(D){return Number(D.replace("s","000"))}function ee(D,C){return ke.apply(this,arguments)}function ke(){return(ke=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:C},{fid:x}){const F=Ae(D),K=je(D),ne=C.getImmediate({optional:!0});if(ne){const gt=yield ne.getHeartbeatsHeader();gt&&K.append("x-firebase-client",gt)}const Be={method:"POST",headers:K,body:JSON.stringify({fid:x,authVersion:Le,appId:D.appId,sdkVersion:W})},ct=yield pe(()=>fetch(F,Be));if(ct.ok){const gt=yield ct.json();return{fid:gt.fid||x,registrationStatus:2,refreshToken:gt.refreshToken,authToken:ve(gt.authToken)}}throw yield Ie("Create Installation",ct)})).apply(this,arguments)}function Re(D){return new Promise(C=>{setTimeout(C,D)})}const Kt=/^[cdef][\w-]{21}$/;function We(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function nn(D){return function at(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Kt.test(x)?x:""}catch{return""}}function yn(D){return`${D.appName}!${D.appId}`}const qt=new Map;function Zt(D,C){const x=yn(D);un(x,C),function Hi(D,C){const x=function Dr(){return!mi&&"BroadcastChannel"in self&&(mi=new BroadcastChannel("[Firebase] FID Change"),mi.onmessage=D=>{un(D.data.key,D.data.fid)}),mi}();x&&x.postMessage({key:D,fid:C}),function Lr(){0===qt.size&&mi&&(mi.close(),mi=null)}()}(x,C)}function un(D,C){const x=qt.get(D);if(x)for(const F of x)F(C)}let mi=null;const Xr="firebase-installations-store";let ei=null;function Bo(){return ei||(ei=(0,de.X3)("firebase-installations-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(Xr)}})),ei}function Ke(D,C){return gr.apply(this,arguments)}function gr(){return(gr=(0,O.Z)(function*(D,C){const x=yn(D),K=(yield Bo()).transaction(Xr,"readwrite"),ne=K.objectStore(Xr),Ee=yield ne.get(x);return yield ne.put(C,x),yield K.done,(!Ee||Ee.fid!==C.fid)&&Zt(D,C.fid),C})).apply(this,arguments)}function gs(D){return zn.apply(this,arguments)}function zn(){return(zn=(0,O.Z)(function*(D){const C=yn(D),F=(yield Bo()).transaction(Xr,"readwrite");yield F.objectStore(Xr).delete(C),yield F.done})).apply(this,arguments)}function ti(D,C){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,O.Z)(function*(D,C){const x=yn(D),K=(yield Bo()).transaction(Xr,"readwrite"),ne=K.objectStore(Xr),Ee=yield ne.get(x),Be=C(Ee);return void 0===Be?yield ne.delete(x):yield ne.put(Be,x),yield K.done,Be&&(!Ee||Ee.fid!==Be.fid)&&Zt(D,Be.fid),Be})).apply(this,arguments)}function On(D){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,O.Z)(function*(D){let C;const x=yield ti(D.appConfig,F=>{const K=fn(F),ne=dt(D,K);return C=ne.registrationPromise,ne.installationEntry});return""===x.fid?{installationEntry:yield C}:{installationEntry:x,registrationPromise:C}})).apply(this,arguments)}function fn(D){return bt(D||{fid:We(),registrationStatus:0})}function dt(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(Qe.create("app-offline"))};const x={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function it(D,C){return tn.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:ur(D)}:{installationEntry:C}}function tn(){return(tn=(0,O.Z)(function*(D,C){try{const x=yield ee(D,C);return Ke(D.appConfig,x)}catch(x){throw nt(x)&&409===x.customData.serverCode?yield gs(D.appConfig):yield Ke(D.appConfig,{fid:C.fid,registrationStatus:0}),x}})).apply(this,arguments)}function ur(D){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,O.Z)(function*(D){let C=yield Vr(D.appConfig);for(;1===C.registrationStatus;)yield Re(100),C=yield Vr(D.appConfig);if(0===C.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield On(D);return F||x}return C})).apply(this,arguments)}function Vr(D){return ti(D,C=>{if(!C)throw Qe.create("installation-not-found");return bt(C)})}function bt(D){return function ms(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Qt(D,C){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:C},x){const F=Jt(D,x),K=V(D,x),ne=C.getImmediate({optional:!0});if(ne){const gt=yield ne.getHeartbeatsHeader();gt&&K.append("x-firebase-client",gt)}const Be={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:W,appId:D.appId}})},ct=yield pe(()=>fetch(F,Be));if(ct.ok)return ve(yield ct.json());throw yield Ie("Generate Auth Token",ct)})).apply(this,arguments)}function Jt(D,{fid:C}){return`${Ae(D)}/${C}/authTokens:generate`}function qn(D){return br.apply(this,arguments)}function br(){return(br=(0,O.Z)(function*(D,C=!1){let x;const F=yield ti(D.appConfig,ne=>{if(!Mt(ne))throw Qe.create("not-registered");const Ee=ne.authToken;if(!C&&j(Ee))return ne;if(1===Ee.requestStatus)return x=Xe(D,C),ne;{if(!navigator.onLine)throw Qe.create("app-offline");const Be=q(ne);return x=_t(D,Be),Be}});return x?yield x:F.authToken})).apply(this,arguments)}function Xe(D,C){return be.apply(this,arguments)}function be(){return(be=(0,O.Z)(function*(D,C){let x=yield Je(D.appConfig);for(;1===x.authToken.requestStatus;)yield Re(100),x=yield Je(D.appConfig);const F=x.authToken;return 0===F.requestStatus?qn(D,C):F})).apply(this,arguments)}function Je(D){return ti(D,C=>{if(!Mt(C))throw Qe.create("not-registered");return function _e(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function _t(D,C){return yt.apply(this,arguments)}function yt(){return(yt=(0,O.Z)(function*(D,C){try{const x=yield Qt(D,C),F=Object.assign(Object.assign({},C),{authToken:x});return yield Ke(D.appConfig,F),x}catch(x){if(!nt(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield Ke(D.appConfig,F)}else yield gs(D.appConfig);throw x}})).apply(this,arguments)}function Mt(D){return void 0!==D&&2===D.registrationStatus}function j(D){return 2===D.requestStatus&&!function L(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+36e5}(D)}function q(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}function He(){return(He=(0,O.Z)(function*(D){const C=D,{installationEntry:x,registrationPromise:F}=yield On(C);return F?F.catch(console.error):qn(C).catch(console.error),x.fid})).apply(this,arguments)}function Wt(){return(Wt=(0,O.Z)(function*(D,C=!1){const x=D;return yield dn(x),(yield qn(x,C)).token})).apply(this,arguments)}function dn(D){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,O.Z)(function*(D){const{registrationPromise:C}=yield On(D);C&&(yield C)})).apply(this,arguments)}function ys(D){return Qe.create("missing-app-config-values",{valueName:D})}const ho="installations",En=D=>{const C=D.getProvider("app").getImmediate(),x=function vn(D){if(!D||!D.options)throw ys("App Configuration");if(!D.name)throw ys("App Name");const C=["projectId","apiKey","appId"];for(const x of C)if(!D.options[x])throw ys(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:x,heartbeatServiceProvider:(0,ie._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Bs=D=>{const C=D.getProvider("app").getImmediate(),x=(0,ie._getProvider)(C,ho).getImmediate();return{getId:()=>function Z(D){return He.apply(this,arguments)}(x),getToken:K=>function ut(D){return Wt.apply(this,arguments)}(x,K)}};(function ka(){(0,ie._registerComponent)(new le.wA(ho,En,"PUBLIC")),(0,ie._registerComponent)(new le.wA("installations-internal",Bs,"PRIVATE"))})(),(0,ie.registerVersion)(he,U),(0,ie.registerVersion)(he,U,"esm2017");const Ai="@firebase/remote-config",Bn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Th{constructor(C,x,F,K){this.client=C,this.storage=x,this.storageCache=F,this.logger=K}isCachedDataFresh(C,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,K=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${K}.`),K}fetch(C){var x=this;return(0,O.Z)(function*(){const[F,K]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(K&&x.isCachedDataFresh(C.cacheMaxAgeMillis,F))return K;C.eTag=K&&K.eTag;const ne=yield x.client.fetch(C),Ee=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ne.status&&Ee.push(x.storage.setLastSuccessfulFetchResponse(ne)),yield Promise.all(Ee),ne})()}}function hc(D=navigator){return D.languages&&D.languages[0]||D.language}class fc{constructor(C,x,F,K,ne,Ee){this.firebaseInstallations=C,this.sdkVersion=x,this.namespace=F,this.projectId=K,this.apiKey=ne,this.appId=Ee}fetch(C){var x=this;return(0,O.Z)(function*(){var F,K,ne;const[Ee,Be]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),gt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Ct={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},lt={sdk_version:x.sdkVersion,app_instance_id:Ee,app_instance_id_token:Be,app_id:x.appId,language_code:hc()},Dn={method:"POST",headers:Ct,body:JSON.stringify(lt)},ir=fetch(gt,Dn),Ss=new Promise((zr,Ms)=>{C.signal.addEventListener(()=>{const Lh=new Error("The operation was aborted.");Lh.name="AbortError",Ms(Lh)})});let ns;try{yield Promise.race([ir,Ss]),ns=yield ir}catch(zr){let Ms="fetch-client-network";throw"AbortError"===(null===(F=zr)||void 0===F?void 0:F.name)&&(Ms="fetch-timeout"),Bn.create(Ms,{originalErrorMessage:null===(K=zr)||void 0===K?void 0:K.message})}let xs=ns.status;const to=ns.headers.get("ETag")||void 0;let rs,Nn;if(200===ns.status){let zr;try{zr=yield ns.json()}catch(Ms){throw Bn.create("fetch-client-parse",{originalErrorMessage:null===(ne=Ms)||void 0===ne?void 0:ne.message})}rs=zr.entries,Nn=zr.state}if("INSTANCE_STATE_UNSPECIFIED"===Nn?xs=500:"NO_CHANGE"===Nn?xs=304:("NO_TEMPLATE"===Nn||"EMPTY_CONFIG"===Nn)&&(rs={}),304!==xs&&200!==xs)throw Bn.create("fetch-status",{httpStatus:xs});return{status:xs,eTag:to,config:rs}})()}}class Cp{constructor(C,x){this.client=C,this.storage=x}fetch(C){var x=this;return(0,O.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:x,backoffCount:F}){var K=this;return(0,O.Z)(function*(){yield function Kn(D,C){return new Promise((x,F)=>{const K=Math.max(C-Date.now(),0),ne=setTimeout(x,K);D.addEventListener(()=>{clearTimeout(ne),F(Bn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,x);try{const ne=yield K.client.fetch(C);return yield K.storage.deleteThrottleMetadata(),ne}catch(ne){if(!function Ul(D){if(!(D instanceof re.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(ne))throw ne;const Ee={throttleEndTimeMillis:Date.now()+(0,re.$s)(F),backoffCount:F+1};return yield K.storage.setThrottleMetadata(Ee),K.attemptFetch(C,Ee)}})()}}class Bl{constructor(C,x,F,K,ne){this.app=C,this._client=x,this._storageCache=F,this._storage=K,this._logger=ne,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function pc(D,C){var x;const F=D.target.error||void 0;return Bn.create(C,{originalErrorMessage:F&&(null===(x=F)||void 0===x?void 0:x.message)})}const Is="app_namespace_store";class xp{constructor(C,x,F,K=function Sp(){return new Promise((D,C)=>{var x;try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=K=>{C(pc(K,"storage-open"))},F.onsuccess=K=>{D(K.target.result)},F.onupgradeneeded=K=>{0===K.oldVersion&&K.target.result.createObjectStore(Is,{keyPath:"compositeKey"})}}catch(F){C(Bn.create("storage-open",{originalErrorMessage:null===(x=F)||void 0===x?void 0:x.message}))}})}()){this.appId=C,this.appName=x,this.namespace=F,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((K,ne)=>{var Ee;const ct=F.transaction([Is],"readonly").objectStore(Is),gt=x.createCompositeKey(C);try{const Ct=ct.get(gt);Ct.onerror=lt=>{ne(pc(lt,"storage-get"))},Ct.onsuccess=lt=>{const Dn=lt.target.result;K(Dn?Dn.value:void 0)}}catch(Ct){ne(Bn.create("storage-get",{originalErrorMessage:null===(Ee=Ct)||void 0===Ee?void 0:Ee.message}))}})})()}set(C,x){var F=this;return(0,O.Z)(function*(){const K=yield F.openDbPromise;return new Promise((ne,Ee)=>{var Be;const gt=K.transaction([Is],"readwrite").objectStore(Is),Ct=F.createCompositeKey(C);try{const lt=gt.put({compositeKey:Ct,value:x});lt.onerror=Dn=>{Ee(pc(Dn,"storage-set"))},lt.onsuccess=()=>{ne()}}catch(lt){Ee(Bn.create("storage-set",{originalErrorMessage:null===(Be=lt)||void 0===Be?void 0:Be.message}))}})})()}delete(C){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((K,ne)=>{var Ee;const ct=F.transaction([Is],"readwrite").objectStore(Is),gt=x.createCompositeKey(C);try{const Ct=ct.delete(gt);Ct.onerror=lt=>{ne(pc(lt,"storage-delete"))},Ct.onsuccess=()=>{K()}}catch(Ct){ne(Bn.create("storage-delete",{originalErrorMessage:null===(Ee=Ct)||void 0===Ee?void 0:Ee.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class $l{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,O.Z)(function*(){const x=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),K=C.storage.getActiveConfig(),ne=yield x;ne&&(C.lastFetchStatus=ne);const Ee=yield F;Ee&&(C.lastSuccessfulFetchTimestampMillis=Ee);const Be=yield K;Be&&(C.activeConfig=Be)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function Va(){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,O.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}!function Es(){(0,ie._registerComponent)(new le.wA("remote-config",function D(C,{instanceIdentifier:x}){const F=C.getProvider("app").getImmediate(),K=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Bn.create("registration-window");if(!(0,re.hl)())throw Bn.create("indexed-db-unavailable");const{projectId:ne,apiKey:Ee,appId:Be}=F.options;if(!ne)throw Bn.create("registration-project-id");if(!Ee)throw Bn.create("registration-api-key");if(!Be)throw Bn.create("registration-app-id");const ct=new xp(Be,F.name,x=x||"firebase"),gt=new $l(ct),Ct=new ue.Yd(Ai);Ct.logLevel=ue.in.ERROR;const lt=new fc(K,ie.SDK_VERSION,x,ne,Ee,Be),Dn=new Cp(lt,ct),ir=new Th(Dn,ct,gt,Ct),Ss=new Bl(F,ir,gt,ct,Ct);return function Pn(D){const C=(0,re.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Ss),Ss},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(Ai,"0.3.15"),(0,ie.registerVersion)(Ai,"0.3.15","esm2017")}();const Si="/firebase-messaging-sw.js",zi="/firebase-cloud-messaging-push-scope",qi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ho="google.c.a.c_id",Ua="google.c.a.c_l",gc="google.c.a.ts",Sh="google.c.a.e";var Wi=(()=>{return(D=Wi||(Wi={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Wi;var D})();function ni(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Br(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),K=new Uint8Array(F.length);for(let ne=0;ne<F.length;++ne)K[ne]=F.charCodeAt(ne);return K}const po="fcm_token_details_db",lr="fcm_token_object_Store";function xh(D){return Mh.apply(this,arguments)}function Mh(){return Mh=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ne=>ne.name).includes(po))return null;let C=null;return(yield(0,de.X3)(po,5,{upgrade:(F=(0,O.Z)(function*(K,ne,Ee,Be){var ct;if(ne<2||!K.objectStoreNames.contains(lr))return;const gt=Be.objectStore(lr),Ct=yield gt.index("fcmSenderId").get(D);if(yield gt.clear(),Ct)if(2===ne){const lt=Ct;if(!lt.auth||!lt.p256dh||!lt.endpoint)return;C={token:lt.fcmToken,createTime:null!==(ct=lt.createTime)&&void 0!==ct?ct:Date.now(),subscriptionOptions:{auth:lt.auth,p256dh:lt.p256dh,endpoint:lt.endpoint,swScope:lt.swScope,vapidKey:"string"==typeof lt.vapidKey?lt.vapidKey:ni(lt.vapidKey)}}}else if(3===ne){const lt=Ct;C={token:lt.fcmToken,createTime:lt.createTime,subscriptionOptions:{auth:ni(lt.auth),p256dh:ni(lt.p256dh),endpoint:lt.endpoint,swScope:lt.swScope,vapidKey:ni(lt.vapidKey)}}}else if(4===ne){const lt=Ct;C={token:lt.fcmToken,createTime:lt.createTime,subscriptionOptions:{auth:ni(lt.auth),p256dh:ni(lt.p256dh),endpoint:lt.endpoint,swScope:lt.swScope,vapidKey:ni(lt.vapidKey)}}}}),function(ne,Ee,Be,ct){return F.apply(this,arguments)})})).close(),yield(0,de.Lj)(po),yield(0,de.Lj)("fcm_vapid_details_db"),yield(0,de.Lj)("undefined"),An(C)?C:null;var F}),Mh.apply(this,arguments)}function An(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const ri="firebase-messaging-store";let Tr=null;function ja(){return Tr||(Tr=(0,de.X3)("firebase-messaging-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(ri)}})),Tr}function go(D){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,O.Z)(function*(D){const C=_i(D),F=yield(yield ja()).transaction(ri).objectStore(ri).get(C);if(F)return F;{const K=yield xh(D.appConfig.senderId);if(K)return yield zt(D,K),K}})).apply(this,arguments)}function zt(D,C){return $a.apply(this,arguments)}function $a(){return($a=(0,O.Z)(function*(D,C){const x=_i(D),K=(yield ja()).transaction(ri,"readwrite");return yield K.objectStore(ri).put(C,x),yield K.done,C})).apply(this,arguments)}function Hs(D){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,O.Z)(function*(D){const C=_i(D),F=(yield ja()).transaction(ri,"readwrite");yield F.objectStore(ri).delete(C),yield F.done})).apply(this,arguments)}function _i({appConfig:D}){return D.appId}const Cn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Et(D,C){return za.apply(this,arguments)}function za(){return(za=(0,O.Z)(function*(D,C){var x;const F=yield yc(D),K=Ce(C),ne={method:"POST",headers:F,body:JSON.stringify(K)};let Ee;try{Ee=yield(yield fetch(Zi(D.appConfig),ne)).json()}catch(Be){throw Cn.create("token-subscribe-failed",{errorInfo:null===(x=Be)||void 0===x?void 0:x.toString()})}if(Ee.error)throw Cn.create("token-subscribe-failed",{errorInfo:Ee.error.message});if(!Ee.token)throw Cn.create("token-subscribe-no-token");return Ee.token})).apply(this,arguments)}function Nh(D,C){return qa.apply(this,arguments)}function qa(){return(qa=(0,O.Z)(function*(D,C){var x;const F=yield yc(D),K=Ce(C.subscriptionOptions),ne={method:"PATCH",headers:F,body:JSON.stringify(K)};let Ee;try{Ee=yield(yield fetch(`${Zi(D.appConfig)}/${C.token}`,ne)).json()}catch(Be){throw Cn.create("token-update-failed",{errorInfo:null===(x=Be)||void 0===x?void 0:x.toString()})}if(Ee.error)throw Cn.create("token-update-failed",{errorInfo:Ee.error.message});if(!Ee.token)throw Cn.create("token-update-no-token");return Ee.token})).apply(this,arguments)}function Wa(D,C){return mc.apply(this,arguments)}function mc(){return(mc=(0,O.Z)(function*(D,C){var x;const K={method:"DELETE",headers:yield yc(D)};try{const Ee=yield(yield fetch(`${Zi(D.appConfig)}/${C}`,K)).json();if(Ee.error)throw Cn.create("token-unsubscribe-failed",{errorInfo:Ee.error.message})}catch(ne){throw Cn.create("token-unsubscribe-failed",{errorInfo:null===(x=ne)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function Zi({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function yc(D){return zo.apply(this,arguments)}function zo(){return(zo=(0,O.Z)(function*({appConfig:D,installations:C}){const x=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Ce({p256dh:D,auth:C,endpoint:x,vapidKey:F}){const K={web:{endpoint:x,auth:C,p256dh:D}};return F!==qi&&(K.web.applicationPubKey=F),K}const Bt=6048e5;function vc(D){return _c.apply(this,arguments)}function _c(){return(_c=(0,O.Z)(function*(D){const C=yield wc(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:ni(C.getKey("auth")),p256dh:ni(C.getKey("p256dh"))},F=yield go(D.firebaseDependencies);if(F){if(ql(F.subscriptionOptions,x))return Date.now()>=F.createTime+Bt?mo(D,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield Wa(D.firebaseDependencies,F.token)}catch(K){console.warn(K)}return qo(D.firebaseDependencies,x)}return qo(D.firebaseDependencies,x)})).apply(this,arguments)}function Sn(D){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,O.Z)(function*(D){const C=yield go(D.firebaseDependencies);C&&(yield Wa(D.firebaseDependencies,C.token),yield Hs(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function mo(D,C){return ii.apply(this,arguments)}function ii(){return(ii=(0,O.Z)(function*(D,C){try{const x=yield Nh(D.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:x,createTime:Date.now()});return yield zt(D.firebaseDependencies,F),x}catch(x){throw yield Sn(D),x}})).apply(this,arguments)}function qo(D,C){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,O.Z)(function*(D,C){const F={token:yield Et(D,C),createTime:Date.now(),subscriptionOptions:C};return yield zt(D,F),F.token})).apply(this,arguments)}function wc(D,C){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,O.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Br(C)})})).apply(this,arguments)}function ql(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}function Ko(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function xn(D,C){if(!C.notification)return;D.notification={};const x=C.notification.title;x&&(D.notification.title=x);const F=C.notification.body;F&&(D.notification.body=F);const K=C.notification.image;K&&(D.notification.image=K);const ne=C.notification.icon;ne&&(D.notification.icon=ne)}(C,D),function xi(D,C){!C.data||(D.data=C.data)}(C,D),function Ec(D,C){var x,F,K,ne,Ee;if(!(C.fcmOptions||null!==(x=C.notification)&&void 0!==x&&x.click_action))return;D.fcmOptions={};const Be=null!==(K=null===(F=C.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==K?K:null===(ne=C.notification)||void 0===ne?void 0:ne.click_action;Be&&(D.fcmOptions.link=Be);const ct=null===(Ee=C.fcmOptions)||void 0===Ee?void 0:Ee.analytics_label;ct&&(D.fcmOptions.analyticsLabel=ct)}(C,D),C}function Gs(D){return"object"==typeof D&&!!D&&Ho in D}function Yi(D,C){const x=[];for(let F=0;F<D.length;F++)x.push(D.charAt(F)),F<C.length&&x.push(C.charAt(F));return x.join("")}function Zo(D){return Cn.create("missing-app-config-values",{valueName:D})}Yi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Yi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Rp{constructor(C,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function Mp(D){if(!D||!D.options)throw Zo("App Configuration Object");if(!D.name)throw Zo("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const F of C)if(!x[F])throw Zo(F);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:K,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Dc(D){return Za.apply(this,arguments)}function Za(){return(Za=(0,O.Z)(function*(D){var C;try{D.swRegistration=yield navigator.serviceWorker.register(Si,{scope:zi}),D.swRegistration.update().catch(()=>{})}catch(x){throw Cn.create("failed-service-worker-registration",{browserErrorMessage:null===(C=x)||void 0===C?void 0:C.message})}})).apply(this,arguments)}function Yo(D,C){return bc.apply(this,arguments)}function bc(){return(bc=(0,O.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield Dc(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Cn.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function Qo(D,C){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,O.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=qi)})).apply(this,arguments)}function Qa(){return(Qa=(0,O.Z)(function*(D,C){if(!navigator)throw Cn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Cn.create("permission-blocked");return yield Qo(D,C?.vapidKey),yield Yo(D,C?.serviceWorkerRegistration),vc(D)})).apply(this,arguments)}function Tc(D,C,x){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,O.Z)(function*(D,C,x){const F=Sc(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[Ho],message_name:x[Ua],message_time:x[gc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Sc(D){switch(D){case Wi.NOTIFICATION_CLICKED:return"notification_open";case Wi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function zs(){return(zs=(0,O.Z)(function*(D,C){const x=C.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===Wi.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Ko(x)):D.onMessageHandler.next(Ko(x)));const F=x.data;Gs(F)&&"1"===F[Sh]&&(yield Tc(D,x.messageType,F))})).apply(this,arguments)}const qs="@firebase/messaging",Zn=D=>{const C=new Rp(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Wl(D,C){return zs.apply(this,arguments)}(C,x)),C},jr=D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:F=>function Ya(D,C){return Qa.apply(this,arguments)}(C,F)}};function Kl(){return xc.apply(this,arguments)}function xc(){return(xc=(0,O.Z)(function*(){try{yield(0,re.eu)()}catch{return!1}return typeof window<"u"&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function _n(){(0,ie._registerComponent)(new le.wA("messaging",Zn,"PUBLIC")),(0,ie._registerComponent)(new le.wA("messaging-internal",jr,"PRIVATE")),(0,ie.registerVersion)(qs,"0.10.0"),(0,ie.registerVersion)(qs,"0.10.0","esm2017")}();const vo="analytics",Ql="firebase_id",Ks="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",tu="https://www.googletagmanager.com/gtag/js",Mn=new ue.Yd("@firebase/analytics");function nu(D){return Promise.all(D.map(C=>C.catch(x=>x)))}function ru(D,C){const x=document.createElement("script");x.src=`${tu}?l=${D}&id=${C}`,x.async=!0,document.head.appendChild(x)}function Ph(D,C,x,F,K,ne){return _o.apply(this,arguments)}function _o(){return(_o=(0,O.Z)(function*(D,C,x,F,K,ne){const Ee=F[K];try{if(Ee)yield C[Ee];else{const ct=(yield nu(x)).find(gt=>gt.measurementId===K);ct&&(yield C[ct.appId])}}catch(Be){Mn.error(Be)}D("config",K,ne)})).apply(this,arguments)}function wo(D,C,x,F,K){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,O.Z)(function*(D,C,x,F,K){try{let ne=[];if(K&&K.send_to){let Ee=K.send_to;Array.isArray(Ee)||(Ee=[Ee]);const Be=yield nu(x);for(const ct of Ee){const gt=Be.find(lt=>lt.measurementId===ct),Ct=gt&&C[gt.appId];if(!Ct){ne=[];break}ne.push(Ct)}}0===ne.length&&(ne=Object.values(C)),yield Promise.all(ne),D("event",F,K||{})}catch(ne){Mn.error(ne)}})).apply(this,arguments)}function Xl(D){const C=window.document.getElementsByTagName("script");for(const x of Object.values(C))if(x.src&&x.src.includes(tu)&&x.src.includes(D))return x;return null}const nr=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ta=new class Mi{constructor(C={},x=1e3){this.throttleMetadata=C,this.intervalMillis=x}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,x){this.throttleMetadata[C]=x}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function td(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function na(D){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,O.Z)(function*(D){var C;const{appId:x,apiKey:F}=D,K={method:"GET",headers:td(F)},ne=Ks.replace("{app-id}",x),Ee=yield fetch(ne,K);if(200!==Ee.status&&304!==Ee.status){let Be="";try{const ct=yield Ee.json();null!==(C=ct.error)&&void 0!==C&&C.message&&(Be=ct.error.message)}catch{}throw nr.create("config-fetch-failed",{httpStatus:Ee.status,responseMessage:Be})}return Ee.json()})).apply(this,arguments)}function kn(D){return wi.apply(this,arguments)}function wi(){return(wi=(0,O.Z)(function*(D,C=ta,x){const{appId:F,apiKey:K,measurementId:ne}=D.options;if(!F)throw nr.create("no-app-id");if(!K){if(ne)return{measurementId:ne,appId:F};throw nr.create("no-api-key")}const Ee=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Be=new au;return setTimeout((0,O.Z)(function*(){Be.abort()}),void 0!==x?x:6e4),su({appId:F,apiKey:K,measurementId:ne},Ee,Be,C)})).apply(this,arguments)}function su(D,C,x){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,O.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:x},F,K=ta){var ne,Ee;const{appId:Be,measurementId:ct}=D;try{yield ra(F,C)}catch(gt){if(ct)return Mn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ct} provided in the "measurementId" field in the local Firebase config. [${null===(ne=gt)||void 0===ne?void 0:ne.message}]`),{appId:Be,measurementId:ct};throw gt}try{const gt=yield na(D);return K.deleteThrottleMetadata(Be),gt}catch(gt){const Ct=gt;if(!ou(Ct)){if(K.deleteThrottleMetadata(Be),ct)return Mn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ct} provided in the "measurementId" field in the local Firebase config. [${Ct?.message}]`),{appId:Be,measurementId:ct};throw gt}const lt=503===Number(null===(Ee=Ct?.customData)||void 0===Ee?void 0:Ee.httpStatus)?(0,re.$s)(x,K.intervalMillis,30):(0,re.$s)(x,K.intervalMillis),Dn={throttleEndTimeMillis:Date.now()+lt,backoffCount:x+1};return K.setThrottleMetadata(Be,Dn),Mn.debug(`Calling attemptFetch again in ${lt} millis`),su(D,Dn,F,K)}})).apply(this,arguments)}function ra(D,C){return new Promise((x,F)=>{const K=Math.max(C-Date.now(),0),ne=setTimeout(x,K);D.addEventListener(()=>{clearTimeout(ne),F(nr.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function ou(D){if(!(D instanceof re.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}class au{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let Cs,sa;function Ts(){return(Ts=(0,O.Z)(function*(D,C,x,F,K){if(K&&K.global)D("event",x,F);else{const ne=yield C;D("event",x,Object.assign(Object.assign({},F),{send_to:ne}))}})).apply(this,arguments)}function Js(D){sa=D}function Pc(D){Cs=D}function Ji(){return cu.apply(this,arguments)}function cu(){return(cu=(0,O.Z)(function*(){var D;if(!(0,re.hl)())return Mn.warn(nr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(C){return Mn.warn(nr.create("indexeddb-unavailable",{errorInfo:null===(D=C)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function Do(){return(Do=(0,O.Z)(function*(D,C,x,F,K,ne,Ee){var Be;const ct=kn(D);ct.then(ir=>{x[ir.measurementId]=ir.appId,D.options.measurementId&&ir.measurementId!==D.options.measurementId&&Mn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${ir.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ir=>Mn.error(ir)),C.push(ct);const gt=Ji().then(ir=>{if(ir)return F.getId()}),[Ct,lt]=yield Promise.all([ct,gt]);Xl(ne)||ru(ne,Ct.measurementId),sa&&(K("consent","default",sa),Js(void 0)),K("js",new Date);const Dn=null!==(Be=Ee?.config)&&void 0!==Be?Be:{};return Dn.origin="firebase",Dn.update=!0,null!=lt&&(Dn[Ql]=lt),K("config",Ct.measurementId,Dn),Cs&&(K("set",Cs),Pc(void 0)),Ct.measurementId})).apply(this,arguments)}class lu{constructor(C){this.app=C}_delete(){return delete $r[this.app.options.appId],Promise.resolve()}}let $r={},As=[];const bo={};let To,Xs,Co="dataLayer",oa=!1;function Qm(D,C,x){!function Np(){const D=[];if((0,re.ru)()&&D.push("This is a browser extension environment."),(0,re.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((F,K)=>`(${K+1}) ${F}`).join(" "),x=nr.create("invalid-analytics-context",{errorInfo:C});Mn.warn(x.message)}}();const F=D.options.appId;if(!F)throw nr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw nr.create("no-api-key");Mn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=$r[F])throw nr.create("already-exists",{id:F});if(!oa){!function Jl(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(Co);const{wrappedGtag:ne,gtagCore:Ee}=function Jo(D,C,x,F,K){let ne=function(...Ee){window[F].push(arguments)};return window[K]&&"function"==typeof window[K]&&(ne=window[K]),window[K]=function iu(D,C,x,F){function ne(){return(ne=(0,O.Z)(function*(Ee,Be,ct){try{"event"===Ee?yield wo(D,C,x,Be,ct):"config"===Ee?yield Ph(D,C,x,F,Be,ct):"consent"===Ee?D("consent","update",ct):D("set",Be)}catch(gt){Mn.error(gt)}})).apply(this,arguments)}return function K(Ee,Be,ct){return ne.apply(this,arguments)}}(ne,D,C,x),{gtagCore:ne,wrappedGtag:window[K]}}($r,As,bo,Co,"gtag");Xs=ne,To=Ee,oa=!0}return $r[F]=function Eo(D,C,x,F,K,ne,Ee){return Do.apply(this,arguments)}(D,As,bo,C,To,Co,x),new lu(D)}function Xm(){return kh.apply(this,arguments)}function kh(){return(kh=(0,O.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}const Fh="@firebase/analytics";!function Hr(){(0,ie._registerComponent)(new le.wA(vo,(C,{options:x})=>Qm(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ie._registerComponent)(new le.wA("analytics-internal",function D(C){try{const x=C.getProvider(vo).getImmediate();return{logEvent:(F,K,ne)=>function ln(D,C,x,F){D=(0,re.m9)(D),function nd(D,C,x,F,K){return Ts.apply(this,arguments)}(Xs,$r[D.app.options.appId],C,x,F).catch(K=>Mn.error(K))}(x,F,K,ne)}}catch(x){throw nr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ie.registerVersion)(Fh,"0.8.4"),(0,ie.registerVersion)(Fh,"0.8.4","esm2017")}();var Ii=k(4408),Ao=k(7565);const Xi=new class Ei extends Ao.v{}(class Fc extends Ii.o{constructor(C,x){super(C,x),this.scheduler=C,this.work=x}schedule(C,x=0){return x>0?super.schedule(C,x):(this.delay=x,this.state=C,this.scheduler.flush(this),this)}execute(C,x){return x>0||this.closed?super.execute(C,x):this._execute(C,x)}requestAsyncId(C,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,x,F):(C.flush(this),0)}});var wt=k(4986),fu=k(8505),So=k(9468),aa=k(5363);const Sr=new g.GfV("7.4.1"),ua="__angularfire_symbol__analyticsIsSupportedValue",es="__angularfire_symbol__analyticsIsSupported",Ri="__angularfire_symbol__remoteConfigIsSupportedValue",xr="__angularfire_symbol__remoteConfigIsSupported",Lc="__angularfire_symbol__messagingIsSupportedValue",pu="__angularfire_symbol__messagingIsSupported";function la(D,C,x){if(C){if(1===C.length)return C[0];const ne=C.filter(Ee=>Ee.app===x);if(1===ne.length)return ne[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[es]||(globalThis[es]=Xm().then(D=>globalThis[ua]=D).catch(()=>globalThis[ua]=!1)),globalThis[pu]||(globalThis[pu]=Kl().then(D=>globalThis[Lc]=D).catch(()=>globalThis[Lc]=!1)),globalThis[xr]||(globalThis[xr]=Va().then(D=>globalThis[Ri]=D).catch(()=>globalThis[Ri]=!1));const Gr=(D,C)=>{const x=C?[C]:(0,J.C6)(),F=[];return x.forEach(K=>{K.container.getProvider(D).instances.forEach(Ee=>{F.includes(Ee)||F.push(Ee)})}),F};function xo(){}class gn{constructor(C,x=Xi){this.zone=C,this.delegate=x}now(){return this.delegate.now()}schedule(C,x,F){const K=this.zone;return this.delegate.schedule(function(Ee){K.runGuarded(()=>{C.apply(this,[Ee])})},x,F)}}class Ni{constructor(C){this.zone=C,this.task=null}call(C,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xo,{},xo,xo)),x.pipe((0,fu.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let gu=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new gn(Zone.current)),this.insideAngular=x.run(()=>new gn(Zone.current,wt.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(g.LFG(g.R0b))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Oi(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function ts(D){return Oi(),function Uc(D){return function(x){return(x=x.lift(new Ni(D.ngZone))).pipe((0,So.R)(D.outsideAngular),(0,aa.Q)(D.insideAngular))}}(Oi())(D)}},2090:(ot,Te,k)=>{k.d(Te,{$s:()=>Je,BH:()=>Ut,G6:()=>Ie,L:()=>de,LL:()=>qt,Pz:()=>Kt,Sg:()=>We,UG:()=>we,US:()=>le,ZB:()=>B,ZR:()=>yn,aH:()=>at,b$:()=>fe,eu:()=>je,hl:()=>Ue,jU:()=>et,m9:()=>Mt,ne:()=>Ln,pd:()=>Ci,r3:()=>yi,ru:()=>ge,tV:()=>he,uI:()=>Se,vZ:()=>Ke,w1:()=>nt,xO:()=>zn,xb:()=>ei,z$:()=>Le,zI:()=>V,zd:()=>ti});const ie=function(j){const L=[];let q=0;for(let _e=0;_e<j.length;_e++){let Z=j.charCodeAt(_e);Z<128?L[q++]=Z:Z<2048?(L[q++]=Z>>6|192,L[q++]=63&Z|128):55296==(64512&Z)&&_e+1<j.length&&56320==(64512&j.charCodeAt(_e+1))?(Z=65536+((1023&Z)<<10)+(1023&j.charCodeAt(++_e)),L[q++]=Z>>18|240,L[q++]=Z>>12&63|128,L[q++]=Z>>6&63|128,L[q++]=63&Z|128):(L[q++]=Z>>12|224,L[q++]=Z>>6&63|128,L[q++]=63&Z|128)}return L},le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,L){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,_e=[];for(let Z=0;Z<j.length;Z+=3){const He=j[Z],ut=Z+1<j.length,Wt=ut?j[Z+1]:0,dn=Z+2<j.length,Gt=dn?j[Z+2]:0;let Ft=(15&Wt)<<2|Gt>>6,er=63&Gt;dn||(er=64,ut||(Ft=64)),_e.push(q[He>>2],q[(3&He)<<4|Wt>>4],q[Ft],q[er])}return _e.join("")},encodeString(j,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(j):this.encodeByteArray(ie(j),L)},decodeString(j,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(j):function(j){const L=[];let q=0,_e=0;for(;q<j.length;){const Z=j[q++];if(Z<128)L[_e++]=String.fromCharCode(Z);else if(Z>191&&Z<224){const He=j[q++];L[_e++]=String.fromCharCode((31&Z)<<6|63&He)}else if(Z>239&&Z<365){const dn=((7&Z)<<18|(63&j[q++])<<12|(63&j[q++])<<6|63&j[q++])-65536;L[_e++]=String.fromCharCode(55296+(dn>>10)),L[_e++]=String.fromCharCode(56320+(1023&dn))}else{const He=j[q++],ut=j[q++];L[_e++]=String.fromCharCode((15&Z)<<12|(63&He)<<6|63&ut)}}return L.join("")}(this.decodeStringToByteArray(j,L))},decodeStringToByteArray(j,L){this.init_();const q=L?this.charToByteMapWebSafe_:this.charToByteMap_,_e=[];for(let Z=0;Z<j.length;){const He=q[j.charAt(Z++)],Wt=Z<j.length?q[j.charAt(Z)]:0;++Z;const Gt=Z<j.length?q[j.charAt(Z)]:64;++Z;const $e=Z<j.length?q[j.charAt(Z)]:64;if(++Z,null==He||null==Wt||null==Gt||null==$e)throw Error();_e.push(He<<2|Wt>>4),64!==Gt&&(_e.push(Wt<<4&240|Gt>>2),64!==$e&&_e.push(Gt<<6&192|$e))}return _e},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},de=function(j){return function(j){const L=ie(j);return le.encodeByteArray(L,!0)}(j).replace(/\./g,"")},he=function(j){try{return le.decodeString(j,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function B(j,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return L}for(const q in L)!L.hasOwnProperty(q)||!W(q)||(j[q]=B(j[q],L[q]));return j}function W(j){return"__proto__"!==j}function Le(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Se(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function we(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function et(){return"object"==typeof self&&self.self===self}function ge(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function fe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function nt(){const j=Le();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function Ie(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ue(){return"object"==typeof indexedDB}function je(){return new Promise((j,L)=>{try{let q=!0;const _e="validate-browser-context-for-indexeddb-analytics-module",Z=self.indexedDB.open(_e);Z.onsuccess=()=>{Z.result.close(),q||self.indexedDB.deleteDatabase(_e),j(!0)},Z.onupgradeneeded=()=>{q=!1},Z.onerror=()=>{var He;L((null===(He=Z.error)||void 0===He?void 0:He.message)||"")}}catch(q){L(q)}})}function V(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ee=()=>{try{return function pe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const j=process.env.__FIREBASE_DEFAULTS__;return j?JSON.parse(j):void 0})()||(()=>{if(typeof document>"u")return;let j;try{j=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=j&&he(j[1]);return L&&JSON.parse(L)})()}catch(j){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${j}`)}},at=()=>{var j;return null===(j=ee())||void 0===j?void 0:j.config},Kt=j=>{var L;return null===(L=ee())||void 0===L?void 0:L[`_${j}`]};class Ut{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,q)=>{this.resolve=L,this.reject=q})}wrapCallback(L){return(q,_e)=>{q?this.reject(q):this.resolve(_e),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(q):L(q,_e))}}}function We(j,L){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const _e=L||"demo-project",Z=j.iat||0,He=j.sub||j.user_id;if(!He)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ut=Object.assign({iss:`https://securetoken.google.com/${_e}`,aud:_e,iat:Z,exp:Z+3600,auth_time:Z,sub:He,user_id:He,firebase:{sign_in_provider:"custom",identities:{}}},j);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(ut)),""].join(".")}class yn extends Error{constructor(L,q,_e){super(q),this.code=L,this.customData=_e,this.name="FirebaseError",Object.setPrototypeOf(this,yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qt.prototype.create)}}class qt{constructor(L,q,_e){this.service=L,this.serviceName=q,this.errors=_e}create(L,...q){const _e=q[0]||{},Z=`${this.service}/${L}`,He=this.errors[L],ut=He?function Zt(j,L){return j.replace(Er,(q,_e)=>{const Z=L[_e];return null!=Z?String(Z):`<${_e}?>`})}(He,_e):"Error";return new yn(Z,`${this.serviceName}: ${ut} (${Z}).`,_e)}}const Er=/\{\$([^}]+)}/g;function yi(j,L){return Object.prototype.hasOwnProperty.call(j,L)}function ei(j){for(const L in j)if(Object.prototype.hasOwnProperty.call(j,L))return!1;return!0}function Ke(j,L){if(j===L)return!0;const q=Object.keys(j),_e=Object.keys(L);for(const Z of q){if(!_e.includes(Z))return!1;const He=j[Z],ut=L[Z];if(gr(He)&&gr(ut)){if(!Ke(He,ut))return!1}else if(He!==ut)return!1}for(const Z of _e)if(!q.includes(Z))return!1;return!0}function gr(j){return null!==j&&"object"==typeof j}function zn(j){const L=[];for(const[q,_e]of Object.entries(j))Array.isArray(_e)?_e.forEach(Z=>{L.push(encodeURIComponent(q)+"="+encodeURIComponent(Z))}):L.push(encodeURIComponent(q)+"="+encodeURIComponent(_e));return L.length?"&"+L.join("&"):""}function ti(j){const L={};return j.replace(/^\?/,"").split("&").forEach(_e=>{if(_e){const[Z,He]=_e.split("=");L[decodeURIComponent(Z)]=decodeURIComponent(He)}}),L}function Ci(j){const L=j.indexOf("?");if(!L)return"";const q=j.indexOf("#",L);return j.substring(L,q>0?q:void 0)}function Ln(j,L){const q=new fn(j,L);return q.subscribe.bind(q)}class fn{constructor(L,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{L(this)}).catch(_e=>{this.error(_e)})}next(L){this.forEachObserver(q=>{q.next(L)})}error(L){this.forEachObserver(q=>{q.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,q,_e){let Z;if(void 0===L&&void 0===q&&void 0===_e)throw new Error("Missing Observer.");Z=function it(j,L){if("object"!=typeof j||null===j)return!1;for(const q of L)if(q in j&&"function"==typeof j[q])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:q,complete:_e},void 0===Z.next&&(Z.next=tn),void 0===Z.error&&(Z.error=tn),void 0===Z.complete&&(Z.complete=tn);const He=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Z.error(this.finalError):Z.complete()}catch{}}),this.observers.push(Z),He}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,L)}sendOne(L,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{q(this.observers[L])}catch(_e){typeof console<"u"&&console.error&&console.error(_e)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tn(){}function Je(j,L=1e3,q=2){const _e=L*Math.pow(q,j),Z=Math.round(.5*_e*(Math.random()-.5)*2);return Math.min(144e5,_e+Z)}function Mt(j){return j&&j._delegate?j._delegate:j}},2601:(ot,Te,k)=>{var g=k(4650);let J=null;function O(){return J}const ue=new g.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function he(){return(0,g.LFG)(B)}()},providedIn:"platform"}),n})();const U=new g.OlP("Location Initialized");let B=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){W()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){W()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Le(){return new B((0,g.LFG)(ue))}()},providedIn:"platform"}),n})();function W(){return!!window.history.pushState}function Se(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function we(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function et(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(Qe)},providedIn:"root"}),n})();const fe=new g.OlP("appBaseHref");let Qe=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,g.f3M)(ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Se(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+et(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+et(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+et(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(de),g.LFG(fe,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nt=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Se(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+et(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+et(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(de),g.LFG(fe,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n{constructor(t){this._subject=new g.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=we(Ue(r)),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+et(r))}normalize(t){return n.stripTrailingSlash(function Ie(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ue(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+et(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+et(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=et,n.joinWithSlash=Se,n.stripTrailingSlash=we,n.\u0275fac=function(t){return new(t||n)(g.LFG(ge))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ve(){return new Ae((0,g.LFG)(ge))}()},providedIn:"root"}),n})();function Ue(n){return n.replace(/\/index.html$/,"")}let Pn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new lc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){tr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){tr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class lc{constructor(){this.$implicit=null,this.ngIf=null}}function tr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}let Go=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function lr(n){return"server"===n}let Ba=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new Rh((0,g.LFG)(ue),window)}),n})();class Rh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Tr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ri(this.window.history)||ri(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ri(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class zs extends class Wl extends class le{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){J||(J=n)}(new zs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ja(){return qs=qs||document.querySelector("base"),qs?qs.getAttribute("href"):null}();return null==t?null:function jr(n){Zn=Zn||document.createElement("a"),Zn.setAttribute("href",n);const e=Zn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){qs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Fa(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Zn,qs=null;const _n=new g.OlP("TRANSITION_ID"),xc=[{provide:g.ip1,useFactory:function Kl(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[_n,ue,g.zs3],multi:!0}];let Mc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Xa=new g.OlP("EventManagerPlugins");let Zl=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Xa),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class eu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Ws=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),yo=(()=>{class n extends Ws{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Yl),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Yl))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function Yl(n){O().remove(n)}const vo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ql=/%COMP%/g;function ru(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?ru(n,o,t):(o=o.replace(Ql,n),t.push(o))}return t}function Jl(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let _o=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new wo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Xl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case g.ifc.ShadowDom:return new ed(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=ru(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Zl),g.LFG(yo),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class wo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(vo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Jo(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Jo(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=vo[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=vo[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,o&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Jl(r)):this.eventManager.addEventListener(e,t,Jl(r))}}function Jo(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Xl extends wo{constructor(e,t,r,o){super(e),this.component=r;const u=ru(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Mn(n){return"_ngcontent-%COMP%".replace(Ql,n)}(o+"-"+r.id),this.hostAttr=function nu(n){return"_nghost-%COMP%".replace(Ql,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ed extends wo{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=ru(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let nr=(()=>{class n extends eu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Xo=["alt","control","meta","shift"],ea={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Mi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ta=(()=>{class n extends eu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),d="code."),Xo.forEach(b=>{const S=r.indexOf(b);S>-1&&(r.splice(S,1),d+=b+".")}),d+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=o,w.fullKey=d,w}static matchEventFullKeyCode(t,r){let o=ea[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Xo.forEach(d=>{d!==o&&(0,Mi[d])(t)&&(u+=d+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const au=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function su(){zs.makeCurrent()},multi:!0},{provide:ue,useFactory:function ra(){return(0,g.RDi)(document),document},deps:[]}]),Cs=new g.OlP(""),nd=[{provide:g.rWj,useClass:class Oh{addToWindow(e){g.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const o=g.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(w){d=d||w,u--,0==u&&r(d)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:g.lri,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]}],Ts=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function Ys(){return new g.qLn},deps:[]},{provide:Xa,useClass:nr,multi:!0,deps:[ue,g.R0b,g.Lbi]},{provide:Xa,useClass:ta,multi:!0,deps:[ue]},{provide:_o,useClass:_o,deps:[Zl,yo,g.AFp]},{provide:g.FYo,useExisting:_o},{provide:Ws,useExisting:yo},{provide:yo,useClass:yo,deps:[ue]},{provide:Zl,useClass:Zl,deps:[Xa,g.R0b]},{provide:class go{},useClass:Mc,deps:[]},[]];let Nc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:_n,useExisting:g.AFp},xc]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Cs,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[...Ts,...nd],imports:[Go,g.hGG]}),n})(),Qi=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Io(){return new Qi((0,g.LFG)(ue))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var ln=k(8996),Ar=k(9751);const{isArray:Fh}=Array,{getPrototypeOf:hu,prototype:Hr,keys:Ii}=Object;function Fc(n){if(1===n.length){const e=n[0];if(Fh(e))return{args:e,keys:null};if(function Ao(n){return n&&"object"==typeof n&&hu(n)===Hr}(e)){const t=Ii(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ei=k(8421),Xi=k(7669),yr=k(5403),wt=k(4004);const{isArray:fu}=Array;function aa(n){return(0,wt.U)(e=>function So(n,e){return fu(e)?n(...e):n(e)}(n,e))}function Sr(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let es=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),Ri=(()=>{class n extends es{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const xr=new g.OlP("NgValueAccessor"),ca={provide:xr,useExisting:(0,g.Gpc)(()=>Vc),multi:!0},id=new g.OlP("CompositionEventMode");let Vc=(()=>{class n extends es{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Pp(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(id,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[g._Bn([ca]),g.qOj]}),n})();function Gr(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function xo(n){return null!=n&&"number"==typeof n.length}const gn=new g.OlP("NgValidators"),Ni=new g.OlP("NgAsyncValidators"),gu=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Oi{static min(e){return function mu(n){return e=>{if(Gr(e.value)||Gr(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Pi(n){return e=>{if(Gr(e.value)||Gr(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return sd(e)}static requiredTrue(e){return function eo(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return ts(e)}static minLength(e){return function Uc(n){return e=>Gr(e.value)||!xo(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Rn(n){return e=>xo(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function od(n){if(!n)return D;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Gr(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return Be(e)}static composeAsync(e){return gt(e)}}function sd(n){return Gr(n.value)?{required:!0}:null}function ts(n){return Gr(n.value)||gu.test(n.value)?null:{email:!0}}function D(n){return null}function C(n){return null!=n}function x(n){return(0,g.QGY)(n)?(0,ln.D)(n):n}function F(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function K(n,e){return e.map(t=>t(n))}function Ee(n){return n.map(e=>function ne(n){return!n.validate}(e)?e:t=>e.validate(t))}function Be(n){if(!n)return null;const e=n.filter(C);return 0==e.length?null:function(t){return F(K(t,e))}}function ct(n){return null!=n?Be(Ee(n)):null}function gt(n){if(!n)return null;const e=n.filter(C);return 0==e.length?null:function(t){return function ua(...n){const e=(0,Xi.jO)(n),{args:t,keys:r}=Fc(n),o=new Ar.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let w=d,b=d;for(let S=0;S<d;S++){let N=!1;(0,Ei.Xf)(t[S]).subscribe((0,yr.x)(u,$=>{N||(N=!0,b--),m[S]=$},()=>w--,void 0,()=>{(!w||!N)&&(b||u.next(r?Sr(r,m):m),u.complete())}))}});return e?o.pipe(aa(e)):o}(K(t,e).map(x)).pipe((0,wt.U)(F))}}function Ct(n){return null!=n?gt(Ee(n)):null}function lt(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Dn(n){return n._rawValidators}function ir(n){return n._rawAsyncValidators}function Ss(n){return n?Array.isArray(n)?n:[n]:[]}function ns(n,e){return Array.isArray(n)?n.includes(e):n===e}function xs(n,e){const t=Ss(e);return Ss(n).forEach(o=>{ns(t,o)||t.push(o)}),t}function to(n,e){return Ss(e).filter(t=>!ns(n,t))}class rs{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ct(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ct(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Nn extends rs{get formDirective(){return null}get path(){return null}}class zr extends rs{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ms{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let kp=(()=>{class n extends Ms{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(zr,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[g.qOj]}),n})(),Fp=(()=>{class n extends Ms{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Nn,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[g.qOj]}),n})();const pa="VALID",$c="INVALID",ga="PENDING",yu="DISABLED";function vu(n){return(Gc(n)?n.validators:n)||null}function Up(n){return Array.isArray(n)?ct(n):n||null}function Hc(n,e){return(Gc(e)?e.asyncValidators:n)||null}function Bp(n){return Array.isArray(n)?Ct(n):n||null}function Gc(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function jp(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new g.vHH(1e3,"");if(!r[t])throw new g.vHH(1001,"")}function is(n,e,t){n._forEachChild((r,o)=>{if(void 0===t[o])throw new g.vHH(1002,"")})}class Mo{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Up(this._rawValidators),this._composedAsyncValidatorFn=Bp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===pa}get invalid(){return this.status===$c}get pending(){return this.status==ga}get disabled(){return this.status===yu}get enabled(){return this.status!==yu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Up(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Bp(e)}addValidators(e){this.setValidators(xs(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(xs(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(to(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(to(e,this._rawAsyncValidators))}hasValidator(e){return ns(this._rawValidators,e)}hasAsyncValidator(e){return ns(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ga,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=yu,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=pa,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pa||this.status===ga)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?yu:pa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ga,this._hasOwnPendingAsyncValidator=!0;const t=x(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?yu:this.errors?$c:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ga)?ga:this._anyControlsHaveStatus($c)?$c:pa}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Gc(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class _u extends Mo{constructor(e,t,r){super(vu(t),Hc(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){is(this,0,e),Object.keys(e).forEach(r=>{jp(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class ay extends _u{}function wu(n,e){no(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function ro(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&jh(n,e)})}(n,e),function cd(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function ma(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&jh(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function F0(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function zc(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Iu(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function ud(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function no(n,e){const t=Dn(n);null!==e.validator?n.setValidators(lt(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=ir(n);null!==e.asyncValidator?n.setAsyncValidators(lt(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();ud(e._rawValidators,o),ud(e._rawAsyncValidators,o)}function Iu(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=Dn(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=ir(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return ud(e._rawValidators,r),ud(e._rawAsyncValidators,r),t}function jh(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function hd(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function bu(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const qc=class extends Mo{constructor(e=null,t,r){super(vu(t),Hc(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Gc(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=bu(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){hd(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){hd(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){bu(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let ya=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Kh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();const Zc=new g.OlP("NgModelWithFormControlWarning"),Cu={provide:Nn,useExisting:(0,g.Gpc)(()=>ss)};let ss=(()=>{class n extends Nn{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Iu(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return wu(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){zc(t.control||null,t,!1),function cy(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function Hh(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(zc(r||null,t),(n=>n instanceof qc)(o)&&(wu(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function $h(n,e){no(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function L0(n,e){return Iu(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){no(this.form,this),this._oldForm&&Iu(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(gn,10),g.Y36(Ni,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&g.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([Cu]),g.qOj,g.TTD]}),n})();const md={provide:zr,useExisting:(0,g.Gpc)(()=>Mr)};let Mr=(()=>{class n extends zr{constructor(t,r,o,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new g.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Gh(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===Vc?t=u:function U0(n){return Object.getPrototypeOf(n.constructor)===Ri}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function $p(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Bh(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(g.Y36(Nn,13),g.Y36(gn,10),g.Y36(Ni,10),g.Y36(xr,10),g.Y36(Zc,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[g._Bn([md]),g.qOj,g.TTD]}),n})(),wa=(()=>{class n{constructor(){this._validator=D}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):D,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,features:[g.TTD]}),n})();const Ey={provide:gn,useExisting:(0,g.Gpc)(()=>h),multi:!0};let h=(()=>{class n extends wa{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=g.D6c,this.createValidator=t=>sd}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&g.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[g._Bn([Ey]),g.qOj]}),n})();const _={provide:gn,useExisting:(0,g.Gpc)(()=>A),multi:!0};let A=(()=>{class n extends wa{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=g.D6c,this.createValidator=t=>ts}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[g._Bn([_]),g.qOj]}),n})(),Id=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[Kh]}),n})(),Dy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[Id]}),n})(),Su=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Zc,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[Id]}),n})();class Wp extends Mo{constructor(e,t,r){super(vu(t),Hc(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let o=this._adjustIndex(e);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),t&&(this.controls.splice(o,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){is(this,0,e),e.forEach((r,o)=>{jp(this,!1,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function Kp(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let Cy=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const o=this._reduceControls(t);let u={};return Kp(r)?u=r:null!==r&&(u.validators=r.validator,u.asyncValidators=r.asyncValidator),new _u(o,u)}record(t,r=null){const o=this._reduceControls(t);return new ay(o,r)}control(t,r,o){let u={};return this.useNonNullable?(Kp(r)?u=r:(u.validators=r,u.asyncValidators=o),new qc(t,{...u,nonNullable:!0})):new qc(t,r,o)}array(t,r,o){const u=t.map(d=>this._createControl(d));return new Wp(u,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return t instanceof qc||t instanceof Mo?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:Su}),n})();function rt(...n){const e=(0,Xi.yG)(n);return(0,ln.D)(n,e)}var Rs=k(7579);class Ns extends Rs.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Jp=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Qc=k(4671),nf=k(9672);function H0(...n){const e=(0,Xi.yG)(n),t=(0,Xi.jO)(n),{args:r,keys:o}=Fc(n);if(0===r.length)return(0,ln.D)([],e);const u=new Ar.y(function HD(n,e,t=Qc.y){return r=>{G0(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let w=0;w<o;w++)G0(e,()=>{const b=(0,ln.D)(n[w],e);let S=!1;b.subscribe((0,yr.x)(r,N=>{u[w]=N,S||(S=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>Sr(o,d):Qc.y));return t?u.pipe(aa(t)):u}function G0(n,e,t){n?(0,nf.f)(t,n,e):e()}var Ed=k(8189);function Ay(...n){return function GD(){return(0,Ed.J)(1)}()((0,ln.D)(n,(0,Xi.yG)(n)))}function z0(n){return new Ar.y(e=>{(0,Ei.Xf)(n()).subscribe(e)})}var zD=k(9635),rf=k(576);function sf(n,e){const t=(0,rf.m)(n)?n:()=>n,r=o=>o.error(t());return new Ar.y(e?o=>e.schedule(r,0,o):r)}var Jc=k(515),q0=k(727),si=k(4482);function Sy(){return(0,si.e)((n,e)=>{let t=null;n._refCount++;const r=(0,yr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class W0 extends Ar.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,si.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new q0.w0;const t=this.getSubject();e.add(this.source.subscribe((0,yr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=q0.w0.EMPTY)}return e}refCount(){return Sy()(this)}}function rn(n,e){return(0,si.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,yr.x)(r,w=>{o?.unsubscribe();let b=0;const S=u++;(0,Ei.Xf)(n(w,S)).subscribe(o=(0,yr.x)(r,N=>r.next(e?e(w,N,S,b++):N),()=>{o=null,m()}))},()=>{d=!0,m()}))})}function Xc(n){return n<=0?()=>Jc.E:(0,si.e)((e,t)=>{let r=0;e.subscribe((0,yr.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function af(...n){const e=(0,Xi.yG)(n);return(0,si.e)((t,r)=>{(e?Ay(n,t,e):Ay(n,t)).subscribe(r)})}function as(n,e){return(0,si.e)((t,r)=>{let o=0;t.subscribe((0,yr.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var hn=k(5577);function xu(n){return(0,si.e)((e,t)=>{let r=!1;e.subscribe((0,yr.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function xy(n=qD){return(0,si.e)((e,t)=>{let r=!1;e.subscribe((0,yr.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function qD(){return new Jp}function Ia(n,e){const t=arguments.length>=2;return r=>r.pipe(n?as((o,u)=>n(o,u,r)):Qc.y,Xc(1),t?xu(e):xy(()=>new Jp))}function Mu(n,e){return(0,rf.m)(e)?(0,hn.z)(n,e,1):(0,hn.z)(n,1)}var oi=k(8505);function Ea(n){return(0,si.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,yr.x)(t,void 0,void 0,d=>{u=(0,Ei.Xf)(n(d,Ea(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function WD(n,e,t,r,o){return(u,d)=>{let m=t,w=e,b=0;u.subscribe((0,yr.x)(d,S=>{const N=b++;w=m?n(w,S,N):(m=!0,S),r&&d.next(w)},o&&(()=>{m&&d.next(w),d.complete()})))}}function Dd(n,e){return(0,si.e)(WD(n,e,arguments.length>=2,!0))}function My(n){return n<=0?()=>Jc.E:(0,si.e)((e,t)=>{let r=[];e.subscribe((0,yr.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function K0(n,e){const t=arguments.length>=2;return r=>r.pipe(n?as((o,u)=>n(o,u,r)):Qc.y,My(1),t?xu(e):xy(()=>new Jp))}function Ry(n){return(0,si.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Nt="primary",us=Symbol("RouteTitle");class YD{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function bd(n){return new YD(n)}function TS(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function io(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!QD(n[o],e[o]))return!1;return!0}function QD(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function so(n){return Array.prototype.concat.apply([],n)}function Xp(n){return n.length>0?n[n.length-1]:null}function Wr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Da(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,ln.D)(Promise.resolve(n)):rt(n)}const JD={exact:function Py(n,e,t){if(!nl(n.segments,e.segments)||!cf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Py(n.children[r],e.children[r],t))return!1;return!0},subset:el},Y0={exact:function Oy(n,e){return io(n,e)},subset:function SS(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>QD(n[t],e[t]))},ignored:()=>!0};function eg(n,e,t){return JD[t.paths](n.root,e.root,t.matrixParams)&&Y0[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function el(n,e,t){return tg(n,e,e.segments,t)}function tg(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!nl(o,t)||e.hasChildren()||!cf(o,t,r))}if(n.segments.length===t.length){if(!nl(n.segments,t)||!cf(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!el(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(nl(n.segments,o)&&cf(n.segments,o,r)&&n.children[Nt])&&tg(n.children[Nt],e,u,r)}}function cf(n,e,t){return e.every((r,o)=>Y0[t](n[o].parameters,r.parameters))}class tl{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bd(this.queryParams)),this._queryParamMap}toString(){return J0.serialize(this)}}class jt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Wr(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Cd(this)}}class lf{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=bd(this.parameters)),this._parameterMap}toString(){return Fy(this)}}function nl(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Q0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return new ky},providedIn:"root"}),n})();class ky{parse(e){const t=new Ly(e);return new tl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Td(e.root,!0)}`,r=function nb(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${rg(t)}=${rg(o)}`).join("&"):`${rg(t)}=${rg(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function tb(n){return encodeURI(n)}(e.fragment)}`:""}`}}const J0=new ky;function Cd(n){return n.segments.map(e=>Fy(e)).join("/")}function Td(n,e){if(!n.hasChildren())return Cd(n);if(e){const t=n.children[Nt]?Td(n.children[Nt],!1):"",r=[];return Wr(n.children,(o,u)=>{u!==Nt&&r.push(`${u}:${Td(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function eb(n,e){let t=[];return Wr(n.children,(r,o)=>{o===Nt&&(t=t.concat(e(r,o)))}),Wr(n.children,(r,o)=>{o!==Nt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Nt?[Td(n.children[Nt],!1)]:[`${o}:${Td(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Nt]?`${Cd(n)}/${t[0]}`:`${Cd(n)}/(${t.join("//")})`}}function ng(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function rg(n){return ng(n).replace(/%3B/gi,";")}function ig(n){return ng(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function df(n){return decodeURIComponent(n)}function Ru(n){return df(n.replace(/\+/g,"%20"))}function Fy(n){return`${ig(n.path)}${function X0(n){return Object.keys(n).map(e=>`;${ig(e)}=${ig(n[e])}`).join("")}(n.parameters)}`}const xS=/^[^\/()?;=#]+/;function rl(n){const e=n.match(xS);return e?e[0]:""}const rb=/^[^=?&#]+/,tw=/^[^&#]+/;class Ly{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new jt([],{}):new jt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Nt]=new jt(e,t)),r}parseSegment(){const e=rl(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new g.vHH(4009,!1);return this.capture(e),new lf(df(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=rl(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=rl(this.remaining);o&&(r=o,this.capture(r))}e[df(t)]=df(r)}parseQueryParam(e){const t=function ew(n){const e=n.match(rb);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function nw(n){const e=n.match(tw);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=Ru(t),u=Ru(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=rl(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new g.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Nt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Nt]:new jt([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new g.vHH(4011,!1)}}function sg(n){return n.segments.length>0?new jt([],{[Nt]:n}):n}function il(n){const e={};for(const r of Object.keys(n.children)){const u=il(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function og(n){if(1===n.numberOfChildren&&n.children[Nt]){const e=n.children[Nt];return new jt(n.segments.concat(e.segments),e.children)}return n}(new jt(n.segments,e))}function Nu(n){return n instanceof tl}function sb(n,e,t,r,o){if(0===t.length)return Sd(e.root,e.root,e.root,r,o);const u=function By(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ag(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Wr(u.outlets,(w,b)=>{m[b]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new ag(t,e,r)}(t);return u.toRoot()?Sd(e.root,e.root,new jt([],{}),r,o):function d(w){const b=function ob(n,e,t,r){if(n.isAbsolute)return new gf(e.root,!0,0);if(-1===r)return new gf(t,t===e.root,0);return function jy(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new g.vHH(4005,!1);o=r.segments.length}return new gf(r,!1,o-u)}(t,r+(Ad(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),S=b.processChildren?Di(b.segmentGroup,b.index,u.commands):$y(b.segmentGroup,b.index,u.commands);return Sd(e.root,b.segmentGroup,S,r,o)}(n.snapshot?._lastPathIndex)}function Ad(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function pf(n){return"object"==typeof n&&null!=n&&n.outlets}function Sd(n,e,t,r,o){let d,u={};r&&Wr(r,(w,b)=>{u[b]=Array.isArray(w)?w.map(S=>`${S}`):`${w}`}),d=n===e?t:Uy(n,e,t);const m=sg(il(d));return new tl(m,u,o)}function Uy(n,e,t){const r={};return Wr(n.children,(o,u)=>{r[u]=o===e?t:Uy(o,e,t)}),new jt(n.segments,r)}class ag{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ad(r[0]))throw new g.vHH(4003,!1);const o=r.find(pf);if(o&&o!==Xp(r))throw new g.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class gf{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function $y(n,e,t){if(n||(n=new jt([],{})),0===n.segments.length&&n.hasChildren())return Di(n,e,t);const r=function ub(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(pf(m))break;const w=`${m}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&b&&"object"==typeof b&&void 0===b.outlets){if(!sw(w,b,d))return u;r+=2}else{if(!sw(w,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new jt(n.segments.slice(0,r.pathIndex),{});return u.children[Nt]=new jt(n.segments.slice(r.pathIndex),n.children),Di(u,0,o)}return r.match&&0===o.length?new jt(n.segments,{}):r.match&&!n.hasChildren()?ug(n,e,t):r.match?Di(n,0,o):ug(n,e,t)}function Di(n,e,t){if(0===t.length)return new jt(n.segments,{});{const r=function ab(n){return pf(n[0])?n[0].outlets:{[Nt]:n}}(t),o={};return Wr(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=$y(n.children[d],e,u))}),Wr(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new jt(n.segments,o)}}function ug(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(pf(u)){const w=cb(u.outlets);return new jt(r,w)}if(0===o&&Ad(t[0])){r.push(new lf(n.segments[e].path,iw(t[0]))),o++;continue}const d=pf(u)?u.outlets[Nt]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&Ad(m)?(r.push(new lf(d,iw(m))),o+=2):(r.push(new lf(d,{})),o++)}return new jt(r,{})}function cb(n){const e={};return Wr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=ug(new jt([],{}),0,t))}),e}function iw(n){const e={};return Wr(n,(t,r)=>e[r]=`${t}`),e}function sw(n,e,t){return n==t.path&&io(e,t.parameters)}class ba{constructor(e,t){this.id=e,this.url=t}}class cg extends ba{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class sl extends ba{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class lg extends ba{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ow extends ba{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ot extends ba{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aw extends ba{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uw extends ba{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class cw extends ba{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lb extends ba{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class db{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class lw{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class hb{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dw{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fb{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pb{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gb{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Hy{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Ca(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Ca(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Gy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Gy(e,this._root).map(t=>t.value)}}function Ca(n,e){if(n===e.value)return e;for(const t of e.children){const r=Ca(n,t);if(r)return r}return null}function Gy(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Gy(n,t);if(r.length)return r.unshift(e),r}return[]}class oo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ou(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class fw extends Hy{constructor(e,t){super(e),this.snapshot=t,Pu(this,e)}toString(){return this.snapshot.toString()}}function mb(n,e){const t=function MS(n,e){const d=new zy([],{},{},"",{},Nt,e,null,n.root,-1,{});return new mw("",new oo(d,[]))}(n,e),r=new Ns([new lf("",{})]),o=new Ns({}),u=new Ns({}),d=new Ns({}),m=new Ns(""),w=new xd(r,o,d,m,u,Nt,e,t.root);return w.snapshot=t.root,new fw(new oo(w,[]),t)}class xd{constructor(e,t,r,o,u,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.title=this.data?.pipe((0,wt.U)(b=>b[us]))??rt(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,wt.U)(e=>bd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,wt.U)(e=>bd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function pw(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function gw(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class zy{constructor(e,t,r,o,u,d,m,w,b,S,N,$){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.title=this.data?.[us],this.routeConfig=w,this._urlSegment=b,this._lastPathIndex=S,this._correctedLastPathIndex=$??S,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=bd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class mw extends Hy{constructor(e,t){super(t),this.url=e,Pu(this,t)}toString(){return yw(this._root)}}function Pu(n,e){e.value._routerState=n,e.children.forEach(t=>Pu(n,t))}function yw(n){const e=n.children.length>0?` { ${n.children.map(yw).join(", ")} } `:"";return`${n.value}${e}`}function dg(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,io(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),io(e.params,t.params)||n.params.next(t.params),function AS(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!io(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),io(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Md(n,e){const t=io(n.params,e.params)&&function XD(n,e){return nl(n,e)&&n.every((t,r)=>io(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Md(n.parent,e.parent))}function Rd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function vb(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Rd(n,r,o);return Rd(n,r)})}(n,e,t);return new oo(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>Rd(n,m)),d}}const r=function _b(n){return new xd(new Ns(n.url),new Ns(n.params),new Ns(n.queryParams),new Ns(n.fragment),new Ns(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Rd(n,u));return new oo(r,o)}}const qy="ngNavigationCancelingError";function vw(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Nu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=_w(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function _w(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[qy]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Wy(n){return ww(n)&&Nu(n.url)}function ww(n){return n&&n[qy]}class Iw{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Nd,this.attachRef=null}}let Nd=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Iw,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Od=!1;let Ew=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=o||Nt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,Od);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,Od);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,Od);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new g.vHH(4013,Od);this._activatedRoute=t;const o=this.location,d=t._futureSnapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new Ky(t,m,o.injector);if(r&&function wb(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(d);this.activated=o.createComponent(b,o.length,w)}else this.activated=o.createComponent(d,{index:o.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Nd),g.Y36(g.s_b),g.$8M("name"),g.Y36(g.sBO),g.Y36(g.lqb))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class Ky{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===xd?this.route:e===Nd?this.childContexts:this.parent.get(e,t)}}let Dw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[g.jDz],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},dependencies:[Ew],encapsulation:2}),n})();function ol(n,e){return n.providers&&!n._injector&&(n._injector=(0,g.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function mf(n){const e=n.children&&n.children.map(mf),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Nt&&(t.component=Dw),t}function cs(n){return n.outlet||Nt}function fg(n,e){const t=n.filter(r=>cs(r)===e);return t.push(...n.filter(r=>cs(r)!==e)),t}function pg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class RS{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),dg(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Ou(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),Wr(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Ou(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Ou(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Ou(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new pb(u.value.snapshot))}),e.children.length&&this.forwardEvent(new dw(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(dg(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),dg(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=pg(o.snapshot),w=m?.get(g._Vd)??null;d.attachRef=null,d.route=o,d.resolver=w,d.injector=m,d.outlet&&d.outlet.activateWith(o,d.injector),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class yf{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class al{constructor(e,t){this.component=e,this.route=t}}function Qy(n,e,t){const r=n._root;return gg(r,e?e._root:null,t,[r.value])}function ku(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,g.Z0I)(n)?e.get(n):n:r}function gg(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Ou(e);return n.children.forEach(d=>{(function bb(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const w=function Cb(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!nl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!nl(n.url,e.url)||!io(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Md(n,e)||!io(n.queryParams,e.queryParams);default:return!Md(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new yf(r)):(u.data=d.data,u._resolvedData=d._resolvedData),gg(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new al(m.outlet.component,d))}else d&&vf(e,m,o),o.canActivateChecks.push(new yf(r)),gg(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),Wr(u,(d,m)=>vf(d,t.getContext(m),o)),o}function vf(n,e,t){const r=Ou(n),o=n.value;Wr(r,(u,d)=>{vf(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new al(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function _f(n){return"function"==typeof n}function Sw(n){return n instanceof Jp||"EmptyError"===n?.name}const ev=Symbol("INITIAL_VALUE");function wf(){return rn(n=>H0(n.map(e=>e.pipe(Xc(1),af(ev)))).pipe((0,wt.U)(e=>{for(const t of e)if(!0!==t){if(t===ev)return ev;if(!1===t||t instanceof tl)return t}return!0}),as(e=>e!==ev),Xc(1)))}function xw(n){return(0,zD.z)((0,oi.b)(e=>{if(Nu(e))throw vw(0,e)}),(0,wt.U)(e=>!0===e))}const If={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function nv(n,e,t,r,o){const u=Ef(n,e,t);return u.matched?function Mw(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?rt(o.map(d=>{const m=ku(d,n);return Da(function Aw(n){return n&&_f(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(wf(),xw()):rt(!0)}(r=ol(e,r),e,t).pipe((0,wt.U)(d=>!0===d?u:{...If})):rt(u)}function Ef(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...If}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||TS)(t,n,e);if(!o)return{...If};const u={};Wr(o.posParams,(m,w)=>{u[w]=m.path});const d=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:d,positionalParamSegments:o.posParams??{}}}function mg(n,e,t,r,o="corrected"){if(t.length>0&&function Ab(n,e,t){return t.some(r=>Df(n,e,r)&&cs(r)!==Nt)}(n,t,r)){const d=new jt(e,function Rw(n,e,t,r){const o={};o[Nt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&cs(u)!==Nt){const d=new jt([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[cs(u)]=d}return o}(n,e,r,new jt(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function Sb(n,e,t){return t.some(r=>Df(n,e,r))}(n,t,r)){const d=new jt(n.segments,function Lu(n,e,t,r,o,u){const d={};for(const m of r)if(Df(n,t,m)&&!o[cs(m)]){const w=new jt([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[cs(m)]=w}return{...o,...d}}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new jt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Df(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Nw(n,e,t,r){return!!(cs(n)===r||r!==Nt&&Df(e,t,n))&&("**"===n.path||Ef(e,n,t).matched)}function Ow(n,e,t){return 0===e.length&&!n.children[t]}const ul=!1;class Aa{constructor(e){this.segmentGroup=e||null}}class yg{constructor(e){this.urlTree=e}}function No(n){return sf(new Aa(n))}function vg(n){return sf(new yg(n))}class rv{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=mg(this.urlTree.root,[],[],this.config).segmentGroup,t=new jt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Nt).pipe((0,wt.U)(u=>this.createUrlTree(il(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ea(u=>{if(u instanceof yg)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Aa?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Nt).pipe((0,wt.U)(o=>this.createUrlTree(il(o),e.queryParams,e.fragment))).pipe(Ea(o=>{throw o instanceof Aa?this.noMatchError(o):o}))}noMatchError(e){return new g.vHH(4002,ul)}createUrlTree(e,t,r){const o=sg(e);return new tl(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,wt.U)(u=>new jt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,ln.D)(o).pipe(Mu(u=>{const d=r.children[u],m=fg(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,wt.U)(w=>({segment:w,outlet:u})))}),Dd((u,d)=>(u[d.outlet]=d.segment,u),{}),K0())}expandSegment(e,t,r,o,u,d){return(0,ln.D)(r).pipe(Mu(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(Ea(b=>{if(b instanceof Aa)return rt(null);throw b}))),Ia(m=>!!m),Ea((m,w)=>{if(Sw(m))return Ow(t,o,u)?rt(new jt([],{})):No(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return Nw(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):No(t):No(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?vg(u):this.lineralizeSegments(r,u).pipe((0,hn.z)(d=>{const m=new jt(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:w,remainingSegments:b,positionalParamSegments:S}=Ef(t,o,u);if(!m)return No(t);const N=this.applyRedirectCommands(w,o.redirectTo,S);return o.redirectTo.startsWith("/")?vg(N):this.lineralizeSegments(o,N).pipe((0,hn.z)($=>this.expandSegment(e,t,r,$.concat(b),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=ol(r,e),r.loadChildren?(r._loadedRoutes?rt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,wt.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new jt(o,{})))):rt(new jt(o,{}))):nv(t,r,o,e).pipe(rn(({matched:d,consumedSegments:m,remainingSegments:w})=>d?this.getChildConfig(e=r._injector??e,r,o).pipe((0,hn.z)(S=>{const N=S.injector??e,$=S.routes,{segmentGroup:Y,slicedSegments:oe}=mg(t,m,w,$),Oe=new jt(Y.segments,Y.children);if(0===oe.length&&Oe.hasChildren())return this.expandChildren(N,$,Oe).pipe((0,wt.U)(Lt=>new jt(m,Lt)));if(0===$.length&&0===oe.length)return rt(new jt(m,{}));const Pe=cs(r)===u;return this.expandSegment(N,Oe,$,oe,Pe?Nt:u,!0).pipe((0,wt.U)(Pt=>new jt(m.concat(Pt.segments),Pt.children)))})):No(t)))}getChildConfig(e,t,r){return t.children?rt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?rt({routes:t._loadedRoutes,injector:t._loadedInjector}):function tv(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?rt(!0):rt(o.map(d=>{const m=ku(d,n);return Da(function NS(n){return n&&_f(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(wf(),xw())}(e,t,r).pipe((0,hn.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,oi.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Pw(n){return sf(_w(ul,3))}())):rt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return rt(r);if(o.numberOfChildren>1||!o.children[Nt])return sf(new g.vHH(4e3,ul));o=o.children[Nt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new tl(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Wr(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return Wr(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,o)}),new jt(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new g.vHH(4001,ul);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class sv{}class Mb{constructor(e,t,r,o,u,d,m,w){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=m,this.urlSerializer=w}recognize(){const e=mg(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Nt).pipe((0,wt.U)(t=>{if(null===t)return null;const r=new zy([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Nt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new oo(r,t),u=new mw(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=pw(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,ln.D)(Object.keys(r.children)).pipe(Mu(o=>{const u=r.children[o],d=fg(t,o);return this.processSegmentGroup(e,d,u,o)}),Dd((o,u)=>o&&u?(o.push(...u),o):null),function KD(n,e=!1){return(0,si.e)((t,r)=>{let o=0;t.subscribe((0,yr.x)(r,u=>{const d=n(u,o++);(d||e)&&r.next(u),!d&&r.complete()}))})}(o=>null!==o),xu(null),K0(),(0,wt.U)(o=>{if(null===o)return null;const u=ov(o);return function Fw(n){n.sort((e,t)=>e.value.outlet===Nt?-1:t.value.outlet===Nt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,ln.D)(t).pipe(Mu(d=>this.processSegmentAgainstRoute(d._injector??e,d,r,o,u)),Ia(d=>!!d),Ea(d=>{if(Sw(d))return Ow(r,o,u)?rt([]):rt(null);throw d}))}processSegmentAgainstRoute(e,t,r,o,u){if(t.redirectTo||!Nw(t,r,o,u))return rt(null);let d;if("**"===t.path){const m=o.length>0?Xp(o).parameters:{},w=av(r)+o.length;d=rt({snapshot:new zy(o,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ob(t),cs(t),t.component??t._loadedComponent??null,t,Fi(r),w,Uw(t),w),consumedSegments:[],remainingSegments:[]})}else d=nv(r,t,o,e).pipe((0,wt.U)(({matched:m,consumedSegments:w,remainingSegments:b,parameters:S})=>{if(!m)return null;const N=av(r)+w.length;return{snapshot:new zy(w,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ob(t),cs(t),t.component??t._loadedComponent??null,t,Fi(r),N,Uw(t),N),consumedSegments:w,remainingSegments:b}}));return d.pipe(rn(m=>{if(null===m)return rt(null);const{snapshot:w,consumedSegments:b,remainingSegments:S}=m;e=t._injector??e;const N=t._loadedInjector??e,$=function Rb(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:Y,slicedSegments:oe}=mg(r,b,S,$.filter(Pe=>void 0===Pe.redirectTo),this.relativeLinkResolution);if(0===oe.length&&Y.hasChildren())return this.processChildren(N,$,Y).pipe((0,wt.U)(Pe=>null===Pe?null:[new oo(w,Pe)]));if(0===$.length&&0===oe.length)return rt([new oo(w,[])]);const Oe=cs(t)===u;return this.processSegment(N,$,Y,oe,Oe?Nt:u).pipe((0,wt.U)(Pe=>null===Pe?null:[new oo(w,Pe)]))}))}}function Lw(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function ov(n){const e=[],t=new Set;for(const r of n){if(!Lw(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=ov(r.children);e.push(new oo(r.value,o))}return e.filter(r=>!t.has(r))}function Fi(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function av(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Ob(n){return n.data||{}}function Uw(n){return n.resolve||{}}function $w(n){return"string"==typeof n.title||null===n.title}function wg(n){return rn(e=>{const t=n(e);return t?(0,ln.D)(t).pipe((0,wt.U)(()=>e)):rt(e)})}let Hw=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===Nt);return r}getResolvedTitleForRoute(t){return t.data[us]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(Gw)},providedIn:"root"}),n})(),Gw=(()=>{class n extends Hw{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Qi))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class zw{}class Oo extends class Vb{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Ig=new g.OlP("",{providedIn:"root",factory:()=>({})}),Ww=new g.OlP("ROUTES");let Eg=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return rt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Da(t.loadComponent()).pipe((0,oi.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Ry(()=>{this.componentLoaders.delete(t)})),o=new W0(r,()=>new Rs.x).pipe(Sy());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return rt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,wt.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,b,S=!1;Array.isArray(m)?b=m:(w=m.create(t).injector,b=so(w.get(Ww,[],g.XFs.Self|g.XFs.Optional)));return{routes:b.map(mf),injector:w}}),Ry(()=>{this.childrenLoaders.delete(r)})),d=new W0(u,()=>new Rs.x).pipe(Sy());return this.childrenLoaders.set(r,d),d}loadModuleFactoryOrRoutes(t){return Da(t()).pipe((0,hn.z)(r=>r instanceof g.YKP||Array.isArray(r)?rt(r):(0,ln.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3),g.LFG(g.Sil))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Ub{}class Bb{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function lv(n){throw n}function jb(n,e,t){return e.parse("/")}const $b={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},bg={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Cf(){const n=(0,g.f3M)(Q0),e=(0,g.f3M)(Nd),t=(0,g.f3M)(Ae),r=(0,g.f3M)(g.zs3),o=(0,g.f3M)(g.Sil),u=(0,g.f3M)(Ww,{optional:!0})??[],d=(0,g.f3M)(Ig,{optional:!0})??{},m=(0,g.f3M)(Gw),w=(0,g.f3M)(Hw,{optional:!0}),b=(0,g.f3M)(Ub,{optional:!0}),S=(0,g.f3M)(zw,{optional:!0}),N=new hr(null,n,e,t,r,o,so(u));return b&&(N.urlHandlingStrategy=b),S&&(N.routeReuseStrategy=S),N.titleStrategy=w??m,function dv(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,N),N}let hr=(()=>{class n{constructor(t,r,o,u,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Rs.x,this.errorHandler=lv,this.malformedUriErrorHandler=jb,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>rt(void 0),this.urlHandlingStrategy=new Bb,this.routeReuseStrategy=new Oo,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=d.get(Eg),this.configLoader.onLoadEndListener=$=>this.triggerEvent(new lw($)),this.configLoader.onLoadStartListener=$=>this.triggerEvent(new db($)),this.ngModule=d.get(g.h0i),this.console=d.get(g.c2e);const N=d.get(g.R0b);this.isNgZoneEnabled=N instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function uf(){return new tl(new jt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=mb(this.currentUrlTree,this.rootComponentType),this.transitions=new Ns({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(as(o=>0!==o.id),(0,wt.U)(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),rn(o=>{let u=!1,d=!1;return rt(o).pipe((0,oi.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),rn(m=>{const w=this.browserUrlTree.toString(),b=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return Hb(m.source)&&(this.browserUrlTree=m.extractedUrl),rt(m).pipe(rn(N=>{const $=this.transitions.getValue();return r.next(new cg(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),$!==this.transitions.getValue()?Jc.E:Promise.resolve(N)}),function iv(n,e,t,r){return rn(o=>function kw(n,e,t,r,o){return new rv(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,wt.U)(u=>({...o,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,oi.b)(N=>{this.currentNavigation={...this.currentNavigation,finalUrl:N.urlAfterRedirects},o.urlAfterRedirects=N.urlAfterRedirects}),function uv(n,e,t,r,o,u){return(0,hn.z)(d=>function $S(n,e,t,r,o,u,d="emptyOnly",m="legacy"){return new Mb(n,e,t,r,o,d,m,u).recognize().pipe(rn(w=>null===w?function xb(n){return new Ar.y(e=>e.error(n))}(new sv):rt(w)))}(n,e,t,d.urlAfterRedirects,r.serialize(d.urlAfterRedirects),r,o,u).pipe((0,wt.U)(m=>({...d,targetSnapshot:m}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,oi.b)(N=>{if(o.targetSnapshot=N.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const Y=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(Y,N)}this.browserUrlTree=N.urlAfterRedirects}const $=new Ot(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next($)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:$,extractedUrl:Y,source:oe,restoredState:Oe,extras:Pe}=m,Tt=new cg($,this.serializeUrl(Y),oe,Oe);r.next(Tt);const Pt=mb(Y,this.rootComponentType).snapshot;return rt(o={...m,targetSnapshot:Pt,urlAfterRedirects:Y,extras:{...Pe,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=m.rawUrl,m.resolve(null),Jc.E}),(0,oi.b)(m=>{const w=new aw(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,wt.U)(m=>o={...m,guards:Qy(m.targetSnapshot,m.currentSnapshot,this.rootContexts)}),function kS(n,e){return(0,hn.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?rt({...t,guardsResult:!0}):function FS(n,e,t,r){return(0,ln.D)(n).pipe((0,hn.z)(o=>function Fu(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?rt(u.map(m=>{const w=pg(e)??o,b=ku(m,w);return Da(function Tw(n){return n&&_f(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):w.runInContext(()=>b(n,e,t,r))).pipe(Ia())})).pipe(wf()):rt(!0)}(o.component,o.route,t,e,r)),Ia(o=>!0!==o,!0))}(d,r,o,n).pipe((0,hn.z)(m=>m&&function Cw(n){return"boolean"==typeof n}(m)?function LS(n,e,t,r){return(0,ln.D)(e).pipe(Mu(o=>Ay(function US(n,e){return null!==n&&e&&e(new hb(n)),rt(!0)}(o.route.parent,r),function VS(n,e){return null!==n&&e&&e(new fb(n)),rt(!0)}(o.route,r),function jS(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function Jy(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>z0(()=>rt(d.guards.map(w=>{const b=pg(d.node)??t,S=ku(w,b);return Da(function OS(n){return n&&_f(n.canActivateChild)}(S)?S.canActivateChild(r,n):b.runInContext(()=>S(r,n))).pipe(Ia())})).pipe(wf())));return rt(u).pipe(wf())}(n,o.path,t),function BS(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return rt(!0);const o=r.map(u=>z0(()=>{const d=pg(e)??t,m=ku(u,d);return Da(function Tb(n){return n&&_f(n.canActivate)}(m)?m.canActivate(e,n):d.runInContext(()=>m(e,n))).pipe(Ia())}));return rt(o).pipe(wf())}(n,o.route,t))),Ia(o=>!0!==o,!0))}(r,u,n,e):rt(m)),(0,wt.U)(m=>({...t,guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,oi.b)(m=>{if(o.guardsResult=m.guardsResult,Nu(m.guardsResult))throw vw(0,m.guardsResult);const w=new uw(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),as(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",3),!1)),wg(m=>{if(m.guards.canActivateChecks.length)return rt(m).pipe((0,oi.b)(w=>{const b=new cw(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(b)}),rn(w=>{let b=!1;return rt(w).pipe(function Bw(n,e){return(0,hn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return rt(t);let u=0;return(0,ln.D)(o).pipe(Mu(d=>function Pb(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!$w(o)&&(u[us]=o.title),function kb(n,e,t,r){const o=function Fb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return rt({});const u={};return(0,ln.D)(o).pipe((0,hn.z)(d=>function jw(n,e,t,r){const o=pg(e)??r,u=ku(n,o);return Da(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[d],e,t,r).pipe(Ia(),(0,oi.b)(m=>{u[d]=m}))),My(1),function ZD(n){return(0,wt.U)(()=>n)}(u),Ea(d=>Sw(d)?Jc.E:sf(d)))}(u,n,e,r).pipe((0,wt.U)(d=>(n._resolvedData=d,n.data=pw(n,t).resolve,o&&$w(o)&&(n.data[us]=o.title),null)))}(d.route,r,n,e)),(0,oi.b)(()=>u++),My(1),(0,hn.z)(d=>u===o.length?rt(t):Jc.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,oi.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(w),this.cancelNavigationTransition(w,"",2))}}))}),(0,oi.b)(w=>{const b=new lb(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(b)}))}),wg(m=>{const w=b=>{const S=[];b.routeConfig?.loadComponent&&!b.routeConfig._loadedComponent&&S.push(this.configLoader.loadComponent(b.routeConfig).pipe((0,oi.b)(N=>{b.component=N}),(0,wt.U)(()=>{})));for(const N of b.children)S.push(...w(N));return S};return H0(w(m.targetSnapshot.root)).pipe(xu(),Xc(1))}),wg(()=>this.afterPreactivation()),(0,wt.U)(m=>{const w=function yb(n,e,t){const r=Rd(n,e._root,t?t._root:void 0);return new fw(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return o={...m,targetRouterState:w}}),(0,oi.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,wt.U)(r=>(new RS(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,oi.b)({next(){u=!0},complete(){u=!0}}),Ry(()=>{u||d||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Ea(m=>{if(d=!0,ww(m)){Wy(m)||(this.navigated=!0,this.restoreHistory(o,!0));const w=new lg(o.id,this.serializeUrl(o.extractedUrl),m.message,m.cancellationCode);if(r.next(w),Wy(m)){const b=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),S={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Hb(o.source)};this.scheduleNavigation(b,"imperative",null,S,{resolve:o.resolve,reject:o.reject,promise:o.promise})}else o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new ow(o.id,this.serializeUrl(o.extractedUrl),m,o.targetSnapshot??void 0);r.next(w);try{o.resolve(this.errorHandler(m))}catch(b){o.reject(b)}}return Jc.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const o={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const m={...u};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(o.state=m)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,u,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(mf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,b=o||this.routerState.root,S=w?this.currentUrlTree.fragment:d;let N=null;switch(m){case"merge":N={...this.currentUrlTree.queryParams,...u};break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=u||null}return null!==N&&(N=this.removeEmptyProps(N)),sb(b,this.currentUrlTree,t,N,S??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Nu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function hv(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new g.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...$b}:!1===r?{...bg}:r,Nu(t))return eg(this.currentUrlTree,t,o);const u=this.parseUrl(t);return eg(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new sl(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){if(this.disposed)return Promise.resolve(!1);let m,w,b;d?(m=d.resolve,w=d.reject,b=d.promise):b=new Promise(($,Y)=>{m=$,w=Y});const S=++this.navigationId;let N;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),N=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):N=0,this.setTransition({id:S,targetPageId:N,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch($=>Promise.reject($))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===o?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,o){const u=new lg(t.id,this.serializeUrl(t.extractedUrl),r,o);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:function(){return Cf()},providedIn:"root"}),n})();function Hb(n){return"imperative"!==n}let cl=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=d,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Rs.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,g.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,g.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,g.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(hr),g.Y36(xd),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&g.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[g.TTD]}),n})(),Tf=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Rs.x,this.subscription=t.events.subscribe(u=>{u instanceof sl&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,g.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,g.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,g.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,d){return!!(0!==t||r||o||u||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(hr),g.Y36(xd),g.Y36(ge))},n.\u0275dir=g.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&g.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&g.uIk("target",r.target)("href",r.href,g.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[g.TTD]}),n})();class Cg{}let Tg=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(as(t=>t instanceof sl),Mu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,g.MMx)(u.providers,t,`Route: ${u.path}`));const d=u._injector??t,m=u._loadedInjector??d;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?o.push(this.preloadConfig(d,u)):(u.children||u._loadedRoutes)&&o.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,ln.D)(o).pipe((0,Ed.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):rt(null);const u=o.pipe((0,hn.z)(d=>null===d?rt(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));if(r.loadComponent&&!r._loadedComponent){const d=this.loader.loadComponent(r);return(0,ln.D)([u,d]).pipe((0,Ed.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(hr),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG(Cg),g.LFG(Eg))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ll=new g.OlP("");let Yw=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof cg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof sl&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof gb&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new gb(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function kd(n,e){return{\u0275kind:n,\u0275providers:e}}function dl(n){return[{provide:Ww,multi:!0,useValue:n}]}function zb(){const n=(0,g.f3M)(g.zs3);return e=>{const t=n.get(g.z2F);if(e!==t.components[0])return;const r=n.get(hr),o=n.get(Jw);1===n.get(Xw)&&r.initialNavigation(),n.get(pv,null,g.XFs.Optional)?.setUpPreloading(),n.get(ll,null,g.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.next(),o.complete()}}const Jw=new g.OlP("",{factory:()=>new Rs.x}),Xw=new g.OlP("",{providedIn:"root",factory:()=>1});const pv=new g.OlP("");function gv(n){return kd(0,[{provide:pv,useExisting:Tg},{provide:Cg,useExisting:n}])}const eI=new g.OlP("ROUTER_FORROOT_GUARD"),Zb=[Ae,{provide:Q0,useClass:ky},{provide:hr,useFactory:Cf},Nd,{provide:xd,useFactory:function Qw(n){return n.routerState.root},deps:[hr]},Eg];function Yb(){return new g.PXZ("Router",hr)}let tI=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Zb,[],dl(t),{provide:eI,useFactory:qS,deps:[[hr,new g.FiY,new g.tp0]]},{provide:Ig,useValue:r||{}},r?.useHash?{provide:ge,useClass:nt}:{provide:ge,useClass:Qe},{provide:ll,useFactory:()=>{const n=(0,g.f3M)(hr),e=(0,g.f3M)(Ba),t=(0,g.f3M)(Ig);return t.scrollOffset&&e.setOffset(t.scrollOffset),new Yw(n,e,t)}},r?.preloadingStrategy?gv(r.preloadingStrategy).\u0275providers:[],{provide:g.PXZ,multi:!0,useFactory:Yb},r?.initialNavigation?Af(r):[],[{provide:nI,useFactory:zb},{provide:g.tb,multi:!0,useExisting:nI}]]}}static forChild(t){return{ngModule:n,providers:[dl(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(eI,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[Dw]}),n})();function qS(n){return"guarded"}function Af(n){return["disabled"===n.initialNavigation?kd(3,[{provide:g.ip1,multi:!0,useFactory:()=>{const e=(0,g.f3M)(hr);return()=>{e.setUpLocationChangeListener()}}},{provide:Xw,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?kd(2,[{provide:Xw,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:e=>{const t=e.get(U,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const d=e.get(hr),m=e.get(Jw);(function o(u){e.get(hr).events.pipe(as(m=>m instanceof sl||m instanceof lg||m instanceof ow),(0,wt.U)(m=>m instanceof sl||m instanceof lg&&(0===m.code||1===m.code)&&null),as(m=>null!==m),Xc(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),d.afterPreactivation=()=>(u(!0),r||m.closed?rt(void 0):m),d.initialNavigation()}))}}]).\u0275providers:[]]}const nI=new g.OlP("");let Xb=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-admin"]],decls:8,vars:0,consts:[[1,"col-md-6","mt-5","ms-5"],[1,"h-100","p-5","bg-light","border","rounded-3"],["type","button","routerLink","/home",1,"btn","btn-outline-secondary"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"div",1)(2,"h2"),g._uU(3,"Admin Profile"),g.qZA(),g.TgZ(4,"p"),g._uU(5,"Swap the background-color utility and add a `.text-*` color utility to mix up the jumbotron look. Then, mix and match with additional component themes and more."),g.qZA(),g.TgZ(6,"button",2),g._uU(7,"Back to Home"),g.qZA()()())},dependencies:[cl]}),n})();var Po=k(6451),Uu=k(5363),ai=k(6063);class fl extends Rs.x{constructor(e=1/0,t=1/0,r=ai.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var Sg=k(3099);function ls(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,Sg.B)({connector:()=>new fl(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function xg(n,e){return(0,rf.m)(e)?rn(()=>n,e):rn(()=>n)}var Bu=k(9468),Yn=k(5813),ui=k(2011);k(5867);var ye=k(5861),gl=k(9681),Ud=k(4859),Xt=k(2090),$u=k(1877);const xf=new Map,Mg={activated:!1,tokenObservers:[]},mv={initialized:!1,enabled:!1};function Rr(n){return xf.get(n)||Mg}function Li(n,e){xf.set(n,e)}function Bd(){return mv}class aI{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new Xt.BH,yield function cC(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Xt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ci=new Xt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function wv(n){if(!Rr(n).activated)throw ci.create("use-before-activation",{appName:n.name})}function Ev(n,e){return Og.apply(this,arguments)}function Og(){return(Og=(0,ye.Z)(function*({url:n,body:e},t){var r,o;const u={"Content-Type":"application/json"},d=t.getImmediate({optional:!0});if(d){const Y=yield d.getHeartbeatsHeader();Y&&(u["X-Firebase-Client"]=Y)}const m={method:"POST",body:JSON.stringify(e),headers:u};let w,b;try{w=yield fetch(n,m)}catch(Y){throw ci.create("fetch-network-error",{originalErrorMessage:null===(r=Y)||void 0===r?void 0:r.message})}if(200!==w.status)throw ci.create("fetch-status-error",{httpStatus:w.status});try{b=yield w.json()}catch(Y){throw ci.create("fetch-parse-error",{originalErrorMessage:null===(o=Y)||void 0===o?void 0:o.message})}const S=b.ttl.match(/^([\d.]+)(s)$/);if(!S||!S[2]||isNaN(Number(S[1])))throw ci.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${b.ttl}`});const N=1e3*Number(S[1]),$=Date.now();return{token:b.token,expireTimeMillis:$+N,issuedAtTimeMillis:$}})).apply(this,arguments)}function lI(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const jd="firebase-app-check-store";let Rf=null;function Cv(){return Rf||(Rf=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=o=>{n(o.target.result)},r.onerror=o=>{var u;e(ci.create("storage-open",{originalErrorMessage:null===(u=o.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(jd,{keyPath:"compositeKey"})}}catch(r){e(ci.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Rf)}function ar(){return(ar=(0,ye.Z)(function*(n,e){const r=(yield Cv()).transaction(jd,"readwrite"),u=r.objectStore(jd).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=w=>{d()},r.onerror=w=>{var b;m(ci.create("storage-set",{originalErrorMessage:null===(b=w.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const $d=new $u.Yd("@firebase/app-check");function kg(n,e){return(0,Xt.hl)()?function lC(n,e){return function pI(n,e){return ar.apply(this,arguments)}(function gI(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{$d.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function mI(){return Bd().enabled}function xv(){return Mv.apply(this,arguments)}function Mv(){return(Mv=(0,ye.Z)(function*(){const n=Bd();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const YS={error:"UNKNOWN_ERROR"};function vI(n){return Xt.US.encodeString(JSON.stringify(n),!1)}function Gd(n){return Os.apply(this,arguments)}function Os(){return(Os=(0,ye.Z)(function*(n,e=!1){const t=n.app;wv(t);const r=Rr(t);let u,o=r.token;if(o&&!ml(o)&&(Li(t,Object.assign(Object.assign({},r),{token:void 0})),o=void 0),!o){const w=yield r.cachedTokenPromise;w&&(ml(w)?o=w:yield kg(t,void 0))}if(!e&&o&&ml(o))return{token:o.token};let m,d=!1;if(mI()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Ev(lI(t,yield xv()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),d=!0);const w=yield r.exchangeTokenPromise;return yield kg(t,w),Li(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),d=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?$d.warn(w.message):$d.error(w),u=w}return o?u?m=ml(o)?{token:o.token,internalError:u}:Ov(u):(m={token:o.token},Li(t,Object.assign(Object.assign({},r),{token:o})),yield kg(t,o)):m=Ov(u),d&&Ps(t,m),m})).apply(this,arguments)}function Nv(n,e){const t=Rr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Li(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function ao(n){const{app:e}=n,t=Rr(e);let r=t.tokenRefresher;r||(r=function uo(n){const{app:e}=n;return new aI((0,ye.Z)(function*(){let r;if(r=Rr(e).token?yield Gd(n,!0):yield Gd(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Rr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Li(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Ps(n,e){const t=Rr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function ml(n){return n.expireTimeMillis-Date.now()>0}function Ov(n){return{token:vI(YS),error:n}}class fC{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Rr(this.app);for(const t of e)Nv(this.app,t.next);return Promise.resolve()}}const bI="app-check-internal";!function DC(){(0,gl._registerComponent)(new Ud.wA("app-check",n=>function pC(n,e){return new fC(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(bI).initialize()})),(0,gl._registerComponent)(new Ud.wA(bI,n=>function gC(n){return{getToken:e=>Gd(n,e),addTokenListener:e=>function Rv(n,e,t,r){const{app:o}=n,u=Rr(o),d={next:t,error:r,type:e};if(Li(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&ml(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),ao(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>ao(n))}(n,"INTERNAL",e),removeTokenListener:e=>Nv(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,gl.registerVersion)("@firebase/app-check","0.5.16")}();class Hv{constructor(){return(0,Yn.vb)("app-check")}}typeof window<"u"&&window;var TI=k(127);const zv=new g.OlP("angularfire2.auth.use-emulator"),qv=new g.OlP("angularfire2.auth.settings"),Wv=new g.OlP("angularfire2.auth.tenant-id"),Kv=new g.OlP("angularfire2.auth.langugage-code"),Hu=new g.OlP("angularfire2.auth.use-device-language"),SI=new g.OlP("angularfire.auth.persistence"),xI=(n,e,t,r,o,u,d,m)=>(0,ui.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),d)for(const[b,S]of Object.entries(d))w.settings[b]=S;return m&&w.setPersistence(m),w},[t,r,o,u,d,m]);let Gu=(()=>{class n{constructor(t,r,o,u,d,m,w,b,S,N,$,Y){const oe=new Rs.x,Oe=rt(void 0).pipe((0,Uu.Q)(d.outsideAngular),rn(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,1277)))),(0,wt.U)(()=>(0,ui.on)(t,u,r)),(0,wt.U)(Pe=>xI(Pe,u,m,b,S,N,w,$)),ls({bufferSize:1,refCount:!1}));if(lr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=rt(null);else{Oe.pipe(Ia()).subscribe();const Tt=Oe.pipe(rn(Vt=>Vt.getRedirectResult().then(kt=>kt,()=>null)),Yn.iC,ls({bufferSize:1,refCount:!1})),Pt=Oe.pipe(rn(Vt=>new Ar.y(kt=>({unsubscribe:u.runOutsideAngular(()=>Vt.onAuthStateChanged(Ht=>kt.next(Ht),Ht=>kt.error(Ht),()=>kt.complete()))})))),Lt=Oe.pipe(rn(Vt=>new Ar.y(kt=>({unsubscribe:u.runOutsideAngular(()=>Vt.onIdTokenChanged(Ht=>kt.next(Ht),Ht=>kt.error(Ht),()=>kt.complete()))}))));this.authState=Tt.pipe(xg(Pt),(0,Bu.R)(d.outsideAngular),(0,Uu.Q)(d.insideAngular)),this.user=Tt.pipe(xg(Lt),(0,Bu.R)(d.outsideAngular),(0,Uu.Q)(d.insideAngular)),this.idToken=this.user.pipe(rn(Vt=>Vt?(0,ln.D)(Vt.getIdToken()):rt(null))),this.idTokenResult=this.user.pipe(rn(Vt=>Vt?(0,ln.D)(Vt.getIdTokenResult()):rt(null))),this.credential=(0,Po.T)(Tt,oe,this.authState.pipe(as(Vt=>!Vt))).pipe((0,wt.U)(Vt=>Vt?.user?Vt:null),(0,Bu.R)(d.outsideAngular),(0,Uu.Q)(d.insideAngular))}return(0,ui.pX)(this,Oe,u,{spy:{apply:(Pe,Tt,Pt)=>{(Pe.startsWith("signIn")||Pe.startsWith("createUser"))&&Pt.then(Lt=>oe.next(Lt))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ui.Dh),g.LFG(ui.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Yn.HU),g.LFG(zv,8),g.LFG(qv,8),g.LFG(Wv,8),g.LFG(Kv,8),g.LFG(Hu,8),g.LFG(SI,8),g.LFG(Hv,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),zu=(()=>{class n{constructor(t,r){this.afAuth=t,this.router=r,this.userId="",this.user=t.user}login(t,r){return this.afAuth.signInWithEmailAndPassword(t,r)}logout(){this.afAuth.signOut().then(()=>this.router.navigate(["/login"]))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Gu),g.LFG(hr))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function rx(n,e){1&n&&(g.TgZ(0,"button",6),g._uU(1,"Go To Admin Profile"),g.qZA())}let MI=(()=>{class n{constructor(t){this.as=t,this.isAdmin=!1}ngOnInit(){this.as.user.subscribe(t=>{this.isAdmin="admin@gmail.com"==t?.email})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(zu))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-home"]],decls:9,vars:1,consts:[[1,"p-5","mb-4","bg-light","rounded-3"],[1,"container-fluid","py-5"],[1,"display-5","fw-bold"],[1,"col-md-8","fs-4"],["class","btn btn-primary btn-lg me-5","routerLink","/admin","type","button",4,"ngIf"],["routerLink","/user","type","button",1,"btn","btn-primary","btn-lg"],["routerLink","/admin","type","button",1,"btn","btn-primary","btn-lg","me-5"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),g._uU(3,"Your Home Page"),g.qZA(),g.TgZ(4,"p",3),g._uU(5,"Using a series of utilities, you can create this jumbotron, just like the one in previous versions of Bootstrap. Check out the examples below for how you can remix and restyle it to your liking."),g.qZA(),g.YNc(6,rx,2,0,"button",4),g.TgZ(7,"button",5),g._uU(8,"Go To User Profile"),g.qZA()()()),2&t&&(g.xp6(6),g.Q6J("ngIf",r.isAdmin))},dependencies:[Pn,cl]}),n})(),RI=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-user"]],decls:8,vars:0,consts:[[1,"col-md-6","mt-5","ms-5"],[1,"h-100","p-5","text-bg-dark","rounded-3"],["type","button","routerLink","/home",1,"btn","btn-outline-light"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"div",1)(2,"h2"),g._uU(3,"User Profile"),g.qZA(),g.TgZ(4,"p"),g._uU(5,"Swap the background-color utility and add a `.text-*` color utility to mix up the jumbotron look. Then, mix and match with additional component themes and more."),g.qZA(),g.TgZ(6,"button",2),g._uU(7,"Back to Home"),g.qZA()()())},dependencies:[cl]}),n})(),ix=(()=>{class n{constructor(t,r){this.as=t,this.router=r}canActivate(t,r){return new Promise(o=>{this.as.user.subscribe(u=>{"admin@gmail.com"==u?.email?o(!0):this.router.navigate(["/home"]),o(!1)})})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(zu),g.LFG(hr))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mt=(()=>{class n{constructor(t,r){this.as=t,this.router=r}canActivate(t,r){return new Promise(o=>{this.as.user.subscribe(u=>{u?o(!0):this.router.navigate(["/login"]),o(!1)})})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(zu),g.LFG(hr))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function OC(n,e){1&n&&(g.TgZ(0,"div",7),g._uU(1,"*Email is required"),g.qZA())}function PC(n,e){1&n&&(g.TgZ(0,"div",7),g._uU(1,"*Password is required "),g.qZA())}function kC(n,e){if(1&n&&(g.TgZ(0,"div",7),g._uU(1),g.qZA()),2&n){const t=g.oxw();g.xp6(1),g.hij(" ",t.errorMessage,"")}}const FC=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"login",component:(()=>{class n{constructor(t,r,o){this.fb=t,this.auth=r,this.router=o,this.errorMessage=""}login(t){let r=t.value;this.auth.login(r.email,r.password).then(()=>this.router.navigate(["/home"])).catch(o=>this.errorMessage=o.message)}ngOnInit(){this.loginForm=this.fb.group({email:["",Oi.required],password:["",Oi.required]})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Cy),g.Y36(zu),g.Y36(hr))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-login"]],decls:11,vars:4,consts:[[1,"body"],[1,"text-center","mb-4"],[3,"formGroup","ngSubmit"],["formControlName","email","type","email","name","email","placeholder","Email","required","","email","",1,"form-control","mb-2"],["class","alert alert-danger",4,"ngIf"],["formControlName","password","type","password","name","password","placeholder","Password","required","",1,"form-control","mb-2"],["type","submit",1,"btn","btn-primary","w-100"],[1,"alert","alert-danger"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"h2",1),g._uU(2,"Login"),g.qZA(),g.TgZ(3,"form",2),g.NdJ("ngSubmit",function(){return r.login(r.loginForm)}),g._UZ(4,"input",3),g.YNc(5,OC,2,0,"div",4),g._UZ(6,"input",5),g.YNc(7,PC,2,0,"div",4),g.TgZ(8,"button",6),g._uU(9,"Login"),g.qZA()(),g.YNc(10,kC,2,1,"div",4),g.qZA()),2&t&&(g.xp6(3),g.Q6J("formGroup",r.loginForm),g.xp6(2),g.Q6J("ngIf",r.loginForm.controls.email.touched&&r.loginForm.hasError("required","email")),g.xp6(2),g.Q6J("ngIf",r.loginForm.controls.password.touched&&r.loginForm.hasError("required","password")),g.xp6(3),g.Q6J("ngIf",r.errorMessage))},dependencies:[Pn,ya,Vc,kp,Fp,h,A,ss,Mr],styles:[".body[_ngcontent-%COMP%]{margin:10% auto;width:30%}"]}),n})()},{path:"home",component:MI,canActivate:[mt]},{path:"admin",component:Xb,canActivate:[mt,ix]},{path:"user",component:RI,canActivate:[mt]}];let Fg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[tI.forRoot(FC),tI]}),n})();var Lg=k(4986);function Fn(){return(0,si.e)((n,e)=>{let t,r=!1;n.subscribe((0,yr.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function NI(n,e){return n===e}k(1277);var st,VC=k(3942),OI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ko={},Vg=Vg||{},St=OI||self;function Ug(){}function Bg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function xa(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Zv="closure_uid_"+(1e9*Math.random()>>>0),BC=0;function jg(n,e,t){return n.call.apply(n.bind,arguments)}function PI(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Kr(n,e,t){return(Kr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?jg:PI).apply(null,arguments)}function Lf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Zr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function ks(){this.s=this.s,this.o=this.o}ks.prototype.s=!1,ks.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function UC(n){Object.prototype.hasOwnProperty.call(n,Zv)&&n[Zv]||(n[Zv]=++BC)}(this)},ks.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const kI=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Yv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function FI(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Bg(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let d=0;d<u;d++)n[o+d]=r[d]}else n.push(r)}}function Yr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Yr.prototype.h=function(){this.defaultPrevented=!0};var LI=function(){if(!St.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{St.addEventListener("test",Ug,e),St.removeEventListener("test",Ug,e)}catch{}return n}();function Uf(n){return/^[\s\xa0]*$/.test(n)}var VI=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function $g(n,e){return n<e?-1:n>e?1:0}function Hg(){var n=St.navigator;return n&&(n=n.userAgent)?n:""}function Fo(n){return-1!=Hg().indexOf(n)}function UI(n){return UI[" "](n),n}UI[" "]=Ug;var qu,n,ax=Fo("Opera"),Bf=Fo("Trident")||Fo("MSIE"),Qv=Fo("Edge"),zd=Qv||Bf,BI=Fo("Gecko")&&!(-1!=Hg().toLowerCase().indexOf("webkit")&&!Fo("Edge"))&&!(Fo("Trident")||Fo("MSIE"))&&!Fo("Edge"),jC=-1!=Hg().toLowerCase().indexOf("webkit")&&!Fo("Edge");function Jv(){var n=St.document;return n?n.documentMode:void 0}e:{var Xv="",e_=(n=Hg(),BI?/rv:([^\);]+)(\)|;)/.exec(n):Qv?/Edge\/([\d\.]+)/.exec(n):Bf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):jC?/WebKit\/(\S+)/.exec(n):ax?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(e_&&(Xv=e_?e_[1]:""),Bf){var t_=Jv();if(null!=t_&&t_>parseFloat(Xv)){qu=String(t_);break e}}qu=Xv}var $C={};var GC=St.document&&Bf&&(Jv()||parseInt(qu,10))||void 0;function Ma(n,e){if(Yr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(BI){e:{try{UI(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:zC[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ma.X.h.call(this)}}Zr(Ma,Yr);var zC={2:"touch",3:"pen",4:"mouse"};Ma.prototype.h=function(){Ma.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var qd="closure_listenable_"+(1e6*Math.random()|0),qC=0;function $I(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++qC,this.ba=this.ea=!1}function zg(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function qg(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function HI(n){const e={};for(const t in n)e[t]=n[t];return e}const Wg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function GI(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<Wg.length;u++)t=Wg[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function jf(n){this.src=n,this.g={},this.h=0}function Kg(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=kI(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(zg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function n_(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return o}return-1}jf.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=n_(n,e,r,o);return-1<d?(e=n[d],t||(e.ea=!1)):((e=new $I(e,this.src,u,!!r,o)).ea=t,n.push(e)),e};var r_="closure_lm_"+(1e6*Math.random()|0),i_={};function Zg(n,e,t,r,o){if(r&&r.once)return WI(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Zg(n,e[u],t,r,o);return null}return t=u_(t),n&&n[qd]?n.N(e,t,xa(r)?!!r.capture:!!r,o):zI(n,e,t,!1,r,o)}function zI(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=xa(o)?!!o.capture:!!o,m=o_(n);if(m||(n[r_]=m=new jf(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function qI(){const e=WC;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)LI||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(ZI(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function WI(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)WI(n,e[u],t,r,o);return null}return t=u_(t),n&&n[qd]?n.O(e,t,xa(r)?!!r.capture:!!r,o):zI(n,e,t,!0,r,o)}function KI(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)KI(n,e[u],t,r,o);else r=xa(r)?!!r.capture:!!r,t=u_(t),n&&n[qd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=n_(u=n.g[e],t,r,o))&&(zg(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=o_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=n_(e,t,r,o)),(t=-1<n?e[n]:null)&&s_(t))}function s_(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[qd])Kg(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(ZI(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=o_(e))?(Kg(t,n),0==t.h&&(t.src=null,e[r_]=null)):zg(n)}}}function ZI(n){return n in i_?i_[n]:i_[n]="on"+n}function WC(n,e){if(n.ba)n=!0;else{e=new Ma(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&s_(n),n=t.call(r,e)}return n}function o_(n){return(n=n[r_])instanceof jf?n:null}var a_="__closure_events_fn_"+(1e9*Math.random()>>>0);function u_(n){return"function"==typeof n?n:(n[a_]||(n[a_]=function(e){return n.handleEvent(e)}),n[a_])}function vr(){ks.call(this),this.i=new jf(this),this.P=this,this.I=null}function Nr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Yr(e,n);else if(e instanceof Yr)e.target=e.target||n;else{var o=e;GI(e=new Yr(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=Yg(d,r,!0,e)&&o}if(o=Yg(d=e.g=n,r,!0,e)&&o,o=Yg(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Yg(d=e.g=t[u],r,!1,e)&&o}function Yg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ba&&d.capture==t){var m=d.listener,w=d.ha||d.src;d.ea&&Kg(n.i,d),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}Zr(vr,ks),vr.prototype[qd]=!0,vr.prototype.removeEventListener=function(n,e,t,r){KI(this,n,e,t,r)},vr.prototype.M=function(){if(vr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)zg(t[r]);delete n.g[e],n.h--}}this.I=null},vr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},vr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var c_=St.JSON.stringify;function YI(){var n=JI;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Jg,QI=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new ZC,n=>n.reset());class ZC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function l_(n){St.setTimeout(()=>{throw n},0)}function Qg(n,e){Jg||function d_(){var n=St.Promise.resolve(void 0);Jg=function(){n.then(f_)}}(),h_||(Jg(),h_=!0),JI.add(n,e)}var h_=!1,JI=new class KC{constructor(){this.h=this.g=null}add(e,t){const r=QI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function f_(){for(var n;n=YI();){try{n.h.call(n.g)}catch(t){l_(t)}var e=QI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}h_=!1}function Xg(n,e){vr.call(this),this.h=n||1,this.g=e||St,this.j=Kr(this.lb,this),this.l=Date.now()}function em(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Wu(n,e,t){if("function"==typeof n)t&&(n=Kr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Kr(n.handleEvent,n)}return 2147483647<Number(e)?-1:St.setTimeout(n,e||0)}function p_(n){n.g=Wu(()=>{n.g=null,n.i&&(n.i=!1,p_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Zr(Xg,vr),(st=Xg.prototype).ca=!1,st.R=null,st.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Nr(this,"tick"),this.ca&&(em(this),this.start()))}},st.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},st.M=function(){Xg.X.M.call(this),em(this),delete this.g};class YC extends ks{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:p_(this)}M(){super.M(),this.g&&(St.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tm(n){ks.call(this),this.h=n,this.g={}}Zr(tm,ks);var g_=[];function nm(n,e,t,r){Array.isArray(t)||(t&&(g_[0]=t.toString()),t=g_);for(var o=0;o<t.length;o++){var u=Zg(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function XI(n){qg(n.g,function(e,t){this.g.hasOwnProperty(t)&&s_(e)},n),n.g={}}function Wd(){this.g=!0}function Ku(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function nE(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return c_(t)}catch{return e}}(n,t)+(r?" "+r:"")})}tm.prototype.M=function(){tm.X.M.call(this),XI(this)},tm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wd.prototype.Aa=function(){this.g=!1},Wd.prototype.info=function(){};var Zu={},m_=null;function rm(){return m_=m_||new vr}function rE(n){Yr.call(this,Zu.Pa,n)}function $f(n){const e=rm();Nr(e,new rE(e))}function iE(n,e){Yr.call(this,Zu.STAT_EVENT,n),this.stat=e}function li(n){const e=rm();Nr(e,new iE(e,n))}function JC(n,e){Yr.call(this,Zu.Qa,n),this.size=e}function Kd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return St.setTimeout(function(){n()},e)}Zu.Pa="serverreachability",Zr(rE,Yr),Zu.STAT_EVENT="statevent",Zr(iE,Yr),Zu.Qa="timingevent",Zr(JC,Yr);var im={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},sE={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function oE(){}function aE(){}oE.prototype.h=null;var __,Hf={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function y_(){Yr.call(this,"d")}function v_(){Yr.call(this,"c")}function sm(){}function Gf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new tm(this),this.O=eT,this.T=new Xg(n=zd?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new uE}function uE(){this.i=null,this.g="",this.h=!1}Zr(y_,Yr),Zr(v_,Yr),Zr(sm,oE),sm.prototype.g=function(){return new XMLHttpRequest},sm.prototype.i=function(){return{}},__=new sm;var eT=45e3,w_={},om={};function I_(n,e,t){n.K=1,n.v=lm(co(e)),n.s=t,n.P=!0,Zd(n,null)}function Zd(n,e){n.F=Date.now(),Yd(n),n.A=co(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),sT(t.i,"t",r),n.C=0,t=n.l.H,n.h=new uE,n.g=V_(n.l,t?e:null,!n.s),0<n.N&&(n.L=new YC(Kr(n.La,n,n.g),n.N)),nm(n.S,n.g,"readystatechange",n.ib),e=n.H?HI(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),$f(),function QC(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),w=0;w<m.length;w++){var b=m[w].split("=");if(1<b.length){var S=b[0];b=b[1];var N=S.split("_");d=2<=N.length&&"type"==N[1]?d+(S+"=")+b+"&":d+(S+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.U,n.s)}function E_(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function D_(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=cE(n,t),o==om){4==e&&(n.o=4,li(14),r=!1),Ku(n.j,n.m,null,"[Incomplete Response]");break}if(o==w_){n.o=4,li(15),Ku(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ku(n.j,n.m,o,null),C_(n,o)}E_(n)&&o!=om&&o!=w_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,li(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Jf(e),e.K=!0,li(11))):(Ku(n.j,n.m,t,"[Invalid Chunked Response]"),Qd(n),zf(n))}function cE(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?om:(t=Number(e.substring(t,r)),isNaN(t)?w_:(r+=1)+t>e.length?om:(e=e.substr(r,t),n.C=r+t,e))}function Yd(n){n.V=Date.now()+n.O,b_(n,n.O)}function b_(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Kd(Kr(n.gb,n),e)}function am(n){n.B&&(St.clearTimeout(n.B),n.B=null)}function zf(n){0==n.l.G||n.I||uT(n.l,n)}function Qd(n){am(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,em(n.T),XI(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function C_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||S_(t.h,n)))if(!n.J&&S_(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;_m(t),wl(t)}vm(t),li(18)}}else t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=Kd(Kr(t.cb,t),6e3));if(1>=vE(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else El(t,11)}else if((n.J||t.g==n)&&_m(t),!Uf(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.T=b[0],b=b[1],2==t.G)if("c"==b[0]){t.I=b[1],t.ka=b[2];const S=b[3];null!=S&&(t.ma=S,t.j.info("VER="+t.ma));const N=b[4];null!=N&&(t.Ca=N,t.j.info("SVER="+t.Ca));const $=b[5];null!=$&&"number"==typeof $&&0<$&&(t.J=r=1.5*$,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const Y=n.g;if(Y){const oe=Y.g?Y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oe){var u=r.h;u.g||-1==oe.indexOf("spdy")&&-1==oe.indexOf("quic")&&-1==oe.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(x_(u,u.h),u.h=null))}if(r.D){const Oe=Y.g?Y.g.getResponseHeader("X-HTTP-Session-Id"):null;Oe&&(r.za=Oe,wn(r.F,r.D,Oe))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var d=n;if((r=t).sa=L_(r,r.H?r.ka:null,r.V),d.J){M_(r.h,d);var m=d,w=r.J;w&&m.setTimeout(w),m.B&&(am(m),Yd(m)),r.g=d}else xE(r);0<t.i.length&&F_(t)}else"stop"!=b[0]&&"close"!=b[0]||El(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?El(t,7):mm(t):"noop"!=b[0]&&t.l&&t.l.wa(b),t.A=0)}$f()}catch{}}function lE(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Bg(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function nT(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Bg(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function tT(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Bg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(st=Gf.prototype).setTimeout=function(n){this.O=n},st.ib=function(n){n=n.target;const e=this.L;e&&3==Lo(n)?e.l():this.La(n)},st.La=function(n){try{if(n==this.g)e:{const S=Lo(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>S)&&(3!=S||zd||this.g&&(this.h.h||this.g.fa()||CE(this.g)))){this.I||4!=S||7==e||$f(),am(this);var t=this.g.aa();this.Y=t;t:if(E_(this)){var r=CE(this.g);n="";var o=r.length,u=4==Lo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Qd(this),zf(this);var d="";break t}this.h.i=new St.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.fa();if(this.i=200==t,function eE(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.U,S,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Uf(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,li(12),Qd(this),zf(this);break e}Ku(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,C_(this,t)}this.P?(D_(this,S,d),zd&&this.i&&3==S&&(nm(this.S,this.T,"tick",this.hb),this.T.start())):(Ku(this.j,this.m,d,null),C_(this,d)),4==S&&Qd(this),this.i&&!this.I&&(4==S?uT(this.l,this):(this.i=!1,Yd(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,li(12)):(this.o=0,li(13)),Qd(this),zf(this)}}}catch{}},st.hb=function(){if(this.g){var n=Lo(this.g),e=this.g.fa();this.C<e.length&&(am(this),D_(this,n,e),this.i&&4!=n&&Yd(this))}},st.cancel=function(){this.I=!0,Qd(this)},st.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function tE(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&($f(),li(17)),Qd(this),this.o=2,zf(this)):b_(this,this.V-n)};var dE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yl(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof yl){this.h=void 0!==e?e:n.h,ds(this,n.j),this.s=n.s,this.g=n.g,um(this,n.m),this.l=n.l,e=n.i;var t=new vl;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),cm(this,t),this.o=n.o}else n&&(t=String(n).match(dE))?(this.h=!!e,ds(this,t[1]||"",!0),this.s=Wf(t[2]||""),this.g=Wf(t[3]||"",!0),um(this,t[4]),this.l=Wf(t[5]||"",!0),cm(this,t[6]||"",!0),this.o=Wf(t[7]||"")):(this.h=!!e,this.i=new vl(null,this.h))}function co(n){return new yl(n)}function ds(n,e,t){n.j=t?Wf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function um(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function cm(n,e,t){e instanceof vl?(n.i=e,function T_(n,e){e&&!n.j&&(Ra(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(pE(this,r),sT(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Kf(e,hE)),n.i=new vl(e,n.h))}function wn(n,e,t){n.i.set(e,t)}function lm(n){return wn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Wf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Kf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,dm),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function dm(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}yl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Kf(e,Zf,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Kf(e,Zf,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Kf(t,"/"==t.charAt(0)?iT:rT,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Kf(t,fE)),n.join("")};var Zf=/[#\/\?@]/g,rT=/[#\?:]/g,iT=/[#\?]/g,hE=/[#\?@]/g,fE=/#/g;function vl(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ra(n){n.g||(n.g=new Map,n.h=0,n.i&&function qf(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function pE(n,e){Ra(n),e=Yu(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function gE(n,e){return Ra(n),e=Yu(n,e),n.g.has(e)}function sT(n,e,t){pE(n,e),0<t.length&&(n.i=null,n.g.set(Yu(n,e),Yv(t)),n.h+=t.length)}function Yu(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function hm(n){this.l=n||A_,n=St.PerformanceNavigationTiming?0<(n=St.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(St.g&&St.g.Ga&&St.g.Ga()&&St.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(st=vl.prototype).add=function(n,e){Ra(this),this.i=null,n=Yu(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},st.forEach=function(n,e){Ra(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},st.oa=function(){Ra(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},st.W=function(n){Ra(this);let e=[];if("string"==typeof n)gE(this,n)&&(e=e.concat(this.g.get(Yu(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},st.set=function(n,e){return Ra(this),this.i=null,gE(this,n=Yu(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},st.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},st.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),d=this.W(r);for(r=0;r<d.length;r++){var o=u;""!==d[r]&&(o+="="+encodeURIComponent(String(d[r]))),n.push(o)}}return this.i=n.join("&")};var A_=10;function yE(n){return!!n.h||!!n.g&&n.g.size>=n.j}function vE(n){return n.h?1:n.g?n.g.size:0}function S_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function x_(n,e){n.g?n.g.add(e):n.h=e}function M_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function fm(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Yv(n.i)}function pm(){}function oT(){this.g=new pm}function _E(n,e,t){const r=t||"";try{lE(n,function(o,u){let d=o;xa(o)&&(d=c_(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function gm(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function Jd(n){this.l=n.ac||null,this.j=n.jb||!1}function Yf(n,e){vr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=R_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}hm.prototype.cancel=function(){if(this.i=fm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},pm.prototype.stringify=function(n){return St.JSON.stringify(n,void 0)},pm.prototype.parse=function(n){return St.JSON.parse(n,void 0)},Zr(Jd,oE),Jd.prototype.g=function(){return new Yf(this.l,this.j)},Jd.prototype.i=function(n){return function(){return n}}({}),Zr(Yf,vr);var R_=0;function N_(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Qf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,_r(n)}function _r(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(st=Yf.prototype).open=function(n,e){if(this.readyState!=R_)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,_r(this)},st.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||St).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},st.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Qf(this)),this.readyState=R_},st.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,_r(this)),this.g&&(this.readyState=3,_r(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof St.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;N_(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},st.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Qf(this):_r(this),3==this.readyState&&N_(this)}},st.Va=function(n){this.g&&(this.response=this.responseText=n,Qf(this))},st.Ua=function(n){this.g&&(this.response=n,Qf(this))},st.ga=function(){this.g&&Qf(this)},st.setRequestHeader=function(n,e){this.v.append(n,e)},st.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},st.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Yf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Xd=St.JSON.parse;function Qn(n){vr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=IE,this.K=this.L=!1}Zr(Qn,vr);var IE="",ux=/^https?$/i,cx=["POST","PUT"];function O_(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,eh(n),th(n)}function eh(n){n.D||(n.D=!0,Nr(n,"complete"),Nr(n,"error"))}function DE(n){if(n.h&&typeof Vg<"u"&&(!n.C[1]||4!=Lo(n)||2!=n.aa()))if(n.v&&4==Lo(n))Wu(n.Ha,0,n);else if(Nr(n,"readystatechange"),4==Lo(n)){n.h=!1;try{const m=n.aa();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(dE)[1]||null;if(!o&&St.self&&St.self.location){var u=St.self.location.protocol;o=u.substr(0,u.length-1)}r=!ux.test(o?o.toLowerCase():"")}t=r}if(t)Nr(n,"complete"),Nr(n,"success");else{n.m=6;try{var d=2<Lo(n)?n.g.statusText:""}catch{d=""}n.j=d+" ["+n.aa()+"]",eh(n)}}finally{th(n)}}}function th(n,e){if(n.g){bE(n);const t=n.g,r=n.C[0]?Ug:null;n.g=null,n.C=null,e||Nr(n,"ready");try{t.onreadystatechange=r}catch{}}}function bE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(St.clearTimeout(n.A),n.A=null)}function Lo(n){return n.g?n.g.readyState:0}function CE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case IE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function TE(n){let e="";return qg(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function P_(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=TE(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):wn(n,e,t))}function _l(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function k_(n){this.Ca=0,this.i=[],this.j=new Wd,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=_l("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=_l("baseRetryDelayMs",5e3,n),this.bb=_l("retryDelaySeedMs",1e4,n),this.$a=_l("forwardChannelMaxRetries",2,n),this.ta=_l("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new hm(n&&n.concurrentRequestLimit),this.Fa=new oT,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function mm(n){if(ym(n),3==n.G){var e=n.U++,t=co(n.F);wn(t,"SID",n.I),wn(t,"RID",e),wn(t,"TYPE","terminate"),nh(n,t),(e=new Gf(n,n.j,e,void 0)).K=2,e.v=lm(co(t)),t=!1,St.navigator&&St.navigator.sendBeacon&&(t=St.navigator.sendBeacon(e.v.toString(),"")),!t&&St.Image&&((new Image).src=e.v,t=!0),t||(e.g=V_(e.l,null),e.g.da(e.v)),e.F=Date.now(),Yd(e)}RE(n)}function wl(n){n.g&&(Jf(n),n.g.cancel(),n.g=null)}function ym(n){wl(n),n.u&&(St.clearTimeout(n.u),n.u=null),_m(n),n.h.cancel(),n.m&&("number"==typeof n.m&&St.clearTimeout(n.m),n.m=null)}function F_(n){yE(n.h)||n.m||(n.m=!0,Qg(n.Ja,n),n.C=0)}function SE(n,e){var t;t=e?e.m:n.U++;const r=co(n.F);wn(r,"SID",n.I),wn(r,"RID",t),wn(r,"AID",n.T),nh(n,r),n.o&&n.s&&P_(r,n.o,n.s),t=new Gf(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Il(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),x_(n.h,t),I_(t,r,e)}function nh(n,e){n.ia&&qg(n.ia,function(t,r){wn(e,r,t)}),n.l&&lE({},function(t,r){wn(e,r,t)})}function Il(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Kr(n.l.Ra,n.l,n):null;e:{var o=n.i;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let b=o[w].h;const S=o[w].g;if(b-=u,0>b)u=Math.max(0,o[w].h-100),m=!1;else try{_E(S,d,"req"+b+"_")}catch{r&&r(S)}}if(m){r=d.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function xE(n){n.g||n.u||(n.Z=1,Qg(n.Ia,n),n.A=0)}function vm(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Kd(Kr(n.Ia,n),ME(n,n.A)),n.A++,0))}function Jf(n){null!=n.B&&(St.clearTimeout(n.B),n.B=null)}function aT(n){n.g=new Gf(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=co(n.sa);wn(e,"RID","rpc"),wn(e,"SID",n.I),wn(e,"CI",n.L?"0":"1"),wn(e,"AID",n.T),wn(e,"TYPE","xmlhttp"),nh(n,e),n.o&&n.s&&P_(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=lm(co(e)),t.s=null,t.P=!0,Zd(t,n)}function _m(n){null!=n.v&&(St.clearTimeout(n.v),n.v=null)}function uT(n,e){var t=null;if(n.g==e){_m(n),Jf(n),n.g=null;var r=2}else{if(!S_(n.h,e))return;t=e.D,M_(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Nr(r=rm(),new JC(r,t)),F_(n)}else xE(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function AE(n,e){return!(vE(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Kd(Kr(n.Ja,n,e),ME(n,n.C)),n.C++,0)))}(n,e)||2==r&&vm(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:El(n,5);break;case 4:El(n,10);break;case 3:El(n,6);break;default:El(n,2)}}function ME(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function El(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Kr(n.kb,n);t||(t=new yl("//www.google.com/images/cleardot.gif"),St.location&&"http"==St.location.protocol||ds(t,"https"),lm(t)),function wE(n,e){const t=new Wd;if(St.Image){const r=new Image;r.onload=Lf(gm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Lf(gm,t,r,"TestLoadImage: error",!1,e),r.onabort=Lf(gm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Lf(gm,t,r,"TestLoadImage: timeout",!1,e),St.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else li(2);n.G=0,n.l&&n.l.va(e),RE(n),ym(n)}function RE(n){if(n.G=0,n.la=[],n.l){const e=fm(n.h);(0!=e.length||0!=n.i.length)&&(FI(n.la,e),FI(n.la,n.i),n.h.i.length=0,Yv(n.i),n.i.length=0),n.l.ua()}}function L_(n,e,t){var r=t instanceof yl?co(t):new yl(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),um(r,r.m);else{var o=St.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new yl(null,void 0);r&&ds(u,r),e&&(u.g=e),o&&um(u,o),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&wn(r,t,e),wn(r,"VER",n.ma),nh(n,r),r}function V_(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Qn(t&&n.Da&&!n.ra?new Jd({jb:!0}):n.ra)).Ka(n.H),e}function NE(){}function Xf(){if(Bf&&!(10<=Number(GC)))throw Error("Environmental error: no available transport.")}function Vi(n,e){vr.call(this),this.g=new k_(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Uf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Uf(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Dl(this)}function OE(n){y_.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function PE(){v_.call(this),this.status=1}function Dl(n){this.g=n}(st=Qn.prototype).Ka=function(n){this.L=n},st.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():__.g(),this.C=function XC(n){return n.h||(n.h=n.i())}(this.u?this.u:__),this.g.onreadystatechange=Kr(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void O_(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=St.FormData&&n instanceof St.FormData,!(0<=kI(cx,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,d]of t)this.g.setRequestHeader(u,d);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{bE(this),0<this.B&&((this.K=function EE(n){return Bf&&function HC(){return function ox(n){var e=$C;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=VI(String(qu)).split("."),t=VI("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=$g(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||$g(0==o[2].length,0==u[2].length)||$g(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Kr(this.qa,this)):this.A=Wu(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){O_(this,u)}},st.qa=function(){typeof Vg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Nr(this,"timeout"),this.abort(8))},st.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Nr(this,"complete"),Nr(this,"abort"),th(this))},st.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),th(this,!0)),Qn.X.M.call(this)},st.Ha=function(){this.s||(this.F||this.v||this.l?DE(this):this.fb())},st.fb=function(){DE(this)},st.aa=function(){try{return 2<Lo(this)?this.g.status:-1}catch{return-1}},st.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},st.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Xd(e)}},st.Ea=function(){return this.m},st.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(st=k_.prototype).ma=8,st.G=1,st.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new Gf(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=HI(u),GI(u,this.S)):u=this.S),null!==this.o||this.N||(o.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Il(this,o,e),wn(t=co(this.F),"RID",n),wn(t,"CVER",22),this.D&&wn(t,"X-HTTP-Session-Id",this.D),nh(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(TE(u)))+"&"+e:this.o&&P_(t,this.o,u)),x_(this.h,o),this.Ya&&wn(t,"TYPE","init"),this.O?(wn(t,"$req",e),wn(t,"SID","null"),o.Z=!0,I_(o,t,null)):I_(o,t,e),this.G=2}}else 3==this.G&&(n?SE(this,n):0==this.i.length||yE(this.h)||SE(this))},st.Ia=function(){if(this.u=null,aT(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Kd(Kr(this.eb,this),n)}},st.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,li(10),wl(this),aT(this))},st.cb=function(){null!=this.v&&(this.v=null,wl(this),vm(this),li(19))},st.kb=function(n){n?(this.j.info("Successfully pinged google.com"),li(2)):(this.j.info("Failed to ping google.com"),li(1))},(st=NE.prototype).xa=function(){},st.wa=function(){},st.va=function(){},st.ua=function(){},st.Ra=function(){},Xf.prototype.g=function(n,e){return new Vi(n,e)},Zr(Vi,vr),Vi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;li(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=L_(n,null,n.V),F_(n)},Vi.prototype.close=function(){mm(this.g)},Vi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=c_(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&F_(e)},Vi.prototype.M=function(){this.g.l=null,delete this.j,mm(this.g),delete this.g,Vi.X.M.call(this)},Zr(OE,y_),Zr(PE,v_),Zr(Dl,NE),Dl.prototype.xa=function(){Nr(this.g,"a")},Dl.prototype.wa=function(n){Nr(this.g,new OE(n))},Dl.prototype.va=function(n){Nr(this.g,new PE)},Dl.prototype.ua=function(){Nr(this.g,"b")},Xf.prototype.createWebChannel=Xf.prototype.g,Vi.prototype.send=Vi.prototype.u,Vi.prototype.open=Vi.prototype.m,Vi.prototype.close=Vi.prototype.close,im.NO_ERROR=0,im.TIMEOUT=8,im.HTTP_ERROR=6,sE.COMPLETE="complete",aE.EventType=Hf,Hf.OPEN="a",Hf.CLOSE="b",Hf.ERROR="c",Hf.MESSAGE="d",vr.prototype.listen=vr.prototype.N,Qn.prototype.listenOnce=Qn.prototype.O,Qn.prototype.getLastError=Qn.prototype.Oa,Qn.prototype.getLastErrorCode=Qn.prototype.Ea,Qn.prototype.getStatus=Qn.prototype.aa,Qn.prototype.getResponseJson=Qn.prototype.Sa,Qn.prototype.getResponseText=Qn.prototype.fa,Qn.prototype.send=Qn.prototype.da,Qn.prototype.setWithCredentials=Qn.prototype.Ka;var cT=ko.createWebChannelTransport=function(){return new Xf},kE=ko.getStatEventTarget=function(){return rm()},wm=ko.ErrorCode=im,FE=ko.EventType=sE,LE=ko.Event=Zu,VE=ko.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},lT=ko.FetchXmlHttpFactory=Jd,U_=ko.WebChannel=aE,UE=ko.XhrIo=Qn;const dT="@firebase/firestore";class Qr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qr.UNAUTHENTICATED=new Qr(null),Qr.GOOGLE_CREDENTIALS=new Qr("google-credentials-uid"),Qr.FIRST_PARTY=new Qr("first-party-uid"),Qr.MOCK_USER=new Qr("mock-user");let ep="9.13.0";const bl=new $u.Yd("@firebase/firestore");function BE(){return bl.logLevel}function Ne(n,...e){if(bl.logLevel<=$u.in.DEBUG){const t=e.map(jE);bl.debug(`Firestore (${ep}): ${n}`,...t)}}function fr(n,...e){if(bl.logLevel<=$u.in.ERROR){const t=e.map(jE);bl.error(`Firestore (${ep}): ${n}`,...t)}}function Vo(n,...e){if(bl.logLevel<=$u.in.WARN){const t=e.map(jE);bl.warn(`Firestore (${ep}): ${n}`,...t)}}function jE(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function tt(n="Unexpected state"){const e=`FIRESTORE (${ep}) INTERNAL ASSERTION FAILED: `+n;throw fr(e),new Error(e)}function vt(n,e){n||tt()}function qe(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Xt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class pr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class HE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Qr.UNAUTHENTICATED))}shutdown(){}}class dx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class hx{constructor(e){this.t=e,this.currentUser=Qr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let d=new pr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new pr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const b=d;e.enqueueRetryable((0,ye.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},w=b=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>w(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?w(b):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new pr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(vt("string"==typeof r.accessToken),new HE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return vt(null===e||"string"==typeof e),new Qr(e)}}class hT{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=Qr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(vt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class fT{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new hT(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Qr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pT{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.A;return this.A=u.token,Ne("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(vt("string"==typeof t.token),this.A=t.token,new tp(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function fx(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class gT{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=fx(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function xt(n,e){return n<e?-1:n>e?1:0}function rh(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function zE(n){return n+"\0"}class jn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return jn.fromMillis(Date.now())}static fromDate(e){return jn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new jn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xt(this.nanoseconds,e.nanoseconds):xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new jn(0,0))}static max(){return new Dt(new jn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ih{constructor(e,t,r){void 0===t?t=0:t>e.length&&tt(),void 0===r?r=e.length-t:r>e.length-t&&tt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ih.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ih?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Yt extends ih{construct(e,t,r){return new Yt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Yt(t)}static emptyPath(){return new Yt([])}}const px=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sn extends ih{construct(e,t,r){return new sn(e,t,r)}static isValidIdentifier(e){return px.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new sn(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new xe(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new xe(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new xe(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new xe(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sn(t)}static emptyPath(){return new sn([])}}class ze{constructor(e){this.path=e}static fromPath(e){return new ze(Yt.fromString(e))}static fromName(e){return new ze(Yt.fromString(e).popFirst(5))}static empty(){return new ze(Yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Yt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new Yt(e.slice()))}}class sh{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function B_(n){return n.fields.find(e=>2===e.kind)}function Or(n){return n.fields.filter(e=>2!==e.kind)}sh.UNKNOWN_ID=-1;class oh{constructor(e,t){this.fieldPath=e,this.kind=t}}class np{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new np(0,Ui.min())}}function Im(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Dt.fromTimestamp(1e9===r?new jn(t+1,0):new jn(t,r));return new Ui(o,ze.empty(),e)}function j_(n){return new Ui(n.readTime,n.key,-1)}class Ui{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ui(Dt.min(),ze.empty(),-1)}static max(){return new Ui(Dt.max(),ze.empty(),-1)}}function $_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ze.comparator(n.documentKey,e.documentKey),0!==t?t:xt(n.largestBatchId,e.largestBatchId))}const H_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class G_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Qu(n){return Em.apply(this,arguments)}function Em(){return Em=(0,ye.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==H_)throw n;Ne("LocalStore","Unexpectedly lost primary lease")}),Em.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},w=>r(w))}),d=!0,u===o&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(o=>o?se.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new se((r,o)=>{const u=e.length,d=new Array(u);let m=0;for(let w=0;w<u;w++){const b=w;t(e[b]).next(S=>{d[b]=S,++m,m===u&&r(d)},S=>o(S))}})}static doWhile(e,t){return new se((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class ah{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new pr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Cl(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=z_(r.target.error);this.P.reject(new Cl(e,o))}}static open(e,t,r,o){try{return new ah(t,e.transaction(o,r))}catch(u){throw new Cl(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new vT(t)}}class Pr{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Pr.D((0,Xt.z$)())&&fr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ne("SimpleDb","Removing database:",e),uh(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Xt.hl)())return!1;if(Pr.N())return!0;const e=(0,Xt.z$)(),t=Pr.D(e),r=0<t&&t<10,o=Pr.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Ne("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new Cl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new xe(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new xe(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Cl(e,m))},u.onupgradeneeded=d=>{Ne("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.S.$(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Ne("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,ye.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.F(e);const w=ah.open(u.db,e,d?"readonly":"readwrite",r),b=o(w).next(S=>(w.V(),S)).catch(S=>(w.abort(S),se.reject(S))).toPromise();return b.catch(()=>{}),yield w.v,b}catch(w){const b=w,S="FirebaseError"!==b.name&&m<3;if(Ne("SimpleDb","Transaction failed with error:",b.message,"Retrying:",S),u.close(),!S)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class qE{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return uh(this.U.delete())}}class Cl extends xe{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function di(n){return"IndexedDbTransactionError"===n.name}class vT{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ne("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),uh(r)}add(e){return Ne("SimpleDb","ADD",this.store.name,e,e),uh(this.store.add(e))}get(e){return uh(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ne("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ne("SimpleDb","DELETE",this.store.name,e),uh(this.store.delete(e))}count(){return Ne("SimpleDb","COUNT",this.store.name),uh(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(d,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new se((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new se((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Y(e,t){Ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,(u,d,m)=>m.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new se((r,o)=>{t.onerror=u=>{const d=z_(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}H(e,t){const r=[];return new se((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const w=new qE(m),b=t(m.primaryKey,m.value,w);if(b instanceof se){const S=b.catch(N=>(w.done(),se.reject(N)));r.push(S)}w.isDone?o():null===w.G?m.continue():m.continue(w.G)}}).next(()=>se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function uh(n){return new se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=z_(r.target.error);t(o)}})}let WE=!1;function z_(n){const e=Pr.D((0,Xt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return WE||(WE=!0,setTimeout(()=>{throw r},0)),r}}return n}class _T{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ne("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ye.Z)(function*(){t.task=null;try{Ne("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){di(r)?Ne("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Qu(r)}yield t.nt(6e4)}))}}class wT{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ye.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return se.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Ne("IndexBackiller",`Processing collection: ${d}`),this.rt(e,d,o).next(m=>{o-=m,r.add(d)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const d=u.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.ot(o,u)).next(m=>(Ne("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>d.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const d=j_(u);$_(d,r)>0&&(r=d)}),new Ui(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class bi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function IT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ju(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function KE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}bi.at=-1;class $n{constructor(e,t){this.comparator=e,this.root=t||wr.EMPTY}insert(e,t){return new $n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,wr.BLACK,null,null))}remove(e){return new $n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new q_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new q_(this.root,e,this.comparator,!1)}getReverseIterator(){return new q_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new q_(this.root,e,this.comparator,!0)}}class q_{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??wr.RED,this.left=o??wr.EMPTY,this.right=u??wr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new wr(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return wr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return wr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();const e=this.left.check();if(e!==this.right.check())throw tt();return e+(this.isRed()?0:1)}}wr.EMPTY=null,wr.RED=!0,wr.BLACK=!1,wr.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new wr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mn{constructor(e){this.comparator=e,this.data=new $n(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new W_(this.data.getIterator())}getIteratorFrom(e){return new W_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof mn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new mn(this.comparator);return t.data=e,t}}class W_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Tl(n){return n.hasNext()?n.getNext():void 0}class Bi{constructor(e){this.fields=e,e.sort(sn.comparator)}static empty(){return new Bi([])}unionWith(e){let t=new mn(sn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Bi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Jn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Jn(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Jn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jn.EMPTY_BYTE_STRING=new Jn("");const Dm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Na(n){if(vt(!!n),"string"==typeof n){let e=0;const t=Dm.exec(n);if(vt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xn(n.seconds),nanos:Xn(n.nanos)}}function Xn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Xu(n){return"string"==typeof n?Jn.fromBase64String(n):Jn.fromUint8Array(n)}function bm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function YE(n){const e=n.mapValue.fields.__previous_value__;return bm(e)?YE(e):e}function rp(n){const e=Na(n.mapValue.fields.__local_write_time__.timestampValue);return new jn(e.seconds,e.nanos)}class gx{constructor(e,t,r,o,u,d,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class Al{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Al("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Al&&e.projectId===this.projectId&&e.database===this.database}}function ch(n){return null==n}function ip(n){return 0===n&&1/n==-1/0}function QE(n){return"number"==typeof n&&Number.isInteger(n)&&!ip(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const ec={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},K_={nullValue:"NULL_VALUE"};function lh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?bm(n)?4:Sm(n)?9007199254740991:10:tt()}function Oa(n,e){if(n===e)return!0;const t=lh(n);if(t!==lh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return rp(n).isEqual(rp(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Na(r.timestampValue),d=Na(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Xu(n.bytesValue).isEqual(Xu(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Xn(r.geoPointValue.latitude)===Xn(o.geoPointValue.latitude)&&Xn(r.geoPointValue.longitude)===Xn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Xn(r.integerValue)===Xn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Xn(r.doubleValue),d=Xn(o.doubleValue);return u===d?ip(u)===ip(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return rh(n.arrayValue.values||[],e.arrayValue.values||[],Oa);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(IT(u)!==IT(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!Oa(u[m],d[m])))return!1;return!0}(n,e);default:return tt()}var o}function Cm(n,e){return void 0!==(n.values||[]).find(t=>Oa(t,e))}function Sl(n,e){if(n===e)return 0;const t=lh(n),r=lh(e);if(t!==r)return xt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return xt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=Xn(o.integerValue||o.doubleValue),m=Xn(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return JE(n.timestampValue,e.timestampValue);case 4:return JE(rp(n),rp(e));case 5:return xt(n.stringValue,e.stringValue);case 6:return function(o,u){const d=Xu(o),m=Xu(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let w=0;w<d.length&&w<m.length;w++){const b=xt(d[w],m[w]);if(0!==b)return b}return xt(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=xt(Xn(o.latitude),Xn(u.latitude));return 0!==d?d:xt(Xn(o.longitude),Xn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let w=0;w<d.length&&w<m.length;++w){const b=Sl(d[w],m[w]);if(b)return b}return xt(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===ec.mapValue&&u===ec.mapValue)return 0;if(o===ec.mapValue)return 1;if(u===ec.mapValue)return-1;const d=o.fields||{},m=Object.keys(d),w=u.fields||{},b=Object.keys(w);m.sort(),b.sort();for(let S=0;S<m.length&&S<b.length;++S){const N=xt(m[S],b[S]);if(0!==N)return N;const $=Sl(d[m[S]],w[b[S]]);if(0!==$)return $}return xt(m.length,b.length)}(n.mapValue,e.mapValue);default:throw tt()}}function JE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return xt(n,e);const t=Na(n),r=Na(e),o=xt(t.seconds,r.seconds);return 0!==o?o:xt(t.nanos,r.nanos)}function Pa(n){return Z_(n)}function Z_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Na(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Xu(n.bytesValue).toBase64():"referenceValue"in n?ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=Z_(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${Z_(r.fields[m])}`;return u+"}"}(n.mapValue):tt();var e}function xl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Tm(n){return!!n&&"integerValue"in n}function lo(n){return!!n&&"arrayValue"in n}function Y_(n){return!!n&&"nullValue"in n}function Am(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function dh(n){return!!n&&"mapValue"in n}function sp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ju(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=sp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Sm(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Q_(n){return"nullValue"in n?K_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?xl(Al.empty(),ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:tt()}function xm(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?xl(Al.empty(),ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ec:tt()}function ET(n,e){const t=Sl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function DT(n,e){const t=Sl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class hi{constructor(e){this.value=e}static empty(){return new hi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!dh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sp(t)}setAll(e){let t=sn.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=sp(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());dh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Oa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];dh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Ju(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new hi(sp(this.value))}}function bT(n){const e=[];return Ju(n.fields,(t,r)=>{const o=new sn([t]);if(dh(r)){const u=bT(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new Bi(e)}class bn{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new bn(e,0,Dt.min(),Dt.min(),hi.empty(),0)}static newFoundDocument(e,t,r){return new bn(e,1,t,Dt.min(),r,0)}static newNoDocument(e,t){return new bn(e,2,t,Dt.min(),hi.empty(),0)}static newUnknownDocument(e,t){return new bn(e,3,t,Dt.min(),hi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class CT{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.ht=null}}function XE(n,e=null,t=[],r=[],o=null,u=null,d=null){return new CT(n,e,t,r,o,u,d)}function Ml(n){const e=qe(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Pa(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),ch(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Pa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Pa(r)).join(",")),e.ht=t}return e.ht}function hh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!xT(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Oa(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!RT(n.startAt,e.startAt)&&RT(n.endAt,e.endAt)}function op(n){return ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ap(n,e){return n.filters.filter(t=>t instanceof kr&&t.field.isEqual(e))}function eD(n,e,t){let r=K_,o=!0;for(const u of ap(n,e)){let d=K_,m=!0;switch(u.op){case"<":case"<=":d=Q_(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=K_}ET({value:r,inclusive:o},{value:d,inclusive:m})<0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];ET({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function tD(n,e,t){let r=ec,o=!0;for(const u of ap(n,e)){let d=ec,m=!0;switch(u.op){case">=":case">":d=xm(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=ec}DT({value:r,inclusive:o},{value:d,inclusive:m})>0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];DT({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class kr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new J_(e,t,r):"array-contains"===t?new AT(e,r):"in"===t?new ST(e,r):"not-in"===t?new yx(e,r):"array-contains-any"===t?new vx(e,r):new kr(e,t,r)}static lt(e,t,r){return"in"===t?new mx(e,r):new nD(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Sl(t,this.value)):null!==t&&lh(this.value)===lh(t)&&this.ft(Sl(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class J_ extends kr{constructor(e,t,r){super(e,t,r),this.key=ze.fromName(r.referenceValue)}matches(e){const t=ze.comparator(e.key,this.key);return this.ft(t)}}class mx extends kr{constructor(e,t){super(e,"in",t),this.keys=Mm(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class nD extends kr{constructor(e,t){super(e,"not-in",t),this.keys=Mm(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Mm(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ze.fromName(r.referenceValue))}class AT extends kr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return lo(t)&&Cm(t.arrayValue,this.value)}}class ST extends kr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Cm(this.value.arrayValue,t)}}class yx extends kr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Cm(this.value.arrayValue,t)}}class vx extends kr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!lo(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Cm(this.value.arrayValue,r))}}class tc{constructor(e,t){this.position=e,this.inclusive=t}}class fh{constructor(e,t="asc"){this.field=e,this.dir=t}}function xT(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function MT(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?ze.comparator(ze.fromName(d.referenceValue),t.key):Sl(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function RT(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Oa(n.position[t],e.position[t]))return!1;return!0}class nc{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=w,this._t=null,this.wt=null}}function NT(n,e,t,r,o,u,d,m){return new nc(n,e,t,r,o,u,d,m)}function up(n){return new nc(n)}function rD(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function iD(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function sD(n){for(const e of n.filters)if(e.dt())return e.field;return null}function oD(n){return null!==n.collectionGroup}function cp(n){const e=qe(n);if(null===e._t){e._t=[];const t=sD(e),r=iD(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new fh(t)),e._t.push(new fh(sn.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new fh(sn.keyField(),u))}}}return e._t}function ji(n){const e=qe(n);if(!e.wt)if("F"===e.limitType)e.wt=XE(e.path,e.collectionGroup,cp(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of cp(e))t.push(new fh(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new tc(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new tc(e.startAt.position,e.startAt.inclusive):null;e.wt=XE(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.wt}function X_(n,e,t){return new nc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function i(n,e){return hh(ji(n),ji(e))&&n.limitType===e.limitType}function s(n){return`${Ml(ji(n))}|lt:${n.limitType}`}function a(n){return`Query(target=${function TT(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Pa(r.value)}`;var r}).join(", ")}]`),ch(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Pa(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Pa(t)).join(",")),`Target(${e})`}(ji(n))}; limitType=${n.limitType})`}function c(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):ze.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const m=MT(o,u,d);return o.inclusive?m<=0:m<0}(t.startAt,cp(t),r)||t.endAt&&!function(o,u,d){const m=MT(o,u,d);return o.inclusive?m>=0:m>0}(t.endAt,cp(t),r)));var t,r}function l(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function f(n){return(e,t)=>{let r=!1;for(const o of cp(n)){const u=v(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function v(n,e,t){const r=n.field.isKeyField()?ze.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),w=d.data.field(o);return null!==m&&null!==w?Sl(m,w):tt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt()}}function I(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ip(e)?"-0":e}}function E(n){return{integerValue:""+n}}function T(n,e){return QE(e)?E(e):I(n,e)}class M{constructor(){this._=void 0}}function P(n,e,t){return n instanceof me?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Me?Ge(n,e):n instanceof Ye?pt(n,e):function(r,o){const u=X(r,o),d=It(u)+It(r.yt);return Tm(u)&&Tm(r.yt)?E(d):I(r.It,d)}(n,e)}function H(n,e,t){return n instanceof Me?Ge(n,e):n instanceof Ye?pt(n,e):t}function X(n,e){return n instanceof De?Tm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class me extends M{}class Me extends M{constructor(e){super(),this.elements=e}}function Ge(n,e){const t=on(e);for(const r of n.elements)t.some(o=>Oa(o,r))||t.push(r);return{arrayValue:{values:t}}}class Ye extends M{constructor(e){super(),this.elements=e}}function pt(n,e){let t=on(e);for(const r of n.elements)t=t.filter(o=>!Oa(o,r));return{arrayValue:{values:t}}}class De extends M{constructor(e,t){super(),this.It=e,this.yt=t}}function It(n){return Xn(n.integerValue||n.doubleValue)}function on(n){return lo(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class In{constructor(e,t){this.field=e,this.transform=t}}class e0{constructor(e,t){this.version=e,this.transformResults=t}}class Tn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Tn}static exists(e){return new Tn(void 0,e)}static updateTime(e){return new Tn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ph(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class gh{}function Rm(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Pm(n.key,Tn.none()):new Om(n.key,n.data,Tn.none());{const t=n.data,r=hi.empty();let o=new mn(sn.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),o=o.add(u)}return new Ol(n.key,r,new Bi(o.toArray()),Tn.none())}}function t0(n,e,t){n instanceof Om?function(r,o,u){const d=r.value.clone(),m=wx(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Ol?function(r,o,u){if(!ph(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=wx(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(_x(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Nl(n,e,t,r){return n instanceof Om?function(o,u,d,m){if(!ph(o.precondition,u))return d;const w=o.value.clone(),b=Ix(o.fieldTransforms,m,u);return w.setAll(b),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ol?function(o,u,d,m){if(!ph(o.precondition,u))return d;const w=Ix(o.fieldTransforms,m,u),b=u.data;return b.setAll(_x(o)),b.setAll(w),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===d?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(S=>S.field))}(n,e,t,r):(d=t,ph(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function n0(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=X(r.transform,o||null);null!=u&&(null===t&&(t=hi.empty()),t.set(r.field,u))}return t||null}function Nm(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&rh(t,r,(o,u)=>function Rl(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Me&&r instanceof Me||t instanceof Ye&&r instanceof Ye?rh(t.elements,r.elements,Oa):t instanceof De&&r instanceof De?Oa(t.yt,r.yt):t instanceof me&&r instanceof me);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Om extends gh{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ol extends gh{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function _x(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function wx(n,e,t){const r=new Map;vt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,H(d,m,t[o]))}return r}function Ix(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,P(u,d,e))}return r}class Pm extends gh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OT extends gh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class rN{constructor(e){this.count=e}}var Fr,an;function Ex(n){switch(n){default:return tt();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function Dx(n){if(void 0===n)return fr("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Fr.OK:return ce.OK;case Fr.CANCELLED:return ce.CANCELLED;case Fr.UNKNOWN:return ce.UNKNOWN;case Fr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Fr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Fr.INTERNAL:return ce.INTERNAL;case Fr.UNAVAILABLE:return ce.UNAVAILABLE;case Fr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Fr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Fr.NOT_FOUND:return ce.NOT_FOUND;case Fr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Fr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Fr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Fr.ABORTED:return ce.ABORTED;case Fr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Fr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Fr.DATA_LOSS:return ce.DATA_LOSS;default:return tt()}}(an=Fr||(Fr={}))[an.OK=0]="OK",an[an.CANCELLED=1]="CANCELLED",an[an.UNKNOWN=2]="UNKNOWN",an[an.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",an[an.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",an[an.NOT_FOUND=5]="NOT_FOUND",an[an.ALREADY_EXISTS=6]="ALREADY_EXISTS",an[an.PERMISSION_DENIED=7]="PERMISSION_DENIED",an[an.UNAUTHENTICATED=16]="UNAUTHENTICATED",an[an.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",an[an.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",an[an.ABORTED=10]="ABORTED",an[an.OUT_OF_RANGE=11]="OUT_OF_RANGE",an[an.UNIMPLEMENTED=12]="UNIMPLEMENTED",an[an.INTERNAL=13]="INTERNAL",an[an.UNAVAILABLE=14]="UNAVAILABLE",an[an.DATA_LOSS=15]="DATA_LOSS";class mh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ju(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return KE(this.inner)}size(){return this.innerSize}}const iN=new $n(ze.comparator);function Fs(){return iN}const bx=new $n(ze.comparator);function r0(...n){let e=bx;for(const t of n)e=e.insert(t.key,t);return e}function Cx(n){let e=bx;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function rc(){return s0()}function Tx(){return s0()}function s0(){return new mh(n=>n.toString(),(n,e)=>n.isEqual(e))}const sN=new $n(ze.comparator),oN=new mn(ze.comparator);function $t(...n){let e=oN;for(const t of n)e=e.add(t);return e}const aN=new mn(xt);function aD(){return aN}class o0{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,a0.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new o0(Dt.min(),o,aD(),Fs(),$t())}}class a0{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new a0(r,t,$t(),$t(),$t())}}class uD{constructor(e,t,r,o){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=o}}class Ax{constructor(e,t){this.targetId=e,this.At=t}}class Sx{constructor(e,t,r=Jn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class xx{constructor(){this.Rt=0,this.bt=Rx(),this.Pt=Jn.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=$t(),t=$t(),r=$t();return this.bt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:tt()}}),new a0(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=Rx()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class uN{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Fs(),this.qt=Mx(),this.Kt=new mn(xt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,o)=>{this.Ht(o)&&t(o)})}Yt(e){const t=e.targetId,r=e.At.count,o=this.Xt(t);if(o){const u=o.target;if(op(u))if(0===r){const d=new ze(u.path);this.jt(t,d,bn.newNoDocument(d,Dt.min()))}else vt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,d)=>{const m=this.Xt(d);if(m){if(u.current&&op(m.target)){const w=new ze(m.target.path);null!==this.Ut.get(w)||this.ee(d,w)||this.jt(d,w,bn.newNoDocument(w,e))}u.Dt&&(t.set(d,u.xt()),u.Nt())}});let r=$t();this.qt.forEach((u,d)=>{let m=!0;d.forEachWhile(w=>{const b=this.Xt(w);return!b||2===b.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Ut.forEach((u,d)=>d.setReadTime(e));const o=new o0(e,t,this.Kt,this.Ut,r);return this.Ut=Fs(),this.qt=Mx(),this.Kt=new mn(xt),o}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const o=this.zt(e);this.ee(e,t)?o.kt(t,1):o.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new xx,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new mn(xt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Ne("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new xx),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function Mx(){return new $n(ze.comparator)}function Rx(){return new $n(ze.comparator)}const cN={asc:"ASCENDING",desc:"DESCENDING"},lN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class dN{constructor(e,t){this.databaseId=e,this.gt=t}}function u0(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Nx(n,e){return n.gt?e.toBase64():e.toUint8Array()}function hN(n,e){return u0(n,e.toTimestamp())}function fi(n){return vt(!!n),Dt.fromTimestamp(function(e){const t=Na(e);return new jn(t.seconds,t.nanos)}(n))}function PT(n,e){return(t=n,new Yt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Ox(n){const e=Yt.fromString(n);return vt(jx(e)),e}function c0(n,e){return PT(n.databaseId,e.path)}function ic(n,e){const t=Ox(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ze(kx(t))}function kT(n,e){return PT(n.databaseId,e)}function Px(n){const e=Ox(n);return 4===e.length?Yt.emptyPath():kx(e)}function l0(n){return new Yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function kx(n){return vt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Fx(n,e,t){return{name:c0(n,e),fields:t.value.mapValue.fields}}function Lx(n,e,t){const r=ic(n,e.name),o=fi(e.updateTime),u=new hi({mapValue:{fields:e.fields}}),d=bn.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function d0(n,e){let t;if(e instanceof Om)t={update:Fx(n,e.key,e.value)};else if(e instanceof Pm)t={delete:c0(n,e.key)};else if(e instanceof Ol)t={update:Fx(n,e.key,e.data),updateMask:IN(e.fieldMask)};else{if(!(e instanceof OT))return tt();t={verify:c0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof me)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Me)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ye)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof De)return{fieldPath:u.field.canonicalString(),increment:d.yt};throw tt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:hN(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:tt()),t;var o}function FT(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Tn.updateTime(fi(o.updateTime)):void 0!==o.exists?Tn.exists(o.exists):Tn.none():Tn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(vt("REQUEST_TIME"===d.setToServerValue),m=new me):"appendMissingElements"in d?m=new Me(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new Ye(d.removeAllFromArray.values||[]):"increment"in d?m=new De(u,d.increment):tt();const w=sn.fromServerFormat(d.fieldPath);return new In(w,m)}(n,o)):[];var o;if(e.update){const o=ic(n,e.update.name),u=new hi({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Bi((e.updateMask.fieldPaths||[]).map(b=>sn.fromServerFormat(b)));return new Ol(o,u,d,t,r)}return new Om(o,u,t,r)}if(e.delete){const o=ic(n,e.delete);return new Pm(o,t)}if(e.verify){const o=ic(n,e.verify);return new OT(o,t)}return tt()}function Vx(n,e){return{documents:[kT(n,e.path)]}}function LT(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=kT(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=kT(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const b=w.map(S=>function(N){if("=="===N.op){if(Am(N.value))return{unaryFilter:{field:km(N.field),op:"IS_NAN"}};if(Y_(N.value))return{unaryFilter:{field:km(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(Am(N.value))return{unaryFilter:{field:km(N.field),op:"IS_NOT_NAN"}};if(Y_(N.value))return{unaryFilter:{field:km(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:km(N.field),op:vN(N.op),value:N.value}}}(S));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(b=>{return{field:km((S=b).field),direction:yN(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(b=e.limit,n.gt||ch(b)?b:{value:b});var b,m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function Ux(n){let e=Px(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){vt(1===r);const S=t.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=Bx(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(S=>{return new fh(Fm((N=S).field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(S){let N;return N="object"==typeof S?S.value:S,ch(N)?null:N}(t.limit));let w=null;var S;t.startAt&&(w=new tc((S=t.startAt).values||[],!!S.before));let b=null;return t.endAt&&(b=function(S){return new tc(S.values||[],!S.before)}(t.endAt)),NT(e,o,d,u,m,"F",w,b)}function Bx(n){return n?void 0!==n.unaryFilter?[wN(n)]:void 0!==n.fieldFilter?[_N(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Bx(e)).reduce((e,t)=>e.concat(t)):tt():[]}function yN(n){return cN[n]}function vN(n){return lN[n]}function km(n){return{fieldPath:n.canonicalString()}}function Fm(n){return sn.fromServerFormat(n.fieldPath)}function _N(n){return kr.create(Fm(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tt()}}(n.fieldFilter.op),n.fieldFilter.value)}function wN(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Fm(n.unaryFilter.field);return kr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Fm(n.unaryFilter.field);return kr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Fm(n.unaryFilter.field);return kr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Fm(n.unaryFilter.field);return kr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return tt()}}function IN(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function jx(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function hs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=$x(e)),e=EN(n.get(t),e);return $x(e)}function EN(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function $x(n){return n+"\x01\x01"}function sc(n){const e=n.length;if(vt(e>=2),2===e)return vt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Yt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&tt(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:tt()}u=d+2}return new Yt(r)}const Hx=["userId","batchId"];function cD(n,e){return[n,hs(e)]}function Gx(n,e,t){return[n,hs(e),t]}const DN={},bN=["prefixPath","collectionGroup","readTime","documentId"],CN=["prefixPath","collectionGroup","documentId"],TN=["collectionGroup","readTime","prefixPath","documentId"],AN=["canonicalId","targetId"],SN=["targetId","path"],xN=["path","targetId"],MN=["collectionId","parent"],RN=["indexId","uid"],NN=["uid","sequenceNumber"],ON=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],PN=["indexId","uid","orderedDocumentKey"],kN=["userId","collectionPath","documentId"],FN=["userId","collectionPath","largestBatchId"],LN=["userId","collectionGroup","largestBatchId"],zx=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],VN=[...zx,"documentOverlays"],qx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Wx=qx,UN=[...Wx,"indexConfiguration","indexState","indexEntries"];class VT extends G_{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function pi(n,e){const t=qe(n);return Pr.M(t.ie,e)}class UT{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&t0(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Nl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Nl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Tx();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=t.has(o.key)?null:m;const w=Rm(d,m);null!==w&&r.set(o.key,w),d.isValidDocument()||d.convertToNoDocument(Dt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),$t())}isEqual(e){return this.batchId===e.batchId&&rh(this.mutations,e.mutations,(t,r)=>Nm(t,r))&&rh(this.baseMutations,e.baseMutations,(t,r)=>Nm(t,r))}}class BT{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){vt(e.mutations.length===r.length);let o=sN;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new BT(e,t,r,o)}}class jT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class yh{constructor(e,t,r,o,u=Dt.min(),d=Dt.min(),m=Jn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new yh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new yh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new yh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Kx{constructor(e){this.re=e}}function Zx(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:lD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:c0(o=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:u0(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:lp(e.version)};else{if(!e.isUnknownDocument())return tt();r.unknownDocument={path:t.path.toArray(),version:lp(e.version)}}var o,u;return r}function lD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function lp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function dp(n){const e=new jn(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function hp(n,e){const t=(e.baseMutations||[]).map(u=>FT(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>FT(n.re,u)),o=jn.fromMillis(e.localWriteTimeMs);return new UT(e.batchId,o,t,r)}function h0(n){const e=dp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?dp(n.lastLimboFreeSnapshotVersion):Dt.min();let r;var o;return void 0!==n.query.documents?(vt(1===(o=n.query).documents.length),r=ji(up(Px(o.documents[0])))):r=ji(Ux(n.query)),new yh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Jn.fromBase64String(n.resumeToken))}function Yx(n,e){const t=lp(e.snapshotVersion),r=lp(e.lastLimboFreeSnapshotVersion);let o;o=op(e.target)?Vx(n.re,e.target):LT(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ml(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function $T(n){const e=Ux({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?X_(e,e.limit,"L"):e}function HT(n,e){return new jT(e.largestBatchId,FT(n.re,e.overlayMutation))}function Qx(n,e){const t=e.path.lastSegment();return[n,hs(e.path.popLast()),t]}function Jx(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:lp(r.readTime),documentKey:hs(r.documentKey.path),largestBatchId:r.largestBatchId}}class jN{getBundleMetadata(e,t){return Xx(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:dp(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return Xx(e).put({bundleId:(r=t).id,createTime:lp(fi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return eM(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:$T(o.bundledQuery),readTime:dp(o.readTime)};var o})}saveNamedQuery(e,t){return eM(e).put({name:(r=t).name,readTime:lp(fi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Xx(n){return pi(n,"bundles")}function eM(n){return pi(n,"namedQueries")}class dD{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new dD(e,t.uid||"")}getOverlay(e,t){return f0(e).get(Qx(this.userId,t)).next(r=>r?HT(this.It,r):null)}getOverlays(e,t){const r=rc();return se.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const m=new jT(t,d);o.push(this.ue(e,m))}),se.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(hs(d.getCollectionPath())));const u=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(f0(e).Y("collectionPathOverlayIndex",m))}),se.waitFor(u)}getOverlaysForCollection(e,t,r){const o=rc(),u=hs(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return f0(e).W("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const b=HT(this.It,w);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=rc();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return f0(e).Z({index:"collectionGroupOverlayIndex",range:m},(w,b,S)=>{const N=HT(this.It,b);u.size()<o||N.largestBatchId===d?(u.set(N.getKey(),N),d=N.largestBatchId):S.done()}).next(()=>u)}ue(e,t){return f0(e).put(function(r,o,u){const[d,m,w]=Qx(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:d0(r.re,u.mutation)}}(this.It,this.userId,t))}}function f0(n){return pi(n,"documentOverlays")}class fp{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Xn(e.integerValue));else if("doubleValue"in e){const r=Xn(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),ip(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Xu(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?Sm(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):tt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const o of Object.keys(r))this._e(o,t),this.ae(r[o],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const o of r)this.ae(o,t)}ge(e,t){this.le(t,37),ze.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function $N(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function tM(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=$N(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}fp.Te=new fp;class HN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const o=t.codePointAt(0);this.Ae(240|o>>>18),this.Ae(128|63&o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const o=t.codePointAt(0);this.Pe(240|o>>>18),this.Pe(128|63&o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o)}}this.ve()}De(e){const t=this.Ce(e),r=tM(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Ne(e){const t=this.Ce(e),r=tM(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class GN{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class zN{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class p0{constructor(){this.Be=new HN,this.Le=new GN(this.Be),this.Ue=new zN(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class pp{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new pp(this.indexId,this.documentKey,this.arrayValue,r)}}function gp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=nM(n.arrayValue,e.arrayValue),0!==t?t:(t=nM(n.directionalValue,e.directionalValue),0!==t?t:ze.comparator(n.documentKey,e.documentKey)))}function nM(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class qN{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=B_(e);if(void 0!==t&&!this.ze(t))return!1;const r=Or(e);let o=0,u=0;for(;o<r.length&&this.ze(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.je){const d=r[o];if(!this.He(this.je,d)||!this.Je(this.Ge[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Ge.length||!this.Je(this.Ge[u++],d))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class WN{constructor(){this.Ye=new GT}addToCollectionParentIndex(e,t){return this.Ye.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Ui.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Ui.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class GT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new mn(Yt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new mn(Yt.comparator)).toArray()}}const hD=new Uint8Array(0);class KN{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new GT,this.Ze=new mh(r=>Ml(r),(r,o)=>hh(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:hs(o)};return rM(e).put(u)}return se.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[zE(t),""],!1,!0);return rM(e).W(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(sc(d.parent))}return r})}addFieldIndex(e,t){const r=fD(e),o={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var d;delete o.indexId;const u=r.add(o);if(t.indexState){const d=m0(e);return u.next(m=>{d.put(Jx(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=fD(e),o=m0(e),u=g0(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=g0(e);let o=!0;const u=new Map;return se.forEach(this.tn(t),d=>this.en(e,d).next(m=>{o&&(o=!!m),u.set(d,m)})).next(()=>{if(o){let d=$t();const m=[];return se.forEach(u,(w,b)=>{var S;Ne("IndexedDbIndexManager",`Using index ${S=w,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(Lt=>`${Lt.fieldPath}:${Lt.kind}`).join(",")}`} to execute ${Ml(t)}`);const N=function(Lt,Vt){const kt=B_(Vt);if(void 0===kt)return null;for(const Ht of ap(Lt,kt.fieldPath))switch(Ht.op){case"array-contains-any":return Ht.value.arrayValue.values||[];case"array-contains":return[Ht.value]}return null}(b,w),$=function(Lt,Vt){const kt=new Map;for(const Ht of Or(Vt))for(const Jr of ap(Lt,Ht.fieldPath))switch(Jr.op){case"==":case"in":kt.set(Ht.fieldPath.canonicalString(),Jr.value);break;case"not-in":case"!=":return kt.set(Ht.fieldPath.canonicalString(),Jr.value),Array.from(kt.values())}return null}(b,w),Y=function(Lt,Vt){const kt=[];let Ht=!0;for(const Jr of Or(Vt)){const R0=0===Jr.kind?eD(Lt,Jr.fieldPath,Lt.startAt):tD(Lt,Jr.fieldPath,Lt.startAt);kt.push(R0.value),Ht&&(Ht=R0.inclusive)}return new tc(kt,Ht)}(b,w),oe=function(Lt,Vt){const kt=[];let Ht=!0;for(const Jr of Or(Vt)){const R0=0===Jr.kind?tD(Lt,Jr.fieldPath,Lt.endAt):eD(Lt,Jr.fieldPath,Lt.endAt);kt.push(R0.value),Ht&&(Ht=R0.inclusive)}return new tc(kt,Ht)}(b,w),Oe=this.nn(w,b,Y),Pe=this.nn(w,b,oe),Tt=this.sn(w,b,$),Pt=this.rn(w.indexId,N,Oe,Y.inclusive,Pe,oe.inclusive,Tt);return se.forEach(Pt,Lt=>r.J(Lt,t.limit).next(Vt=>{Vt.forEach(kt=>{const Ht=ze.fromSegments(kt.documentKey);d.has(Ht)||(d=d.add(Ht),m.push(Ht))})}))}).next(()=>m)}return se.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,o,u,d,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),b=w/(null!=t?t.length:1),S=[];for(let N=0;N<w;++N){const $=t?this.on(t[N/b]):hD,Y=this.un(e,$,r[N%b],o),oe=this.cn(e,$,u[N%b],d),Oe=m.map(Pe=>this.un(e,$,Pe,!0));S.push(...this.createRange(Y,oe,Oe))}return S}un(e,t,r,o){const u=new pp(e,ze.empty(),t,r);return o?u:u.Ke()}cn(e,t,r,o){const u=new pp(e,ze.empty(),t,r);return o?u.Ke():u}en(e,t){const r=new qN(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const m of u)r.We(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;return se.forEach(this.tn(t),o=>this.en(e,o).next(u=>{u?0!==r&&u.fields.length<function(d){let m=new mn(sn.comparator),w=!1;for(const b of d.filters){const S=b;S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?w=!0:m=m.add(S.field))}for(const b of d.orderBy)b.field.isKeyField()||(m=m.add(b.field));return m.size+(w?1:0)}(o)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new p0;for(const o of Or(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.qe(o.kind);fp.Te.ce(u,d)}return r.$e()}on(e){const t=new p0;return fp.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new p0;return fp.Te.ce(xl(this.databaseId,t),r.qe(function(o){const u=Or(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let o=[];o.push(new p0);let u=0;for(const d of Or(e)){const m=r[u++];for(const w of o)if(this.ln(t,d.fieldPath)&&lo(m))o=this.fn(o,d,m);else{const b=w.qe(d.kind);fp.Te.ce(m,b)}}return this.dn(o)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of o){const w=new p0;w.seed(m.$e()),fp.Te.ce(d,w.qe(t.kind)),u.push(w)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof kr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=fD(e),o=m0(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const d=[];return se.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{d.push(function(b,S){const N=S?new np(S.sequenceNumber,new Ui(dp(S.readTime),new ze(sc(S.documentKey)),S.largestBatchId)):np.empty(),$=b.fields.map(([Y,oe])=>new oh(sn.fromServerFormat(Y),oe));return new sh(b.indexId,b.collectionGroup,$,N)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:xt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=fD(e),u=m0(e);return this._n(e).next(d=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>se.forEach(m,w=>u.put(Jx(w.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return se.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?se.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),se.forEach(m,w=>this.wn(e,o,w).next(b=>{const S=this.mn(u,w);return b.isEqual(S)?se.resolve():this.gn(e,u,w,b,S)}))))})}yn(e,t,r,o){return g0(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,o){return g0(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const o=g0(e);let u=new mn(gp);return o.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(d,m)=>{u=u.add(new pp(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}mn(e,t){let r=new mn(gp);const o=this.an(t,e);if(null==o)return r;const u=B_(t);if(null!=u){const d=e.data.field(u.fieldPath);if(lo(d))for(const m of d.arrayValue.values||[])r=r.add(new pp(t.indexId,e.key,this.on(m),o))}else r=r.add(new pp(t.indexId,e.key,hD,o));return r}gn(e,t,r,o,u){Ne("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,w,b,S,N){const $=m.getIterator(),Y=w.getIterator();let oe=Tl($),Oe=Tl(Y);for(;oe||Oe;){let Pe=!1,Tt=!1;if(oe&&Oe){const Pt=b(oe,Oe);Pt<0?Tt=!0:Pt>0&&(Pe=!0)}else null!=oe?Tt=!0:Pe=!0;Pe?(S(Oe),Oe=Tl(Y)):Tt?(N(oe),oe=Tl($)):(oe=Tl($),Oe=Tl(Y))}}(o,u,gp,m=>{d.push(this.yn(e,t,r,m))},m=>{d.push(this.pn(e,t,r,m))}),se.waitFor(d)}_n(e){let t=1;return m0(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>gp(d,m)).filter((d,m,w)=>!m||0!==gp(d,w[m-1]));const o=[];o.push(e);for(const d of r){const m=gp(d,e),w=gp(d,t);if(0===m)o[0]=e.Ke();else if(m>0&&w<0)o.push(d),o.push(d.Ke());else if(w>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,hD,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,hD,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(iM)}getMinOffset(e,t){return se.mapArray(this.tn(t),r=>this.en(e,r).next(o=>o||tt())).next(iM)}}function rM(n){return pi(n,"collectionParents")}function g0(n){return pi(n,"indexEntries")}function fD(n){return pi(n,"indexConfiguration")}function m0(n){return pi(n,"indexState")}function iM(n){vt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;$_(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Ui(e.readTime,e.documentKey,t)}const sM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ls{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ls(e,Ls.DEFAULT_COLLECTION_PERCENTILE,Ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function oM(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.Z({range:d},(S,N,$)=>(m++,$.delete()));u.push(w.next(()=>{vt(1===m)}));const b=[];for(const S of t.mutations){const N=Gx(e,S.key.path,t.batchId);u.push(o.delete(N)),b.push(S.key)}return se.waitFor(u).next(()=>b)}function pD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw tt();e=n.noDocument}return JSON.stringify(e).length}Ls.DEFAULT_COLLECTION_PERCENTILE=10,Ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ls.DEFAULT=new Ls(41943040,Ls.DEFAULT_COLLECTION_PERCENTILE,Ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ls.DISABLED=new Ls(-1,0,0);class gD{constructor(e,t,r,o){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=o,this.In={}}static oe(e,t,r,o){vt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new gD(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vh(e).Z({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Lm(e),d=vh(e);return d.add({}).next(m=>{vt("number"==typeof m);const w=new UT(m,t,r,o),b=function($,Y,oe){const Oe=oe.baseMutations.map(Tt=>d0($.re,Tt)),Pe=oe.mutations.map(Tt=>d0($.re,Tt));return{userId:Y,batchId:oe.batchId,localWriteTimeMs:oe.localWriteTime.toMillis(),baseMutations:Oe,mutations:Pe}}(this.It,this.userId,w),S=[];let N=new mn(($,Y)=>xt($.canonicalString(),Y.canonicalString()));for(const $ of o){const Y=Gx(this.userId,$.key.path,m);N=N.add($.key.path.popLast()),S.push(d.put(b)),S.push(u.put(Y,DN))}return N.forEach($=>{S.push(this.indexManager.addToCollectionParentIndex(e,$))}),e.addOnCommittedListener(()=>{this.In[m]=w.keys()}),se.waitFor(S).next(()=>w)})}lookupMutationBatch(e,t){return vh(e).get(t).next(r=>r?(vt(r.userId===this.userId),hp(this.It,r)):null)}Tn(e,t){return this.In[t]?se.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.In[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return vh(e).Z({index:"userMutationsIndex",range:o},(d,m,w)=>{m.userId===this.userId&&(vt(m.batchId>=r),u=hp(this.It,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return vh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vh(e).W("userMutationsIndex",t).next(r=>r.map(o=>hp(this.It,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=cD(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Lm(e).Z({range:o},(d,m,w)=>{const[b,S,N]=d,$=sc(S);if(b===this.userId&&t.path.isEqual($))return vh(e).get(N).next(Y=>{if(!Y)throw tt();vt(Y.userId===this.userId),u.push(hp(this.It,Y))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mn(xt);const o=[];return t.forEach(u=>{const d=cD(this.userId,u.path),m=IDBKeyRange.lowerBound(d),w=Lm(e).Z({range:m},(b,S,N)=>{const[$,Y,oe]=b,Oe=sc(Y);$===this.userId&&u.path.isEqual(Oe)?r=r.add(oe):N.done()});o.push(w)}),se.waitFor(o).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=cD(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new mn(xt);return Lm(e).Z({range:d},(w,b,S)=>{const[N,$,Y]=w,oe=sc($);N===this.userId&&r.isPrefixOf(oe)?oe.length===o&&(m=m.add(Y)):S.done()}).next(()=>this.En(e,m))}En(e,t){const r=[],o=[];return t.forEach(u=>{o.push(vh(e).get(u).next(d=>{if(null===d)throw tt();vt(d.userId===this.userId),r.push(hp(this.It,d))}))}),se.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return oM(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),se.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Lm(e).Z({range:r},(u,d,m)=>{if(u[0]===this.userId){const w=sc(u[1]);o.push(w)}else m.done()}).next(()=>{vt(0===o.length)})})}containsKey(e,t){return aM(e,this.userId,t)}Rn(e){return uM(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function aM(n,e,t){const r=cD(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return Lm(n).Z({range:u,X:!0},(m,w,b)=>{const[S,N,$]=m;S===e&&N===o&&(d=!0),b.done()}).next(()=>d)}function vh(n){return pi(n,"mutations")}function Lm(n){return pi(n,"documentMutations")}function uM(n){return pi(n,"mutationQueues")}class mp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new mp(0)}static vn(){return new mp(-1)}}class ZN{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new mp(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Dt.fromTimestamp(new jn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Sn(e,o)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Vm(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(vt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Vm(e).Z((d,m)=>{const w=h0(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>se.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Vm(e).Z((r,o)=>{const u=h0(o);t(u)})}Vn(e){return cM(e).get("targetGlobalKey").next(t=>(vt(null!==t),t))}Sn(e,t){return cM(e).put("targetGlobalKey",t)}Dn(e,t){return Vm(e).put(Yx(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ml(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Vm(e).Z({range:o,index:"queryTargetsIndex"},(d,m,w)=>{const b=h0(m);hh(t,b.target)&&(u=b,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=_h(e);return t.forEach(d=>{const m=hs(d.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),se.waitFor(o)}removeMatchingKeys(e,t,r){const o=_h(e);return se.forEach(t,u=>{const d=hs(u.path);return se.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=_h(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=_h(e);let u=$t();return o.Z({range:r,X:!0},(d,m,w)=>{const b=sc(d[1]),S=new ze(b);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=hs(t.path),o=IDBKeyRange.bound([r],[zE(r)],!1,!0);let u=0;return _h(e).Z({index:"documentTargetsIndex",X:!0,range:o},([d,m],w,b)=>{0!==d&&(u++,b.done())}).next(()=>u>0)}se(e,t){return Vm(e).get(t).next(r=>r?h0(r):null)}}function Vm(n){return pi(n,"targets")}function cM(n){return pi(n,"targetGlobal")}function _h(n){return pi(n,"targetDocuments")}function lM([n,e],[t,r]){const o=xt(n,t);return 0===o?xt(e,r):o}class YN{constructor(e){this.xn=e,this.buffer=new mn(lM),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();lM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class QN{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Ne("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ye.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){di(r)?Ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Qu(r)}yield t.Fn(3e5)}))}}class JN{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return se.resolve(bi.at);const r=new YN(t);return this.$n.forEachTarget(e,o=>r.On(o.sequenceNumber)).next(()=>this.$n.Ln(e,o=>r.On(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(sM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sM):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,o,u,d,m,w,b;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,d=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(b=Date.now(),BE()<=$u.in.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-S}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(b-w)+`ms\nTotal Duration: ${b-S}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class XN{constructor(e,t){this.db=e,this.garbageCollector=new JN(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,o)=>t(o))}addReference(e,t,r){return mD(e,r)}removeReference(e,t,r){return mD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return mD(e,t)}Gn(e,t){return function(r,o){let u=!1;return uM(r).tt(d=>aM(r,d,o).next(m=>(m&&(u=!0),se.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Kn(e,(d,m)=>{if(m<=t){const w=this.Gn(e,d).next(b=>{if(!b)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,Dt.min()),_h(e).delete([0,hs(d.path)])))});o.push(w)}}).next(()=>se.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return mD(e,t)}Kn(e,t){const r=_h(e);let o,u=bi.at;return r.Z({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:b})=>{0===d?(u!==bi.at&&t(new ze(sc(o)),u),u=b,o=w):u=bi.at}).next(()=>{u!==bi.at&&t(new ze(sc(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function mD(n,e){return _h(n).put((r=n.currentSequenceNumber,{targetId:0,path:hs(e.path),sequenceNumber:r}));var r}class dM{constructor(){this.changes=new mh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class eO{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return yp(e).put(r)}removeEntry(e,t,r){return yp(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],lD(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=bn.newInvalidDocument(t);return yp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(y0(t))},(o,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:bn.newInvalidDocument(t)};return yp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(y0(t))},(o,u)=>{r={document:this.jn(t,u),size:pD(u)}}).next(()=>r)}getEntries(e,t){let r=Fs();return this.zn(e,t,(o,u)=>{const d=this.jn(o,u);r=r.insert(o,d)}).next(()=>r)}Hn(e,t){let r=Fs(),o=new $n(ze.comparator);return this.zn(e,t,(u,d)=>{const m=this.jn(u,d);r=r.insert(u,m),o=o.insert(u,pD(d))}).next(()=>({documents:r,Jn:o}))}zn(e,t,r){if(t.isEmpty())return se.resolve();let o=new mn(gM);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(y0(o.first()),y0(o.last())),d=o.getIterator();let m=d.getNext();return yp(e).Z({index:"documentKeyIndex",range:u},(w,b,S)=>{const N=ze.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;m&&gM(m,N)<0;)r(m,null),m=d.getNext();m&&m.isEqual(N)&&(r(m,b),m=d.hasNext()?d.getNext():null),m?S.j(y0(m)):S.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),lD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return yp(e).W(IDBKeyRange.bound(o,u,!0)).next(d=>{let m=Fs();for(const w of d){const b=this.jn(ze.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(b.key,b)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=Fs();const d=pM(t,r),m=pM(t,Ui.max());return yp(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,b,S)=>{const N=this.jn(ze.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(N.key,N),u.size===o&&S.done()}).next(()=>u)}newChangeBuffer(e){return new tO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return fM(e).get("remoteDocumentGlobalKey").next(t=>(vt(!!t),t))}Qn(e,t){return fM(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function BN(n,e){let t;if(e.document)t=Lx(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ze.fromSegments(e.noDocument.path),o=dp(e.noDocument.readTime);t=bn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return tt();{const r=ze.fromSegments(e.unknownDocument.path),o=dp(e.unknownDocument.version);t=bn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new jn(r[0],r[1]);return Dt.fromTimestamp(o)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return bn.newInvalidDocument(e)}}function hM(n){return new eO(n)}class tO extends dM{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new mh(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new mn((u,d)=>xt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const w=Zx(this.Yn.It,d);o=o.add(u.path.popLast()),r+=pD(w)-m.size,t.push(this.Yn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=Zx(this.Yn.It,d.convertToNoDocument(Dt.min()));t.push(this.Yn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),se.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:o})=>(o.forEach((u,d)=>{this.Xn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function fM(n){return pi(n,"remoteDocumentGlobal")}function yp(n){return pi(n,"remoteDocumentsV14")}function y0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function pM(n,e){const t=e.documentKey.path.toArray();return[n,lD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function gM(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=xt(t[u],r[u]),o)return o;return o=xt(t.length,r.length),o||(o=xt(t[t.length-2],r[r.length-2]),o||xt(t[t.length-1],r[r.length-1]))}class nO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class mM{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.getBaseDocument(e,t,r))).next(o=>(null!==r&&Nl(r.mutation,o,Bi.empty(),jn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,$t()).next(()=>r))}getLocalViewOfDocuments(e,t,r=$t()){const o=rc();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let d=r0();return u.forEach((m,w)=>{d=d.insert(m,w.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=rc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,$t()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,m)=>{t.set(d,m)})})}computeViews(e,t,r,o){let u=Fs();const d=s0(),m=s0();return t.forEach((w,b)=>{const S=r.get(b.key);o.has(b.key)&&(void 0===S||S.mutation instanceof Ol)?u=u.insert(b.key,b):void 0!==S&&(d.set(b.key,S.mutation.getFieldMask()),Nl(S.mutation,b,S.mutation.getFieldMask(),jn.now()))}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((b,S)=>d.set(b,S)),t.forEach((b,S)=>{var N;return m.set(b,new nO(S,null!==(N=d.get(b))&&void 0!==N?N:null))}),m))}recalculateAndSaveOverlays(e,t){const r=s0();let o=new $n((d,m)=>d-m),u=$t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const m of d)m.keys().forEach(w=>{const b=t.get(w);if(null===b)return;let S=r.get(w)||Bi.empty();S=m.applyToLocalView(b,S),r.set(w,S);const N=(o.get(m.batchId)||$t()).add(w);o=o.insert(m.batchId,N)})}).next(()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),b=w.key,S=w.value,N=Tx();S.forEach($=>{if(!u.has($)){const Y=Rm(t.get($),r.get($));null!==Y&&N.set($,Y),u=u.add($)}}),d.push(this.documentOverlayCache.saveOverlays(e,b,N))}return se.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return ze.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):oD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):se.resolve(rc());let m=-1,w=u;return d.next(b=>se.forEach(b,(S,N)=>(m<N.largestBatchId&&(m=N.largestBatchId),u.get(S)?se.resolve():this.getBaseDocument(e,S,N).next($=>{w=w.insert(S,$)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,w,b,$t())).next(S=>({batchId:m,changes:Cx(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ze(t)).next(r=>{let o=r0();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=r0();return this.indexManager.getCollectionParents(e,o).next(d=>se.forEach(d,m=>{const w=(b=t,S=m.child(o),new nc(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,S;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(b=>{b.forEach((S,N)=>{u=u.insert(S,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((m,w)=>{const b=w.getKey();null===o.get(b)&&(o=o.insert(b,bn.newInvalidDocument(b)))});let d=r0();return o.forEach((m,w)=>{const b=u.get(m);void 0!==b&&Nl(b.mutation,w,Bi.empty(),jn.now()),c(t,w)&&(d=d.insert(m,w))}),d})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):se.resolve(bn.newInvalidDocument(t))}}class rO{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return se.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:fi(r.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:$T(r.bundledQuery),readTime:fi(r.readTime)}),se.resolve();var r}}class iO{constructor(){this.overlays=new $n(ze.comparator),this.es=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=rc();return se.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ue(e,t,u)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.es.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const o=rc(),u=t.length+1,d=new ze(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,b=w.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new $n((b,S)=>b-S);const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let S=u.get(b.largestBatchId);null===S&&(S=rc(),u=u.insert(b.largestBatchId,S)),S.set(b.getKey(),b)}}const m=rc(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((b,S)=>m.set(b,S)),!(m.size()>=o)););return se.resolve(m)}ue(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const d=this.es.get(o.largestBatchId).delete(r.key);this.es.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new jT(t,r));let u=this.es.get(t);void 0===u&&(u=$t(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class zT{constructor(){this.ns=new mn(gi.ss),this.rs=new mn(gi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new gi(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new gi(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new ze(new Yt([])),r=new gi(t,e),o=new gi(t,e+1),u=[];return this.rs.forEachInRange([r,o],d=>{this.cs(d),u.push(d.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new ze(new Yt([])),r=new gi(t,e),o=new gi(t,e+1);let u=$t();return this.rs.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new gi(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class gi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return ze.comparator(e.key,t.key)||xt(e._s,t._s)}static os(e,t){return xt(e._s,t._s)||ze.comparator(e.key,t.key)}}class sO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new mn(gi.ss)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ws;this.ws++;const d=new UT(u,t,r,o);this.mutationQueue.push(d);for(const m of o)this.gs=this.gs.add(new gi(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return se.resolve(d)}lookupMutationBatch(e,t){return se.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ps(t+1),u=o<0?0:o;return se.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new gi(t,0),o=new gi(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,o],d=>{const m=this.ys(d._s);u.push(m)}),se.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mn(xt);return t.forEach(o=>{const u=new gi(o,0),d=new gi(o,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,d],m=>{r=r.add(m._s)})}),se.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;ze.isDocumentKey(u)||(u=u.child(""));const d=new gi(new ze(u),0);let m=new mn(xt);return this.gs.forEachWhile(w=>{const b=w.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(m=m.add(w._s)),!0)},d),se.resolve(this.Is(m))}Is(e){const t=[];return e.forEach(r=>{const o=this.ys(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){vt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return se.forEach(t.mutations,o=>{const u=new gi(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new gi(t,0),o=this.gs.firstAfterOrEqual(r);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return se.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class oO{constructor(e){this.Es=e,this.docs=new $n(ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():bn.newInvalidDocument(t))}getEntries(e,t){let r=Fs();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():bn.newInvalidDocument(o))}),se.resolve(r)}getAllFromCollection(e,t,r){let o=Fs();const u=new ze(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:w}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||$_(j_(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return se.resolve(o)}getAllFromCollectionGroup(e,t,r,o){tt()}As(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new aO(this)}getSize(e){return se.resolve(this.size)}}class aO extends dM{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Yn.addEntry(e,o)):this.Yn.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class uO{constructor(e){this.persistence=e,this.Rs=new mh(t=>Ml(t),hh),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new zT,this.targetCount=0,this.vs=mp.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,o)=>t(o)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),se.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new mp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Dn(t),se.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Rs.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Rs.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),se.waitFor(u).next(()=>o)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),se.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.Ps.containsKey(t))}}class yM{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new bi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new uO(this),this.indexManager=new WN,this.remoteDocumentCache=new oO(r=>this.referenceDelegate.xs(r)),this.It=new Kx(t),this.Ns=new rO(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new sO(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ne("MemoryPersistence","Starting transaction:",e);const o=new cO(this.Ss.next());return this.referenceDelegate.ks(),r(o).next(u=>this.referenceDelegate.Os(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ms(e,t){return se.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class cO extends G_{constructor(e){super(),this.currentSequenceNumber=e}}class yD{constructor(e){this.persistence=e,this.Fs=new zT,this.$s=null}static Bs(e){return new yD(e)}get Ls(){if(this.$s)return this.$s;throw tt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),se.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(o=>this.Ls.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Ls,r=>{const o=ze.fromPath(r);return this.Us(e,o).next(u=>{u||t.removeEntry(o,Dt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return se.or([()=>se.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class lO{constructor(e){this.It=e}$(e,t,r,o){const u=new ah("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Hx,{unique:!0}),m.createObjectStore("documentMutations"),vM(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=se.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),vM(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").W().next(b=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Hx,{unique:!0});const S=w.store("mutations"),N=b.map($=>S.put($));return se.waitFor(N)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.qs(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&o>=7&&(d=d.next(()=>this.Gs(u))),r<8&&o>=8&&(d=d.next(()=>this.Qs(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.js(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:kN});w.createIndex("collectionPathOverlayIndex",FN,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",LN,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:bN});w.createIndex("documentKeyIndex",CN),w.createIndex("collectionGroupIndex",TN)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>this.zs(e,u))),r<15&&o>=15&&(d=d.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:RN}).createIndex("sequenceNumberIndex",NN,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:ON}).createIndex("documentKeyIndex",PN,{unique:!1})}(e))),d}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,o)=>{t+=pD(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>se.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",d).next(m=>se.forEach(m,w=>{vt(w.userId===u.userId);const b=hp(this.It,w);return oM(e,u.userId,b).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Z((d,m)=>{const w=new Yt(d),b=[0,hs(w)];u.push(t.get(b).next(S=>S?se.resolve():t.put({targetId:0,path:hs(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>se.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:MN});const r=t.store("collectionParents"),o=new GT,u=d=>{if(o.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:hs(w)})}};return t.store("remoteDocuments").Z({X:!0},(d,m)=>{const w=new Yt(d);return u(w.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([d,m,w],b)=>{const S=sc(m);return u(S.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,o)=>{const u=h0(o),d=Yx(this.It,u);return t.put(d)})}Ws(e,t){const r=t.store("remoteDocuments"),o=[];return r.Z((u,d)=>{const m=t.store("remoteDocumentsV14"),w=(b=d,b.document?new ze(Yt.fromString(b.document.name).popFirst(5)):b.noDocument?ze.fromSegments(b.noDocument.path):b.unknownDocument?ze.fromSegments(b.unknownDocument.path):tt()).path.toArray();var b;const S={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(S))}).next(()=>se.waitFor(o))}zs(e,t){const r=t.store("mutations"),o=hM(this.It),u=new yM(yD.Bs,this.It.re);return r.W().next(d=>{const m=new Map;return d.forEach(w=>{var b;let S=null!==(b=m.get(w.userId))&&void 0!==b?b:$t();hp(this.It,w).keys().forEach(N=>S=S.add(N)),m.set(w.userId,S)}),se.forEach(m,(w,b)=>{const S=new Qr(b),N=dD.oe(this.It,S),$=u.getIndexManager(S),Y=gD.oe(S,this.It,$,u.referenceDelegate);return new mM(o,Y,N,$).recalculateAndSaveOverlaysForDocumentKeys(new VT(t,bi.at),w).next()})})}}function vM(n){n.createObjectStore("targetDocuments",{keyPath:SN}).createIndex("documentTargetsIndex",xN,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",AN,{unique:!0}),n.createObjectStore("targetGlobal")}const qT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class WT{constructor(e,t,r,o,u,d,m,w,b,S,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=d,this.document=m,this.Js=b,this.Ys=S,this.Xs=N,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=$=>Promise.resolve(),!WT.C())throw new xe(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new XN(this,o),this.ii=t+"main",this.It=new Kx(w),this.ri=new Pr(this.ii,this.Xs,new lO(this.It)),this.Cs=new ZN(this.referenceDelegate,this.It),this.remoteDocumentCache=hM(this.It),this.Ns=new jN,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===S&&fr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(ce.FAILED_PRECONDITION,qT);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new bi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,ye.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>vD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(di(e))return Ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return v0(e).get("owner").next(t=>se.resolve(this.mi(t)))}gi(e){return vD(e).delete(this.clientId)}yi(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=pi(r,"clientMetadata");return o.W().next(u=>{const d=e.Ii(u,18e5),m=u.filter(w=>-1===d.indexOf(w));return se.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?se.resolve(!0):v0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new xe(ce.FAILED_PRECONDITION,qT);return!1}}return!(!this.networkEnabled||!this.inForeground)||vD(e).W().next(r=>void 0===this.Ii(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ne("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new VT(t,bi.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>vD(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return gD.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new KN(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return dD.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ne("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(d=this.Xs)?UN:14===d?Wx:13===d?qx:12===d?VN:11===d?zx:void tt();var d;let m;return this.ri.runTransaction(e,o,u,w=>(m=new VT(w,this.Ss?this.Ss.next():bi.at),"readwrite-primary"===t?this.fi(m).next(b=>!!b||this.di(m)).next(b=>{if(!b)throw fr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new xe(ce.FAILED_PRECONDITION,H_);return r(m)}).next(b=>this.wi(m).next(()=>b)):this.Vi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Vi(e){return v0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(ce.FAILED_PRECONDITION,qT)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return v0(e).put("owner",t)}static C(){return Pr.C()}_i(e){const t=v0(e);return t.get("owner").next(r=>this.mi(r)?(Ne("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(fr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Xt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ne("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return fr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){fr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function v0(n){return pi(n,"owner")}function vD(n){return pi(n,"clientMetadata")}function KT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class ZT{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=o}static Ci(e,t){let r=$t(),o=$t();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new ZT(e,t.fromCache,r,o)}}class _M{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.ki(e,t).next(u=>u||this.Oi(e,t,o,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(rD(t))return se.resolve(null);let r=ji(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=X_(t,null,"F"),r=ji(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const d=$t(...u);return this.Ni.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const b=this.Fi(t,m);return this.$i(t,b,d,w.readTime)?this.ki(e,X_(t,null,"F")):this.Bi(e,b,t,w)}))})))}Oi(e,t,r,o){return rD(t)||o.isEqual(Dt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const d=this.Fi(t,u);return this.$i(t,d,r,o)?this.Mi(e,t):(BE()<=$u.in.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),a(t)),this.Bi(e,d,t,Im(o,-1)))})}Fi(e,t){let r=new mn(f(e));return t.forEach((o,u)=>{c(e,u)&&(r=r.add(u))}),r}$i(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Mi(e,t){return BE()<=$u.in.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",a(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ui.min())}Bi(e,t,r,o){return this.Ni.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class dO{constructor(e,t,r,o){this.persistence=e,this.Li=t,this.It=o,this.Ui=new $n(xt),this.qi=new mh(u=>Ml(u),hh),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mM(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function wM(n,e,t,r){return new dO(n,e,t,r)}function IM(n,e){return YT.apply(this,arguments)}function YT(){return YT=(0,ye.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let w=$t();for(const b of o){d.push(b.batchId);for(const S of b.mutations)w=w.add(S.key)}for(const b of u){m.push(b.batchId);for(const S of b.mutations)w=w.add(S.key)}return t.localDocuments.getDocuments(r,w).next(b=>({ji:b,removedBatchIds:d,addedBatchIds:m}))})})}),YT.apply(this,arguments)}function hO(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(d,m,w,b){const S=w.batch,N=S.keys();let $=se.resolve();return N.forEach(Y=>{$=$.next(()=>b.getEntry(m,Y)).next(oe=>{const Oe=w.docVersions.get(Y);vt(null!==Oe),oe.version.compareTo(Oe)<0&&(S.applyToRemoteDocument(oe,w),oe.isValidDocument()&&(oe.setReadTime(w.commitVersion),b.addEntry(oe)))})}),$.next(()=>d.mutationQueue.removeMutationBatch(m,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=$t();for(let w=0;w<d.mutationResults.length;++w)d.mutationResults[w].transformResults.length>0&&(m=m.add(d.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function EM(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function fO(n,e){const t=qe(n),r=e.snapshotVersion;let o=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Gi.newChangeBuffer({trackRemovals:!0});o=t.Ui;const m=[];e.targetChanges.forEach((S,N)=>{const $=o.get(N);if(!$)return;m.push(t.Cs.removeMatchingKeys(u,S.removedDocuments,N).next(()=>t.Cs.addMatchingKeys(u,S.addedDocuments,N)));let Y=$.withSequenceNumber(u.currentSequenceNumber);var oe,Oe,Pe;e.targetMismatches.has(N)?Y=Y.withResumeToken(Jn.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):S.resumeToken.approximateByteSize()>0&&(Y=Y.withResumeToken(S.resumeToken,r)),o=o.insert(N,Y),Oe=Y,Pe=S,(0===(oe=$).resumeToken.approximateByteSize()||Oe.snapshotVersion.toMicroseconds()-oe.snapshotVersion.toMicroseconds()>=3e8||Pe.addedDocuments.size+Pe.modifiedDocuments.size+Pe.removedDocuments.size>0)&&m.push(t.Cs.updateTargetData(u,Y))});let w=Fs(),b=$t();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))}),m.push(DM(u,d,e.documentUpdates).next(S=>{w=S.Wi,b=S.zi})),!r.isEqual(Dt.min())){const S=t.Cs.getLastRemoteSnapshotVersion(u).next(N=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(S)}return se.waitFor(m).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,b)).next(()=>w)}).then(u=>(t.Ui=o,u))}function DM(n,e,t){let r=$t(),o=$t();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=Fs();return t.forEach((m,w)=>{const b=u.get(m);w.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(m)),w.isNoDocument()&&w.version.isEqual(Dt.min())?(e.removeEntry(m,w.readTime),d=d.insert(m,w)):!b.isValidDocument()||w.version.compareTo(b.version)>0||0===w.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(w),d=d.insert(m,w)):Ne("LocalStore","Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",w.version)}),{Wi:d,zi:o}})}function pO(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Um(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Cs.getTargetData(r,e).next(u=>u?(o=u,se.resolve(o)):t.Cs.allocateTargetId(r).next(d=>(o=new yh(e,d,0,r.currentSequenceNumber),t.Cs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Bm(n,e,t){return QT.apply(this,arguments)}function QT(){return QT=(0,ye.Z)(function*(n,e,t){const r=qe(n),o=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!di(d))throw d;Ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ui=r.Ui.remove(e),r.qi.delete(o.target)}),QT.apply(this,arguments)}function _D(n,e,t){const r=qe(n);let o=Dt.min(),u=$t();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,b){const S=qe(m),N=S.qi.get(b);return void 0!==N?se.resolve(S.Ui.get(N)):S.Cs.getTargetData(w,b)}(r,d,ji(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(d,m.targetId).next(w=>{u=w})}).next(()=>r.Li.getDocumentsMatchingQuery(d,e,t?o:Dt.min(),t?u:$t())).next(m=>(TM(r,l(e),m),{documents:m,Hi:u})))}function bM(n,e){const t=qe(n),r=qe(t.Cs),o=t.Ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(d=>d?d.target:null))}function CM(n,e){const t=qe(n),r=t.Ki.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Gi.getAllFromCollectionGroup(o,e,Im(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(TM(t,e,o),o))}function TM(n,e,t){let r=n.Ki.get(e)||Dt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function JT(){return JT=(0,ye.Z)(function*(n,e,t,r){const o=qe(n);let u=$t(),d=Fs();for(const b of t){const S=e.Ji(b.metadata.name);b.document&&(u=u.add(S));const N=e.Yi(b);N.setReadTime(e.Xi(b.metadata.readTime)),d=d.insert(S,N)}const m=o.Gi.newChangeBuffer({trackRemovals:!0}),w=yield Um(o,(b=r,ji(up(Yt.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>DM(b,m,d).next(S=>(m.apply(b),S)).next(S=>o.Cs.removeMatchingKeysForTargetId(b,w.targetId).next(()=>o.Cs.addMatchingKeys(b,u,w.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(b,S.Wi,S.zi)).next(()=>S.Wi)))}),JT.apply(this,arguments)}function mO(n,e){return XT.apply(this,arguments)}function XT(){return XT=(0,ye.Z)(function*(n,e,t=$t()){const r=yield Um(n,ji($T(e.bundledQuery))),o=qe(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=fi(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.Ns.saveNamedQuery(u,e);const m=r.withResumeToken(Jn.EMPTY_BYTE_STRING,d);return o.Ui=o.Ui.insert(m.targetId,m),o.Cs.updateTargetData(u,m).next(()=>o.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ns.saveNamedQuery(u,e))})}),XT.apply(this,arguments)}function AM(n,e){return`firestore_clients_${n}_${e}`}function SM(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function eA(n,e){return`firestore_targets_${n}_${e}`}class wD{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Zi(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new xe(o.error.code,o.error.message))),d?new wD(e,t,o.state,u):(fr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new xe(r.error.code,r.error.message))),u?new _0(e,r.state,o):(fr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ID{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=aD();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=QE(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new ID(e,u):(fr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class tA{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new tA(t.clientId,t.onlineState):(fr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class nA{constructor(){this.activeTargetIds=aD()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rA{constructor(e,t,r,o,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new $n(xt),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=AM(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new nA),this.lr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.vi();for(const o of t){if(o===e.sr)continue;const u=e.getItem(AM(e.persistenceKey,o));if(u){const d=ID.Zi(o,u);d&&(e.ur=e.ur.insert(d.clientId,d))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const o=e.yr(r);o&&e.pr(o)}for(const o of e.cr)e.rr(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(eA(this.persistenceKey,e));if(r){const o=_0.Zi(e,r);o&&(t=o.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(eA(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Er(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ne("SharedClientState","READ",e,t),t}setItem(e,t){Ne("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ne("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void fr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Vr(o,null)}{const o=t.Sr(r.key,r.newValue);if(o)return t.Vr(o.clientId,o)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(r.key===t.wr){if(null!==r.newValue){const o=t.yr(r.newValue);if(o)return t.pr(o)}}else if(r.key===t.hr){const o=function(u){let d=bi.at;if(null!=u)try{const m=JSON.parse(u);vt("number"==typeof m),d=m}catch(m){fr("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==bi.at&&t.sequenceNumberHandler(o)}else if(r.key===t.mr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const o=new wD(this.currentUser,e,t,r),u=SM(this.persistenceKey,this.currentUser,e);this.setItem(u,o.tr())}Er(e){const t=SM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const o=eA(this.persistenceKey,e),u=new _0(e,t,r);this.setItem(o,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return ID.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),o=Number(r[1]);return wD.Zi(new Qr(void 0!==r[2]?r[2]:null),o,t)}Nr(e,t){const r=this._r.exec(e),o=Number(r[1]);return _0.Zi(o,t)}yr(e){return tA.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),o=this.Ir(this.ur),u=this.Ir(r),d=[],m=[];return u.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Br(d,m).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=aD();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class xM{constructor(){this.Lr=new nA,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new nA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class yO{qr(e){}shutdown(){}}class MM{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const vO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _O{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class wO extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,o,u){const d=this.ho(e,t);Ne("RestConnection","Sending: ",d,r);const m={};return this.lo(m,o,u),this.fo(e,d,m,r).then(w=>(Ne("RestConnection","Received: ",w),w),w=>{throw Vo("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}_o(e,t,r,o,u,d){return this.ao(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ep,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.oo}/v1/${t}:${vO[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,d)=>{const m=new UE;m.setWithCredentials(!0),m.listenOnce(FE.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case wm.NO_ERROR:const b=m.getResponseJson();Ne("Connection","XHR received:",JSON.stringify(b)),u(b);break;case wm.TIMEOUT:Ne("Connection",'RPC "'+e+'" timed out'),d(new xe(ce.DEADLINE_EXCEEDED,"Request time out"));break;case wm.HTTP_ERROR:const S=m.getStatus();if(Ne("Connection",'RPC "'+e+'" failed with status:',S,"response text:",m.getResponseText()),S>0){const N=m.getResponseJson().error;if(N&&N.status&&N.message){const $=function(Y){const oe=Y.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(oe)>=0?oe:ce.UNKNOWN}(N.status);d(new xe($,N.message))}else d(new xe(ce.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new xe(ce.UNAVAILABLE,"Connection failed."));break;default:tt()}}finally{Ne("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}wo(e,t,r){const o=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=cT(),d=kE(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new lT({})),this.lo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const w=o.join("");Ne("Connection","Creating WebChannel: "+w,m);const b=u.createWebChannel(w,m);let S=!1,N=!1;const $=new _O({Hr:oe=>{N?Ne("Connection","Not sending because WebChannel is closed:",oe):(S||(Ne("Connection","Opening WebChannel transport."),b.open(),S=!0),Ne("Connection","WebChannel sending:",oe),b.send(oe))},Jr:()=>b.close()}),Y=(oe,Oe,Pe)=>{oe.listen(Oe,Tt=>{try{Pe(Tt)}catch(Pt){setTimeout(()=>{throw Pt},0)}})};return Y(b,U_.EventType.OPEN,()=>{N||Ne("Connection","WebChannel transport opened.")}),Y(b,U_.EventType.CLOSE,()=>{N||(N=!0,Ne("Connection","WebChannel transport closed"),$.io())}),Y(b,U_.EventType.ERROR,oe=>{N||(N=!0,Vo("Connection","WebChannel transport errored:",oe),$.io(new xe(ce.UNAVAILABLE,"The operation could not be completed")))}),Y(b,U_.EventType.MESSAGE,oe=>{var Oe;if(!N){const Pe=oe.data[0];vt(!!Pe);const Tt=Pe,Pt=Tt.error||(null===(Oe=Tt[0])||void 0===Oe?void 0:Oe.error);if(Pt){Ne("Connection","WebChannel received error:",Pt);const Lt=Pt.status;let Vt=function(Ht){const Jr=Fr[Ht];if(void 0!==Jr)return Dx(Jr)}(Lt),kt=Pt.message;void 0===Vt&&(Vt=ce.INTERNAL,kt="Unknown error status: "+Lt+" with message "+Pt.message),N=!0,$.io(new xe(Vt,kt)),b.close()}else Ne("Connection","WebChannel received:",Pe),$.ro(Pe)}}),Y(d,LE.STAT_EVENT,oe=>{oe.stat===VE.PROXY?Ne("Connection","Detected buffering proxy"):oe.stat===VE.NOPROXY&&Ne("Connection","Detected no buffering proxy")}),setTimeout(()=>{$.so()},0),$}}function RM(){return typeof window<"u"?window:null}function ED(){return typeof document<"u"?document:null}function w0(n){return new dN(n,!0)}class iA{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Ne("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class NM{constructor(e,t,r,o,u,d,m,w){this.Hs=e,this.vo=r,this.Vo=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new iA(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ye.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,ye.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(fr(t.toString()),fr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.So===t&&this.Go(r,o)},r=>{e(()=>{const o=new xe(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(o)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(o=>{r(()=>this.Qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,ye.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class IO extends NM{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.It=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function pN(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:tt(),o=e.targetChange.targetIds||[],u=function(w,b){return w.gt?(vt(void 0===b||"string"==typeof b),Jn.fromBase64String(b||"")):(vt(void 0===b||b instanceof Uint8Array),Jn.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const b=void 0===w.code?ce.UNKNOWN:Dx(w.code);return new xe(b,w.message||"")}(d);t=new Sx(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=ic(n,r.document.name),u=fi(r.document.updateTime),d=new hi({mapValue:{fields:r.document.fields}}),m=bn.newFoundDocument(o,u,d);t=new uD(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=ic(n,r.document),u=r.readTime?fi(r.readTime):Dt.min(),d=bn.newNoDocument(o,u);t=new uD([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=ic(n,r.document);t=new uD([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return tt();{const r=e.filter,u=new rN(r.count||0);t=new Ax(r.targetId,u)}}var w;return t}(this.It,e),r=function(o){if(!("targetChange"in o))return Dt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Dt.min():u.readTime?fi(u.readTime):Dt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=l0(this.It),t.addTarget=function(o,u){let d;const m=u.target;return d=op(m)?{documents:Vx(o,m)}:{query:LT(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=Nx(o,u.resumeToken):u.snapshotVersion.compareTo(Dt.min())>0&&(d.readTime=u0(o,u.snapshotVersion.toTimestamp())),d}(this.It,e);const r=function mN(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=l0(this.It),t.removeTarget=e,this.Bo(t)}}class EO extends NM{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(vt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function gN(n,e){return n&&n.length>0?(vt(void 0!==e),n.map(t=>function(r,o){let u=fi(r.updateTime?r.updateTime:o);return u.isEqual(Dt.min())&&(u=fi(o)),new e0(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=fi(e.commitTime);return this.listener.Zo(r,t)}return vt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=l0(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>d0(this.It,r))};this.Bo(t)}}class DO extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=o,this.nu=!1}su(){if(this.nu)throw new xe(ce.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.ao(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(ce.UNKNOWN,o.toString())})}_o(e,t,r,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection._o(e,t,r,u,d,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new xe(ce.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class CO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(fr(t),this.ou=!1):Ne("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class TO{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(m=>{r.enqueueAndForget((0,ye.Z)(function*(){var w;Pl(d)&&(Ne("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,ye.Z)(function*(b){const S=qe(b);S._u.add(4),yield jm(S),S.gu.set("Unknown"),S._u.delete(4),yield I0(S)}),function(b){return w.apply(this,arguments)})(d))}))}),this.gu=new CO(r,o)}}function I0(n){return oA.apply(this,arguments)}function oA(){return oA=(0,ye.Z)(function*(n){if(Pl(n))for(const e of n.wu)yield e(!0)}),oA.apply(this,arguments)}function jm(n){return aA.apply(this,arguments)}function aA(){return aA=(0,ye.Z)(function*(n){for(const e of n.wu)yield e(!1)}),aA.apply(this,arguments)}function DD(n,e){const t=qe(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),lA(t)?cA(t):Hm(t).ko()&&uA(t,e))}function E0(n,e){const t=qe(n),r=Hm(t);t.du.delete(e),r.ko()&&OM(t,e),0===t.du.size&&(r.ko()?r.Fo():Pl(t)&&t.gu.set("Unknown"))}function uA(n,e){n.yu.Mt(e.targetId),Hm(n).zo(e)}function OM(n,e){n.yu.Mt(e),Hm(n).Ho(e)}function cA(n){n.yu=new uN({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Hm(n).start(),n.gu.uu()}function lA(n){return Pl(n)&&!Hm(n).No()&&n.du.size>0}function Pl(n){return 0===qe(n)._u.size}function PM(n){n.yu=void 0}function AO(n){return dA.apply(this,arguments)}function dA(){return dA=(0,ye.Z)(function*(n){n.du.forEach((e,t)=>{uA(n,e)})}),dA.apply(this,arguments)}function SO(n,e){return hA.apply(this,arguments)}function hA(){return hA=(0,ye.Z)(function*(n,e){PM(n),lA(n)?(n.gu.hu(e),cA(n)):n.gu.set("Unknown")}),hA.apply(this,arguments)}function xO(n,e,t){return fA.apply(this,arguments)}function fA(){return fA=(0,ye.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof Sx&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o.du.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o.du.delete(m),o.yu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield bD(n,r)}else if(e instanceof uD?n.yu.Gt(e):e instanceof Ax?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Dt.min()))try{const r=yield EM(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.yu.te(u);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const b=o.du.get(w);b&&o.du.set(w,b.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const w=o.du.get(m);if(!w)return;o.du.set(m,w.withResumeToken(Jn.EMPTY_BYTE_STRING,w.snapshotVersion)),OM(o,m);const b=new yh(w.target,m,1,w.sequenceNumber);uA(o,b)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Ne("RemoteStore","Failed to raise snapshot:",r),yield bD(n,r)}var r}),fA.apply(this,arguments)}function bD(n,e,t){return pA.apply(this,arguments)}function pA(){return pA=(0,ye.Z)(function*(n,e,t){if(!di(e))throw e;n._u.add(1),yield jm(n),n.gu.set("Offline"),t||(t=()=>EM(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Ne("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield I0(n)}))}),pA.apply(this,arguments)}function kM(n,e){return e().catch(t=>bD(n,t,e))}function $m(n){return gA.apply(this,arguments)}function gA(){return gA=(0,ye.Z)(function*(n){const e=qe(n),t=wh(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;MO(e);)try{const o=yield pO(e.localStore,r);if(null===o){0===e.fu.length&&t.Fo();break}r=o.batchId,RO(e,o)}catch(o){yield bD(e,o)}FM(e)&&LM(e)}),gA.apply(this,arguments)}function MO(n){return Pl(n)&&n.fu.length<10}function RO(n,e){n.fu.push(e);const t=wh(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function FM(n){return Pl(n)&&!wh(n).No()&&n.fu.length>0}function LM(n){wh(n).start()}function NO(n){return mA.apply(this,arguments)}function mA(){return mA=(0,ye.Z)(function*(n){wh(n).eu()}),mA.apply(this,arguments)}function OO(n){return yA.apply(this,arguments)}function yA(){return yA=(0,ye.Z)(function*(n){const e=wh(n);for(const t of n.fu)e.Xo(t.mutations)}),yA.apply(this,arguments)}function PO(n,e,t){return vA.apply(this,arguments)}function vA(){return vA=(0,ye.Z)(function*(n,e,t){const r=n.fu.shift(),o=BT.from(r,e,t);yield kM(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield $m(n)}),vA.apply(this,arguments)}function kO(n,e){return _A.apply(this,arguments)}function _A(){return _A=(0,ye.Z)(function*(n,e){var t;e&&wh(n).Yo&&(yield(t=(0,ye.Z)(function*(r,o){if(Ex(u=o.code)&&u!==ce.ABORTED){const d=r.fu.shift();wh(r).Mo(),yield kM(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield $m(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),FM(n)&&LM(n)}),_A.apply(this,arguments)}function VM(n,e){return wA.apply(this,arguments)}function wA(){return wA=(0,ye.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Ne("RemoteStore","RemoteStore received new credentials");const r=Pl(t);t._u.add(3),yield jm(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield I0(t)}),wA.apply(this,arguments)}function IA(n,e){return EA.apply(this,arguments)}function EA(){return EA=(0,ye.Z)(function*(n,e){const t=qe(n);e?(t._u.delete(2),yield I0(t)):e||(t._u.add(2),yield jm(t),t.gu.set("Unknown"))}),EA.apply(this,arguments)}function Hm(n){return n.pu||(n.pu=function(e,t,r){const o=qe(e);return o.su(),new IO(t,o.connection,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:AO.bind(null,n),Zr:SO.bind(null,n),Wo:xO.bind(null,n)}),n.wu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.pu.Mo(),lA(n)?cA(n):n.gu.set("Unknown")):(yield n.pu.stop(),PM(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function wh(n){return n.Iu||(n.Iu=function(e,t,r){const o=qe(e);return o.su(),new EO(t,o.connection,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:NO.bind(null,n),Zr:kO.bind(null,n),tu:OO.bind(null,n),Zo:PO.bind(null,n)}),n.wu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Iu.Mo(),yield $m(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ne("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class DA{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new DA(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gm(n,e){if(fr("AsyncQueue",`${e}: ${n}`),di(n))return new xe(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class zm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ze.comparator(t.key,r.key):(t,r)=>ze.comparator(t.key,r.key),this.keyedMap=r0(),this.sortedSet=new $n(this.comparator)}static emptySet(e){return new zm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof zm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new zm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class UM{constructor(){this.Tu=new $n(ze.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):tt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class qm{constructor(e,t,r,o,u,d,m,w,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,o,u){const d=[];return t.forEach(m=>{d.push({type:0,doc:m})}),new qm(e,t,zm.emptySet(t),d,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&i(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class FO{constructor(){this.Au=void 0,this.listeners=[]}}class LO{constructor(){this.queries=new mh(e=>s(e),i),this.onlineState="Unknown",this.Ru=new Set}}function bA(n,e){return CA.apply(this,arguments)}function CA(){return CA=(0,ye.Z)(function*(n,e){const t=qe(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new FO),o)try{u.Au=yield t.onListen(r)}catch(d){const m=Gm(d,`Initialization of query '${a(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&SA(t)}),CA.apply(this,arguments)}function TA(n,e){return AA.apply(this,arguments)}function AA(){return AA=(0,ye.Z)(function*(n,e){const t=qe(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),AA.apply(this,arguments)}function VO(n,e){const t=qe(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Pu(o)&&(r=!0);d.Au=o}}r&&SA(t)}function UO(n,e,t){const r=qe(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function SA(n){n.Ru.forEach(e=>{e.next()})}class xA{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new qm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=qm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class BO{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class BM{constructor(e){this.It=e}Ji(e){return ic(this.It,e)}Yi(e){return e.metadata.exists?Lx(this.It,e.document,!1):bn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return fi(e)}}class jO{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=jM(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=Yt.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new BM(this.It);for(const o of e)if(o.metadata.queries){const u=r.Ji(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||$t()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function gO(n,e,t,r){return JT.apply(this,arguments)}(e.localStore,new BM(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const o of e.queries)yield mO(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function jM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class $M{constructor(e){this.key=e}}class HM{constructor(e){this.key=e}}class GM{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=$t(),this.mutatedKeys=$t(),this.Gu=f(e),this.Qu=new zm(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new UM,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,b="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((S,N)=>{const $=o.get(S),Y=c(this.query,N)?N:null,oe=!!$&&this.mutatedKeys.has($.key),Oe=!!Y&&(Y.hasLocalMutations||this.mutatedKeys.has(Y.key)&&Y.hasCommittedMutations);let Pe=!1;$&&Y?$.data.isEqual(Y.data)?oe!==Oe&&(r.track({type:3,doc:Y}),Pe=!0):this.Hu($,Y)||(r.track({type:2,doc:Y}),Pe=!0,(w&&this.Gu(Y,w)>0||b&&this.Gu(Y,b)<0)&&(m=!0)):!$&&Y?(r.track({type:0,doc:Y}),Pe=!0):$&&!Y&&(r.track({type:1,doc:$}),Pe=!0,(w||b)&&(m=!0)),Pe&&(Y?(d=d.add(Y),u=Oe?u.add(S):u.delete(S)):(d=d.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const S="F"===this.query.limitType?d.last():d.first();d=d.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Qu:d,zu:r,$i:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((b,S)=>function(N,$){const Y=oe=>{switch(oe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt()}};return Y(N)-Y($)}(b.type,S.type)||this.Gu(b.doc,S.doc)),this.Ju(r);const d=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,w=m!==this.qu;return this.qu=m,0!==u.length||w?{snapshot:new qm(this.query,e.Qu,o,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:d}:{Xu:d}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new UM,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=$t(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new HM(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new $M(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=$t();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return qm.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class $O{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class HO{constructor(e){this.key=e,this.nc=!1}}class GO{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.sc={},this.ic=new mh(m=>s(m),i),this.rc=new Map,this.oc=new Set,this.uc=new $n(ze.comparator),this.cc=new Map,this.ac=new zT,this.hc={},this.lc=new Map,this.fc=mp.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function zO(n,e){return MA.apply(this,arguments)}function MA(){return MA=(0,ye.Z)(function*(n,e){const t=XA(n);let r,o;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ec();else{const d=yield Um(t.localStore,ji(e));t.isPrimaryClient&&DD(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield RA(t,e,r,"current"===m,d.resumeToken)}return o}),MA.apply(this,arguments)}function RA(n,e,t,r,o){return NA.apply(this,arguments)}function NA(){return NA=(0,ye.Z)(function*(n,e,t,r,o){n._c=(N,$,Y)=>{return(oe=(0,ye.Z)(function*(Oe,Pe,Tt,Pt){let Lt=Pe.view.Wu(Tt);Lt.$i&&(Lt=yield _D(Oe.localStore,Pe.query,!1).then(({documents:Ht})=>Pe.view.Wu(Ht,Lt)));const Vt=Pt&&Pt.targetChanges.get(Pe.targetId),kt=Pe.view.applyChanges(Lt,Oe.isPrimaryClient,Vt);return $A(Oe,Pe.targetId,kt.Xu),kt.snapshot}),function(Oe,Pe,Tt,Pt){return oe.apply(this,arguments)})(n,N,$,Y);var oe};const u=yield _D(n.localStore,e,!0),d=new GM(e,u.Hi),m=d.Wu(u.documents),w=a0.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),b=d.applyChanges(m,n.isPrimaryClient,w);$A(n,t,b.Xu);const S=new $O(e,t,d);return n.ic.set(e,S),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),b.snapshot}),NA.apply(this,arguments)}function qO(n,e){return OA.apply(this,arguments)}function OA(){return OA=(0,ye.Z)(function*(n,e){const t=qe(n),r=t.ic.get(e),o=t.rc.get(r.targetId);if(o.length>1)return t.rc.set(r.targetId,o.filter(u=>!i(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Bm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),E0(t.remoteStore,r.targetId),Wm(t,r.targetId)}).catch(Qu))):(Wm(t,r.targetId),yield Bm(t.localStore,r.targetId,!0))}),OA.apply(this,arguments)}function PA(){return PA=(0,ye.Z)(function*(n,e,t){const r=eS(n);try{const o=yield function(u,d){const m=qe(u),w=jn.now(),b=d.reduce(($,Y)=>$.add(Y.key),$t());let S,N;return m.persistence.runTransaction("Locally write mutations","readwrite",$=>{let Y=Fs(),oe=$t();return m.Gi.getEntries($,b).next(Oe=>{Y=Oe,Y.forEach((Pe,Tt)=>{Tt.isValidDocument()||(oe=oe.add(Pe))})}).next(()=>m.localDocuments.getOverlayedDocuments($,Y)).next(Oe=>{S=Oe;const Pe=[];for(const Tt of d){const Pt=n0(Tt,S.get(Tt.key).overlayedDocument);null!=Pt&&Pe.push(new Ol(Tt.key,Pt,bT(Pt.value.mapValue),Tn.exists(!0)))}return m.mutationQueue.addMutationBatch($,w,Pe,d)}).next(Oe=>{N=Oe;const Pe=Oe.applyToLocalDocumentSet(S,oe);return m.documentOverlayCache.saveOverlays($,Oe.batchId,Pe)})}).then(()=>({batchId:N.batchId,changes:Cx(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let w=u.hc[u.currentUser.toKey()];w||(w=new $n(xt)),w=w.insert(d,m),u.hc[u.currentUser.toKey()]=w}(r,o.batchId,t),yield kl(r,o.changes),yield $m(r.remoteStore)}catch(o){const u=Gm(o,"Failed to persist write");t.reject(u)}}),PA.apply(this,arguments)}function zM(n,e){return kA.apply(this,arguments)}function kA(){return kA=(0,ye.Z)(function*(n,e){const t=qe(n);try{const r=yield fO(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.cc.get(u);d&&(vt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.nc=!0:o.modifiedDocuments.size>0?vt(d.nc):o.removedDocuments.size>0&&(vt(d.nc),d.nc=!1))}),yield kl(t,r,e)}catch(r){yield Qu(r)}}),kA.apply(this,arguments)}function qM(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ic.forEach((u,d)=>{const m=d.view.bu(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=qe(u);m.onlineState=d;let w=!1;m.queries.forEach((b,S)=>{for(const N of S.listeners)N.bu(d)&&(w=!0)}),w&&SA(m)}(r.eventManager,e),o.length&&r.sc.Wo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function KO(n,e,t){return FA.apply(this,arguments)}function FA(){return FA=(0,ye.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.cc.get(e),u=o&&o.key;if(u){let d=new $n(ze.comparator);d=d.insert(u,bn.newNoDocument(u,Dt.min()));const m=$t().add(u),w=new o0(Dt.min(),new Map,new mn(xt),d,m);yield zM(r,w),r.uc=r.uc.remove(u),r.cc.delete(e),HA(r)}else yield Bm(r.localStore,e,!1).then(()=>Wm(r,e,t)).catch(Qu)}),FA.apply(this,arguments)}function ZO(n,e){return LA.apply(this,arguments)}function LA(){return LA=(0,ye.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const o=yield hO(t.localStore,e);jA(t,r,null),BA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield kl(t,o)}catch(o){yield Qu(o)}}),LA.apply(this,arguments)}function YO(n,e,t){return VA.apply(this,arguments)}function VA(){return VA=(0,ye.Z)(function*(n,e,t){const r=qe(n);try{const o=yield function(u,d){const m=qe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let b;return m.mutationQueue.lookupMutationBatch(w,d).next(S=>(vt(null!==S),b=S.keys(),m.mutationQueue.removeMutationBatch(w,S))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,b,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,b)).next(()=>m.localDocuments.getDocuments(w,b))})}(r.localStore,e);jA(r,e,t),BA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield kl(r,o)}catch(o){yield Qu(o)}}),VA.apply(this,arguments)}function UA(){return UA=(0,ye.Z)(function*(n,e){const t=qe(n);Pl(t.remoteStore)||Ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=qe(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.lc.get(r)||[];o.push(e),t.lc.set(r,o)}catch(r){const o=Gm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),UA.apply(this,arguments)}function BA(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function jA(n,e,t){const r=qe(n);let o=r.hc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.hc[r.currentUser.toKey()]=o}}function Wm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||WM(n,r)})}function WM(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(E0(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),HA(n))}function $A(n,e,t){for(const r of t)r instanceof $M?(n.ac.addReference(r.key,e),JO(n,r)):r instanceof HM?(Ne("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||WM(n,r.key)):tt()}function JO(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Ne("SyncEngine","New document in limbo: "+t),n.oc.add(r),HA(n))}function HA(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new ze(Yt.fromString(e)),r=n.fc.next();n.cc.set(r,new HO(t)),n.uc=n.uc.insert(t,r),DD(n.remoteStore,new yh(ji(up(t.path)),r,2,bi.at))}}function kl(n,e,t){return GA.apply(this,arguments)}function GA(){return GA=(0,ye.Z)(function*(n,e,t){const r=qe(n),o=[],u=[],d=[];var m;r.ic.isEmpty()||(r.ic.forEach((m,w)=>{d.push(r._c(w,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,b?.fromCache?"not-current":"current"),b){o.push(b);const S=ZT.Ci(w.targetId,b);u.push(S)}}))}),yield Promise.all(d),r.sc.Wo(o),yield(m=(0,ye.Z)(function*(w,b){const S=qe(w);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>se.forEach(b,$=>se.forEach($.Si,Y=>S.persistence.referenceDelegate.addReference(N,$.targetId,Y)).next(()=>se.forEach($.Di,Y=>S.persistence.referenceDelegate.removeReference(N,$.targetId,Y)))))}catch(N){if(!di(N))throw N;Ne("LocalStore","Failed to update sequence numbers: "+N)}for(const N of b){const $=N.targetId;if(!N.fromCache){const Y=S.Ui.get($),Oe=Y.withLastLimboFreeSnapshotVersion(Y.snapshotVersion);S.Ui=S.Ui.insert($,Oe)}}}),function(w,b){return m.apply(this,arguments)})(r.localStore,u))}),GA.apply(this,arguments)}function XO(n,e){return zA.apply(this,arguments)}function zA(){return zA=(0,ye.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Ne("SyncEngine","User change. New user:",e.toKey());const r=yield IM(t.localStore,e);t.currentUser=e,(o=t).lc.forEach(d=>{d.forEach(m=>{m.reject(new xe(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield kl(t,r.ji)}var o}),zA.apply(this,arguments)}function eP(n,e){const t=qe(n),r=t.cc.get(e);if(r&&r.nc)return $t().add(r.key);{let o=$t();const u=t.rc.get(e);if(!u)return o;for(const d of u){const m=t.ic.get(d);o=o.unionWith(m.view.ju)}return o}}function tP(n,e){return qA.apply(this,arguments)}function qA(){return qA=(0,ye.Z)(function*(n,e){const t=qe(n),r=yield _D(t.localStore,e.query,!0),o=e.view.tc(r);return t.isPrimaryClient&&$A(t,e.targetId,o.Xu),o}),qA.apply(this,arguments)}function nP(n,e){return WA.apply(this,arguments)}function WA(){return WA=(0,ye.Z)(function*(n,e){const t=qe(n);return CM(t.localStore,e).then(r=>kl(t,r))}),WA.apply(this,arguments)}function rP(n,e,t,r){return KA.apply(this,arguments)}function KA(){return KA=(0,ye.Z)(function*(n,e,t,r){const o=qe(n),u=yield function(d,m){const w=qe(d),b=qe(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",S=>b.Tn(S,m).next(N=>N?w.localDocuments.getDocuments(S,N):se.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield $m(o.remoteStore):"acknowledged"===t||"rejected"===t?(jA(o,e,r||null),BA(o,e),m=e,qe(qe(o.localStore).mutationQueue).An(m)):tt(),yield kl(o,u)):Ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),KA.apply(this,arguments)}function ZA(){return ZA=(0,ye.Z)(function*(n,e){const t=qe(n);if(XA(t),eS(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield KM(t,r.toArray());t.dc=!0,yield IA(t.remoteStore,!0);for(const u of o)DD(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let o=Promise.resolve();t.rc.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(Wm(t,d),Bm(t.localStore,d,!0))),E0(t.remoteStore,d)}),yield o,yield KM(t,r),function(u){const d=qe(u);d.cc.forEach((m,w)=>{E0(d.remoteStore,w)}),d.ac.fs(),d.cc=new Map,d.uc=new $n(ze.comparator)}(t),t.dc=!1,yield IA(t.remoteStore,!1)}}),ZA.apply(this,arguments)}function KM(n,e,t){return YA.apply(this,arguments)}function YA(){return YA=(0,ye.Z)(function*(n,e,t){const r=qe(n),o=[],u=[];for(const d of e){let m;const w=r.rc.get(d);if(w&&0!==w.length){m=yield Um(r.localStore,ji(w[0]));for(const b of w){const S=r.ic.get(b),N=yield tP(r,S);N.snapshot&&u.push(N.snapshot)}}else{const b=yield bM(r.localStore,d);m=yield Um(r.localStore,b),yield RA(r,ZM(b),d,!1,m.resumeToken)}o.push(m)}return r.sc.Wo(u),o}),YA.apply(this,arguments)}function ZM(n){return NT(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function sP(n){const e=qe(n);return qe(qe(e.localStore).persistence).vi()}function oP(n,e,t,r){return QA.apply(this,arguments)}function QA(){return QA=(0,ye.Z)(function*(n,e,t,r){const o=qe(n);if(o.dc)return void Ne("SyncEngine","Ignoring unexpected query state notification.");const u=o.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield CM(o.localStore,l(u[0])),m=o0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Jn.EMPTY_BYTE_STRING);yield kl(o,d,m);break}case"rejected":yield Bm(o.localStore,e,!0),Wm(o,e,r);break;default:tt()}}),QA.apply(this,arguments)}function aP(n,e,t){return JA.apply(this,arguments)}function JA(){return JA=(0,ye.Z)(function*(n,e,t){const r=XA(n);if(r.dc){for(const o of e){if(r.rc.has(o)){Ne("SyncEngine","Adding an already active target "+o);continue}const u=yield bM(r.localStore,o),d=yield Um(r.localStore,u);yield RA(r,ZM(u),d.targetId,!1,d.resumeToken),DD(r.remoteStore,d)}for(const o of t)r.rc.has(o)&&(yield Bm(r.localStore,o,!1).then(()=>{E0(r.remoteStore,o),Wm(r,o)}).catch(Qu))}}),JA.apply(this,arguments)}function XA(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=zM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KO.bind(null,e),e.sc.Wo=VO.bind(null,e.eventManager),e.sc.wc=UO.bind(null,e.eventManager),e}function eS(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YO.bind(null,e),e}class YM{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.It=w0(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return wM(this.persistence,new _M,e.initialUser,this.It)}yc(e){return new yM(yD.Bs,this.It)}gc(e){return new xM}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class QM extends YM{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield eS(r.Ac.syncEngine),yield $m(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return wM(this.persistence,new _M,e.initialUser,this.It)}Tc(e,t){return new QN(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new wT(t,this.persistence);return new _T(e.asyncQueue,r)}yc(e){const t=KT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ls.withCacheSize(this.cacheSizeBytes):Ls.DEFAULT;return new WT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,RM(),ED(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new xM}}class cP extends QM{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const o=r.Ac.syncEngine;r.sharedClientState instanceof rA&&(r.sharedClientState.syncEngine={Fr:rP.bind(null,o),$r:oP.bind(null,o),Br:aP.bind(null,o),vi:sP.bind(null,o),Mr:nP.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,ye.Z)(function*(d){yield function iP(n,e){return ZA.apply(this,arguments)}(r.Ac.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}gc(e){const t=RM();if(!rA.C(t))throw new xe(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=KT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new rA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class tS{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>qM(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=XO.bind(null,r.syncEngine),yield IA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new LO}createDatastore(e){const t=w0(e.databaseInfo.databaseId),r=new wO(e.databaseInfo);return new DO(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>qM(this.syncEngine,m,0),d=MM.C()?new MM:new yO,new TO(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,w,b){const S=new GO(r,o,u,d,m,w);return b&&(S.dc=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=qe(t);Ne("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield jm(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function nS(n,e,t){if(!t)throw new xe(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function JM(n,e,t,r){if(!0===e&&!0===r)throw new xe(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function XM(n){if(!ze.isDocumentKey(n))throw new xe(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function eR(n){if(ze.isDocumentKey(n))throw new xe(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function CD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":tt()}function en(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=CD(n);throw new xe(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function tR(n,e){if(e<=0)throw new xe(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const nR=new Map;class rR{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,JM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class D0{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rR({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new xe(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rR(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new GE;switch(t.type){case"gapi":return new fT(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new xe(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=nR.get(e);t&&(Ne("ComponentProvider","Removing Datastore"),nR.delete(e),t.terminate())}(this),Promise.resolve()}}class Hn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Hn(this.firestore,e,this._key)}}class $i{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $i(this.firestore,e,this._query)}}class oc extends $i{constructor(e,t,r){super(e,t,up(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Hn(this.firestore,null,new ze(e))}withConverter(e){return new oc(this.firestore,e,this._path)}}function sR(n,e,...t){if(n=(0,Xt.m9)(n),nS("collection","path",e),n instanceof D0){const r=Yt.fromString(e,...t);return eR(r),new oc(n,null,r)}{if(!(n instanceof Hn||n instanceof oc))throw new xe(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Yt.fromString(e,...t));return eR(r),new oc(n.firestore,null,r)}}function TD(n,e,...t){if(n=(0,Xt.m9)(n),1===arguments.length&&(e=gT.R()),nS("doc","path",e),n instanceof D0){const r=Yt.fromString(e,...t);return XM(r),new Hn(n,null,new ze(r))}{if(!(n instanceof Hn||n instanceof oc))throw new xe(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Yt.fromString(e,...t));return XM(r),new Hn(n.firestore,n instanceof oc?n.converter:null,new ze(r))}}function oR(n,e){return n=(0,Xt.m9)(n),e=(0,Xt.m9)(e),(n instanceof Hn||n instanceof oc)&&(e instanceof Hn||e instanceof oc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function rS(n,e){return n=(0,Xt.m9)(n),e=(0,Xt.m9)(e),n instanceof $i&&e instanceof $i&&n.firestore===e.firestore&&i(n._query,e._query)&&n.converter===e.converter}function aR(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class AD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):fr("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class dP{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new pr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),o=Number(r);isNaN(o)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(o);return new BO(JSON.parse(u),t.length+o)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,ye.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class pP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ye.Z)(function*(u,d){const m=qe(u),w=l0(m.It)+"/documents",b={documents:d.map(Y=>c0(m.It,Y))},S=yield m._o("BatchGetDocuments",w,b,d.length),N=new Map;S.forEach(Y=>{const oe=function fN(n,e){return"found"in e?function(t,r){vt(!!r.found);const o=ic(t,r.found.name),u=fi(r.found.updateTime),d=new hi({mapValue:{fields:r.found.fields}});return bn.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){vt(!!r.missing),vt(!!r.readTime);const o=ic(t,r.missing),u=fi(r.readTime);return bn.newNoDocument(o,u)}(n,e):tt()}(m.It,Y);N.set(oe.key.toString(),oe)});const $=[];return d.forEach(Y=>{const oe=N.get(Y.toString());vt(!!oe),$.push(oe)}),$}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Pm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=ze.fromPath(o);e.mutations.push(new OT(u,e.precondition(u)))}),yield(r=(0,ye.Z)(function*(o,u){const d=qe(o),m=l0(d.It)+"/documents",w={writes:u.map(b=>d0(d.It,b))};yield d.ao("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tt();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Dt.min())?Tn.exists(!1):Tn.updateTime(t):Tn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new xe(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Tn.updateTime(t)}return Tn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class gP{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.kc=r.maxAttempts,this.xo=new iA(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,ye.Z)(function*(){const t=new pP(e.datastore),r=e.Mc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Fc(u)}))}).catch(o=>{e.Fc(o)})}))}Mc(e){try{const t=this.updateFunction(e);return!ch(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Ex(t)}return!1}}class mP{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Qr.UNAUTHENTICATED,this.clientId=gT.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,ye.Z)(function*(m){Ne("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Ne("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Gm(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function uR(n,e){return iS.apply(this,arguments)}function iS(){return iS=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ne("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ye.Z)(function*(u){r.isEqual(u)||(yield IM(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),iS.apply(this,arguments)}function cR(n,e){return sS.apply(this,arguments)}function sS(){return sS=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield oS(n);Ne("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>VM(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>VM(e.remoteStore,u)),n.onlineComponents=e}),sS.apply(this,arguments)}function oS(n){return aS.apply(this,arguments)}function aS(){return aS=(0,ye.Z)(function*(n){return n.offlineComponents||(Ne("FirestoreClient","Using default OfflineComponentProvider"),yield uR(n,new YM)),n.offlineComponents}),aS.apply(this,arguments)}function SD(n){return uS.apply(this,arguments)}function uS(){return uS=(0,ye.Z)(function*(n){return n.onlineComponents||(Ne("FirestoreClient","Using default OnlineComponentProvider"),yield cR(n,new tS)),n.onlineComponents}),uS.apply(this,arguments)}function lR(n){return oS(n).then(e=>e.persistence)}function xD(n){return oS(n).then(e=>e.localStore)}function cS(n){return SD(n).then(e=>e.remoteStore)}function lS(n){return SD(n).then(e=>e.syncEngine)}function Km(n){return dS.apply(this,arguments)}function dS(){return dS=(0,ye.Z)(function*(n){const e=yield SD(n),t=e.eventManager;return t.onListen=zO.bind(null,e.syncEngine),t.onUnlisten=qO.bind(null,e.syncEngine),t}),dS.apply(this,arguments)}function hR(n,e,t={}){const r=new pr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(o,u,d,m,w){const b=new AD({next:N=>{u.enqueueAndForget(()=>TA(o,S));const $=N.docs.has(d);!$&&N.fromCache?w.reject(new xe(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&N.fromCache&&m&&"server"===m.source?w.reject(new xe(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),S=new xA(up(d.path),b,{includeMetadataChanges:!0,Nu:!0});return bA(o,S)}(yield Km(n),n.asyncQueue,e,t,r)})),r.promise}function fR(n,e,t={}){const r=new pr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(o,u,d,m,w){const b=new AD({next:N=>{u.enqueueAndForget(()=>TA(o,S)),N.fromCache&&"server"===m.source?w.reject(new xe(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),S=new xA(d,b,{includeMetadataChanges:!0,Nu:!0});return bA(o,S)}(yield Km(n),n.asyncQueue,e,t,r)})),r.promise}class bP{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new iA(this,"async_queue_retry"),this.Wc=()=>{const t=ED();t&&Ne("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=ED();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=ED();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new pr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,ye.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!di(t))throw t;Ne("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,fr("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const o=DA.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.qc.push(o),o}zc(){this.Kc&&tt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function hS(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class CP{constructor(){this._progressObserver={},this._taskCompletionResolver=new pr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Gn extends D0{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new bP,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||pR(this),this._firestoreClient.terminate()}}function Ir(n){return n._firestoreClient||pR(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function pR(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new gx(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new mP(n._authCredentials,n._appCheckCredentials,n._queue,r)}function gR(n,e,t){const r=new pr;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield uR(n,t),yield cR(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(d=u).name?d.code===ce.FAILED_PRECONDITION||d.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;Vo("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var d})).then(()=>r.promise)}function mR(n){if(n._initialized||n._terminated)throw new xe(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ac{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ac(Jn.fromBase64String(e))}catch(t){throw new xe(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ac(Jn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Fl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class vp{constructor(e){this._methodName=e}}class MD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xt(this._lat,e._lat)||xt(this._long,e._long)}}const kP=/^__.*__$/;class FP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ol(e,this.data,this.fieldMask,t,this.fieldTransforms):new Om(e,this.data,t,this.fieldTransforms)}}class yR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ol(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function vR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt()}}class RD{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=o,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new RD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.ua(e),o}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.na(),o}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return PD(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(vR(this.sa)&&kP.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class LP{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||w0(e)}da(e,t,r,o=!1){return new RD({sa:e,methodName:t,fa:r,path:sn.emptyPath(),oa:!1,la:o},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function _p(n){const e=n._freezeSettings(),t=w0(n._databaseId);return new LP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ND(n,e,t,r,o,u={}){const d=n.da(u.merge||u.mergeFields?2:0,e,t,o);mS("Data must be an object, but it was:",d,r);const m=IR(r,d);let w,b;if(u.merge)w=new Bi(d.fieldMask),b=d.fieldTransforms;else if(u.mergeFields){const S=[];for(const N of u.mergeFields){const $=yS(e,N,t);if(!d.contains($))throw new xe(ce.INVALID_ARGUMENT,`Field '${$}' is specified in your field mask but missing from your input data.`);DR(S,$)||S.push($)}w=new Bi(S),b=d.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,b=d.fieldTransforms;return new FP(new hi(m),w,b)}class b0 extends vp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof b0}}function _R(n,e,t){return new RD({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class fS extends vp{_toFieldTransform(e){return new In(e.path,new me)}isEqual(e){return e instanceof fS}}class VP extends vp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=_R(this,e,!0),r=this._a.map(u=>wp(u,t)),o=new Me(r);return new In(e.path,o)}isEqual(e){return this===e}}class UP extends vp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=_R(this,e,!0),r=this._a.map(u=>wp(u,t)),o=new Ye(r);return new In(e.path,o)}isEqual(e){return this===e}}class BP extends vp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new De(e.It,T(e.It,this.wa));return new In(e.path,t)}isEqual(e){return this===e}}function pS(n,e,t,r){const o=n.da(1,e,t);mS("Data must be an object, but it was:",o,r);const u=[],d=hi.empty();Ju(r,(w,b)=>{const S=OD(e,w,t);b=(0,Xt.m9)(b);const N=o.ca(S);if(b instanceof b0)u.push(S);else{const $=wp(b,N);null!=$&&(u.push(S),d.set(S,$))}});const m=new Bi(u);return new yR(d,m,o.fieldTransforms)}function gS(n,e,t,r,o,u){const d=n.da(1,e,t),m=[yS(e,r,t)],w=[o];if(u.length%2!=0)throw new xe(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $=0;$<u.length;$+=2)m.push(yS(e,u[$])),w.push(u[$+1]);const b=[],S=hi.empty();for(let $=m.length-1;$>=0;--$)if(!DR(b,m[$])){const Y=m[$];let oe=w[$];oe=(0,Xt.m9)(oe);const Oe=d.ca(Y);if(oe instanceof b0)b.push(Y);else{const Pe=wp(oe,Oe);null!=Pe&&(b.push(Y),S.set(Y,Pe))}}const N=new Bi(b);return new yR(S,N,d.fieldTransforms)}function wR(n,e,t,r=!1){return wp(t,n.da(r?4:3,e))}function wp(n,e){if(ER(n=(0,Xt.m9)(n)))return mS("Unsupported field value:",e,n),IR(n,e);if(n instanceof vp)return function(t,r){if(!vR(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=wp(d,r.aa(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Xt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return T(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=jn.fromDate(t);return{timestampValue:u0(r.It,o)}}if(t instanceof jn){const o=new jn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:u0(r.It,o)}}if(t instanceof MD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ac)return{bytesValue:Nx(r.It,t._byteString)};if(t instanceof Hn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:PT(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${CD(t)}`)}(n,e)}function IR(n,e){const t={};return KE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ju(n,(r,o)=>{const u=wp(o,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function ER(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof jn||n instanceof MD||n instanceof ac||n instanceof Hn||n instanceof vp)}function mS(n,e,t){if(!ER(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=CD(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function yS(n,e,t){if((e=(0,Xt.m9)(e))instanceof Fl)return e._internalPath;if("string"==typeof e)return OD(n,e);throw PD("Field path arguments must be of type string or ",n,!1,void 0,t)}const jP=new RegExp("[~\\*/\\[\\]]");function OD(n,e,t){if(e.search(jP)>=0)throw PD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Fl(...e.split("."))._internalPath}catch{throw PD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function PD(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||d)&&(w+=" (found",u&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new xe(ce.INVALID_ARGUMENT,m+n+w)}function DR(n,e){return n.some(t=>t.isEqual(e))}class C0{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Hn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new $P(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(kD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class $P extends C0{data(){return super.data()}}function kD(n,e){return"string"==typeof e?OD(n,e):e instanceof Fl?e._internalPath:e._delegate._internalPath}function bR(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class T0{}function Ih(n,...e){for(const t of e)n=t._apply(n);return n}class HP extends T0{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=_p(e.firestore),r=function(o,u,d,m,w,b,S){let N;if(w.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new xe(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){MR(S,b);const Y=[];for(const oe of S)Y.push(xR(m,o,oe));N={arrayValue:{values:Y}}}else N=xR(m,o,S)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||MR(S,b),N=wR(d,"where",S,"in"===b||"not-in"===b);const $=kr.create(w,b,N);return function(Y,oe){if(oe.dt()){const Pe=sD(Y);if(null!==Pe&&!Pe.isEqual(oe.field))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Pe.toString()}' and '${oe.field.toString()}'`);const Tt=iD(Y);null!==Tt&&RR(0,oe.field,Tt)}const Oe=function(Pe,Tt){for(const Pt of Pe.filters)if(Tt.indexOf(Pt.op)>=0)return Pt.op;return null}(Y,function(Pe){switch(Pe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(oe.op));if(null!==Oe)throw new xe(ce.INVALID_ARGUMENT,Oe===oe.op?`Invalid query. You cannot use more than one '${oe.op.toString()}' filter.`:`Invalid query. You cannot use '${oe.op.toString()}' filters with '${Oe.toString()}' filters.`)}(o,$),$}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new $i(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new nc(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class zP extends T0{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new xe(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new fh(o,u);return function(m,w){if(null===iD(m)){const b=sD(m);null!==b&&RR(0,b,w.field)}}(r,d),d}(e._query,this.ma,this.pa);return new $i(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new nc(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class CR extends T0{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new $i(e.firestore,e.converter,X_(e._query,this.Ia,this.Ta))}}class TR extends T0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=SR(e,this.type,this.Ea,this.Aa);return new $i(e.firestore,e.converter,(o=t,new nc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class AR extends T0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=SR(e,this.type,this.Ea,this.Aa);return new $i(e.firestore,e.converter,(o=t,new nc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function SR(n,e,t,r){if(t[0]=(0,Xt.m9)(t[0]),t[0]instanceof C0)return function(o,u,d,m,w){if(!m)throw new xe(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const b=[];for(const S of cp(o))if(S.field.isKeyField())b.push(xl(u,m.key));else{const N=m.data.field(S.field);if(bm(N))throw new xe(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const $=S.field.canonicalString();throw new xe(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$}' (used as the orderBy) does not exist.`)}b.push(N)}return new tc(b,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=_p(n.firestore);return function(u,d,m,w,b,S){const N=u.explicitOrderBy;if(b.length>N.length)throw new xe(ce.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $=[];for(let Y=0;Y<b.length;Y++){const oe=b[Y];if(N[Y].field.isKeyField()){if("string"!=typeof oe)throw new xe(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof oe}`);if(!oD(u)&&-1!==oe.indexOf("/"))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${oe}' contains a slash.`);const Oe=u.path.child(Yt.fromString(oe));if(!ze.isDocumentKey(Oe))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Oe}' is not because it contains an odd number of segments.`);const Pe=new ze(Oe);$.push(xl(d,Pe))}else{const Oe=wR(m,w,oe);$.push(Oe)}}return new tc($,S)}(n._query,n.firestore._databaseId,o,e,t,r)}}function xR(n,e,t){if("string"==typeof(t=(0,Xt.m9)(t))){if(""===t)throw new xe(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oD(e)&&-1!==t.indexOf("/"))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Yt.fromString(t));if(!ze.isDocumentKey(r))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xl(n,new ze(r))}if(t instanceof Hn)return xl(n,t._key);throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${CD(t)}.`)}function MR(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function RR(n,e,t){if(!t.isEqual(e))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class vS{convertValue(e,t="none"){switch(lh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tt()}}convertObject(e,t){const r={};return Ju(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new MD(Xn(e.latitude),Xn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=YE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(rp(e));default:return null}}convertTimestamp(e){const t=Na(e);return new jn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Yt.fromString(e);vt(jx(r));const o=new Al(r.get(1),r.get(3)),u=new ze(r.popFirst(5));return o.isEqual(t)||fr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function FD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class XP extends vS{constructor(e){super(),this.firestore=e}convertBytes(e){return new ac(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hn(this.firestore,null,t)}}class Ip{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ll extends C0{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new A0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(kD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class A0 extends Ll{data(e={}){return super.data(e)}}class Eh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ip(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new A0(this._firestore,this._userDataWriter,r.key,r,new Ip(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new A0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ip(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new A0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ip(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,b=-1;return 0!==d.type&&(w=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),b=u.indexOf(d.doc.key)),{type:ek(d.type),doc:m,oldIndex:w,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ek(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt()}}function NR(n,e){return n instanceof Ll&&e instanceof Ll?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Eh&&e instanceof Eh&&n._firestore===e._firestore&&rS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Dh extends vS{constructor(e){super(),this.firestore=e}convertBytes(e){return new ac(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hn(this.firestore,null,t)}}function OR(n,e,t){n=en(n,Hn);const r=en(n.firestore,Gn),o=FD(n.converter,e,t);return Zm(r,[ND(_p(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Tn.none())])}function PR(n,e,t,...r){n=en(n,Hn);const o=en(n.firestore,Gn),u=_p(o);let d;return d="string"==typeof(e=(0,Xt.m9)(e))||e instanceof Fl?gS(u,"updateDoc",n._key,e,t,r):pS(u,"updateDoc",n._key,e),Zm(o,[d.toMutation(n._key,Tn.exists(!0))])}function kR(n,...e){var t,r,o;n=(0,Xt.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||hS(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(hS(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,b,S;if(n instanceof Hn)b=en(n.firestore,Gn),S=up(n._key.path),w={next:N=>{e[d]&&e[d](_S(b,n,N))},error:e[d+1],complete:e[d+2]};else{const N=en(n,$i);b=en(N.firestore,Gn),S=N._query;const $=new Dh(b);w={next:Y=>{e[d]&&e[d](new Eh(b,$,N,Y))},error:e[d+1],complete:e[d+2]},bR(n._query)}return function(N,$,Y,oe){const Oe=new AD(oe),Pe=new xA($,Oe,Y);return N.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return bA(yield Km(N),Pe)})),()=>{Oe.bc(),N.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return TA(yield Km(N),Pe)}))}}(Ir(b),S,m,w)}function Zm(n,e){return function(t,r){const o=new pr;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function WO(n,e,t){return PA.apply(this,arguments)}(yield lS(t),r,o)})),o.promise}(Ir(n),e)}function _S(n,e,t){const r=t.docs.get(e._key),o=new Dh(n);return new Ll(n,o,e._key,r,new Ip(t.hasPendingWrites,t.fromCache),e.converter)}const lk={maxAttempts:5};class FR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=_p(e)}set(e,t,r){this._verifyNotCommitted();const o=bh(e,this._firestore),u=FD(o.converter,t,r),d=ND(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,Tn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=bh(e,this._firestore);let d;return d="string"==typeof(t=(0,Xt.m9)(t))||t instanceof Fl?gS(this._dataReader,"WriteBatch.update",u._key,t,r,o):pS(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,Tn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=bh(e,this._firestore);return this._mutations=this._mutations.concat(new Pm(t._key,Tn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function bh(n,e){if((n=(0,Xt.m9)(n)).firestore!==e)throw new xe(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class dk extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=_p(e)}get(e){const t=bh(e,this._firestore),r=new XP(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return tt();const u=o[0];if(u.isFoundDocument())return new C0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new C0(this._firestore,r,t._key,null,t.converter);throw tt()})}set(e,t,r){const o=bh(e,this._firestore),u=FD(o.converter,t,r),d=ND(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=bh(e,this._firestore);let d;return d="string"==typeof(t=(0,Xt.m9)(t))||t instanceof Fl?gS(this._dataReader,"Transaction.update",u._key,t,r,o):pS(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=bh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=bh(e,this._firestore),r=new Dh(this._firestore);return super.get(e).then(o=>new Ll(this._firestore,r,t._key,o._document,new Ip(!1,!1),t.converter))}}function wS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function VR(){if(typeof Uint8Array>"u")throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function UR(){if(!function ZE(){return typeof atob<"u"}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ep=gl.SDK_VERSION,(0,gl._registerComponent)(new Ud.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),d=new Gn(new hx(t.getProvider("auth-internal")),new pT(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new xe(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Al(m.options.projectId,w)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),(0,gl.registerVersion)(dT,"3.7.2",n),(0,gl.registerVersion)(dT,"3.7.2","esm2017")}();class S0{constructor(e){this._delegate=e}static fromBase64String(e){return UR(),new S0(ac.fromBase64String(e))}static fromUint8Array(e){return VR(),new S0(ac.fromUint8Array(e))}toBase64(){return UR(),this._delegate.toBase64()}toUint8Array(){return VR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function IS(n){return function wk(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Ik{enableIndexedDbPersistence(e,t){return function AP(n,e){mR(n=en(n,Gn));const t=Ir(n),r=n._freezeSettings(),o=new tS;return gR(t,o,new QM(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function SP(n){mR(n=en(n,Gn));const e=Ir(n),t=n._freezeSettings(),r=new tS;return gR(e,r,new cP(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function xP(n){if(n._initialized&&!n._terminated)throw new xe(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new pr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!Pr.C())return Promise.resolve();const o=r+"main";yield Pr.delete(o)}),function(r){return t.apply(this,arguments)})(KT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class BR{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Al||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Vo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function iR(n,e,t,r={}){var o;const u=(n=en(n,D0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Vo("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=Qr.MOCK_USER;else{d=(0,Xt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new xe(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Qr(w)}n._authCredentials=new dx(new HE(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function RP(n){return function yP(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield lR(n),t=yield cS(n);return e.setNetworkEnabled(!0),function(r){const o=qe(r);return o._u.delete(0),I0(o)}(t)}))}(Ir(n=en(n,Gn)))}(this._delegate)}disableNetwork(){return function NP(n){return function vP(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield lR(n),t=yield cS(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(o){const u=qe(o);u._u.add(0),yield jm(u),u.gu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Ir(n=en(n,Gn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,JM("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function MP(n){return function(e){const t=new pr;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function QO(n,e){return UA.apply(this,arguments)}(yield lS(e),t)})),t.promise}(Ir(n=en(n,Gn)))}(this._delegate)}onSnapshotsInSync(e){return function ck(n,e){return function IP(n,e){const t=new AD(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Km(n),o=t,qe(r).Ru.add(o),void o.next();var r,o})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Km(n),o=t,void qe(r).Ru.delete(o);var r,o}))}}(Ir(n=en(n,Gn)),hS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ym(this,sR(this._delegate,e))}catch(t){throw fs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Uo(this,TD(this._delegate,e))}catch(t){throw fs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ps(this,function lP(n,e){if(n=en(n,D0),nS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new $i(n,null,(t=e,new nc(Yt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw fs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function hk(n,e,t){n=en(n,Gn);const r=Object.assign(Object.assign({},lk),t);return function(o){if(o.maxAttempts<1)throw new xe(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,d){const m=new pr;return o.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const w=yield function dR(n){return SD(n).then(e=>e.datastore)}(o);new gP(o.asyncQueue,w,d,u,m).run()})),m.promise}(Ir(n),o=>e(new dk(n,o)),r)}(this._delegate,t=>e(new jR(this,t)))}batch(){return Ir(this._delegate),new $R(new FR(this._delegate,e=>Zm(this._delegate,e)))}loadBundle(e){return function OP(n,e){const t=Ir(n=en(n,Gn)),r=new CP;return function EP(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,b){if(w instanceof Uint8Array)return aR(w,b);if(w instanceof ArrayBuffer)return aR(new Uint8Array(w),b);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new dP(w,d);var w}(t,w0(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function uP(n,e,t){const r=qe(n);var o;(o=(0,ye.Z)(function*(u,d,m){try{const w=yield d.getMetadata();if(yield function($,Y){const oe=qe($),Oe=fi(Y.createTime);return oe.persistence.runTransaction("hasNewerBundle","readonly",Pe=>oe.Ns.getBundleMetadata(Pe,Y.id)).then(Pe=>!!Pe&&Pe.createTime.compareTo(Oe)>=0)}(u.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:($=w).totalDocuments,bytesLoaded:$.totalBytes,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}),Promise.resolve(new Set);m._updateProgress(jM(w));const b=new jO(w,u.localStore,d.It);let S=yield d.mc();for(;S;){const $=yield b.Fu(S);$&&m._updateProgress($),S=yield d.mc()}const N=yield b.complete();return yield kl(u,N.Lu,void 0),yield function($,Y){const oe=qe($);return oe.persistence.runTransaction("Save bundle","readwrite",Oe=>oe.Ns.saveBundleMetadata(Oe,Y))}(u.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Bu)}catch(w){return Vo("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var $}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield lS(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function PP(n,e){return function DP(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const o=qe(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ns.getNamedQuery(u,r))}(yield xD(n),e)}))}(Ir(n=en(n,Gn)),e).then(t=>t?new $i(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ps(this,t):null)}}class LD extends vS{constructor(e){super(),this.firestore=e}convertBytes(e){return new S0(new ac(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Uo.forKey(t,this.firestore,null)}}class jR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new LD(e)}get(e){const t=Dp(e);return this._delegate.get(t).then(r=>new x0(this._firestore,new Ll(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Dp(e);return r?(wS("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Dp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Dp(e);return this._delegate.delete(t),this}}class $R{constructor(e){this._delegate=e}set(e,t,r){const o=Dp(e);return r?(wS("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Dp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Dp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ep{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new A0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new M0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ep.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Ep(e,new LD(e),t),o.set(t,u)),u}}Ep.INSTANCES=new WeakMap;class Uo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new LD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Uo(t,new Hn(t._delegate,r,new ze(e)))}static forKey(e,t,r){return new Uo(t,new Hn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ym(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ym(this.firestore,sR(this._delegate,e))}catch(t){throw fs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Xt.m9)(e))instanceof Hn&&oR(this._delegate,e)}set(e,t){t=wS("DocumentReference.set",t);try{return t?OR(this._delegate,e,t):OR(this._delegate,e)}catch(r){throw fs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?PR(this._delegate,e):PR(this._delegate,e,t,...r)}catch(o){throw fs(o,"updateDoc()","DocumentReference.update()")}}delete(){return function ak(n){return Zm(en(n.firestore,Gn),[new Pm(n._key,Tn.none())])}(this._delegate)}onSnapshot(...e){const t=HR(e),r=GR(e,o=>new x0(this.firestore,new Ll(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return kR(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function nk(n){n=en(n,Hn);const e=en(n.firestore,Gn),t=Ir(e),r=new Dh(e);return function _P(n,e){const t=new pr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(o,u,d){try{const m=yield function(w,b){const S=qe(w);return S.persistence.runTransaction("read document","readonly",N=>S.localDocuments.getDocument(N,b))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new xe(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Gm(m,`Failed to get document '${u} from cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield xD(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Ll(e,r,n._key,o,new Ip(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function rk(n){n=en(n,Hn);const e=en(n.firestore,Gn);return hR(Ir(e),n._key,{source:"server"}).then(t=>_S(e,n,t))}(this._delegate):function tk(n){n=en(n,Hn);const e=en(n.firestore,Gn);return hR(Ir(e),n._key).then(t=>_S(e,n,t))}(this._delegate),t.then(r=>new x0(this.firestore,new Ll(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Uo(this.firestore,this._delegate.withConverter(e?Ep.getInstance(this.firestore,e):null))}}function fs(n,e,t){return n.message=n.message.replace(e,t),n}function HR(n){for(const e of n)if("object"==typeof e&&!IS(e))return e;return{}}function GR(n,e){var t,r;let o;return o=IS(n[0])?n[0]:IS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class x0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Uo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return NR(this._delegate,e._delegate)}}class M0 extends x0{data(e){const t=this._delegate.data(e);return function $E(n,e){n||tt()}(void 0!==t),t}}class ps{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new LD(e)}where(e,t,r){try{return new ps(this.firestore,Ih(this._delegate,function GP(n,e,t){const r=e,o=kD("where",n);return new HP(o,r,t)}(e,t,r)))}catch(o){throw fs(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ps(this.firestore,Ih(this._delegate,function qP(n,e="asc"){const t=e,r=kD("orderBy",n);return new zP(r,t)}(e,t)))}catch(r){throw fs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ps(this.firestore,Ih(this._delegate,function WP(n){return tR("limit",n),new CR("limit",n,"F")}(e)))}catch(t){throw fs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ps(this.firestore,Ih(this._delegate,function KP(n){return tR("limitToLast",n),new CR("limitToLast",n,"L")}(e)))}catch(t){throw fs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ps(this.firestore,Ih(this._delegate,function ZP(...n){return new TR("startAt",n,!0)}(...e)))}catch(t){throw fs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ps(this.firestore,Ih(this._delegate,function YP(...n){return new TR("startAfter",n,!1)}(...e)))}catch(t){throw fs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ps(this.firestore,Ih(this._delegate,function QP(...n){return new AR("endBefore",n,!1)}(...e)))}catch(t){throw fs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ps(this.firestore,Ih(this._delegate,function JP(...n){return new AR("endAt",n,!0)}(...e)))}catch(t){throw fs(t,"endAt()","Query.endAt()")}}isEqual(e){return rS(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function sk(n){n=en(n,$i);const e=en(n.firestore,Gn),t=Ir(e),r=new Dh(e);return function wP(n,e){const t=new pr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(o,u,d){try{const m=yield _D(o,u,!0),w=new GM(u,m.Hi),b=w.Wu(m.documents),S=w.applyChanges(b,!1);d.resolve(S.snapshot)}catch(m){const w=Gm(m,`Failed to execute query '${u} against cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield xD(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Eh(e,r,n,o))}(this._delegate):"server"===e?.source?function ok(n){n=en(n,$i);const e=en(n.firestore,Gn),t=Ir(e),r=new Dh(e);return fR(t,n._query,{source:"server"}).then(o=>new Eh(e,r,n,o))}(this._delegate):function ik(n){n=en(n,$i);const e=en(n.firestore,Gn),t=Ir(e),r=new Dh(e);return bR(n._query),fR(t,n._query).then(o=>new Eh(e,r,n,o))}(this._delegate),t.then(r=>new ES(this.firestore,new Eh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=HR(e),r=GR(e,o=>new ES(this.firestore,new Eh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return kR(this._delegate,t,r)}withConverter(e){return new ps(this.firestore,this._delegate.withConverter(e?Ep.getInstance(this.firestore,e):null))}}class Dk{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new M0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ES{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ps(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new M0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Dk(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new M0(this._firestore,r))})}isEqual(e){return NR(this._delegate,e._delegate)}}class Ym extends ps{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Uo(this.firestore,e):null}doc(e){try{return new Uo(this.firestore,void 0===e?TD(this._delegate):TD(this._delegate,e))}catch(t){throw fs(t,"doc()","CollectionReference.doc()")}}add(e){return function uk(n,e){const t=en(n.firestore,Gn),r=TD(n),o=FD(n.converter,e);return Zm(t,[ND(_p(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Tn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Uo(this.firestore,t))}isEqual(e){return oR(this._delegate,e._delegate)}withConverter(e){return new Ym(this.firestore,this._delegate.withConverter(e?Ep.getInstance(this.firestore,e):null))}}function Dp(n){return en(n,Hn)}class DS{constructor(...e){this._delegate=new Fl(...e)}static documentId(){return new DS(sn.keyField().canonicalString())}isEqual(e){return(e=(0,Xt.m9)(e))instanceof Fl&&this._delegate._internalPath.isEqual(e._internalPath)}}class bp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function pk(){return new fS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new bp(e)}static delete(){const e=function fk(){return new b0("deleteField")}();return e._methodName="FieldValue.delete",new bp(e)}static arrayUnion(...e){const t=function gk(...n){return new VP("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new bp(t)}static arrayRemove(...e){const t=function mk(...n){return new UP("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new bp(t)}static increment(e){const t=function yk(n){return new BP("increment",n)}(e);return t._methodName="FieldValue.increment",new bp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const bk={Firestore:BR,GeoPoint:MD,Timestamp:jn,Blob:S0,Transaction:jR,WriteBatch:$R,DocumentReference:Uo,DocumentSnapshot:x0,Query:ps,QueryDocumentSnapshot:M0,QuerySnapshot:ES,CollectionReference:Ym,FieldPath:DS,FieldValue:bp,setLogLevel:function Ek(n){!function lx(n){bl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function zR(n,e){return function Ak(n,e=Lg.z){return new Ar.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function bS(n,e){return zR(n,e).pipe((0,wt.U)(t=>({payload:t,type:"query"})))}function VD(n,e){return bS(n,e).pipe(af(void 0),Fn(),(0,wt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=o.find(S=>S.doc.ref.isEqual(d.ref)),b=t?.payload.docs.find(S=>S.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&b&&JSON.stringify(b.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function qR(n,e,t){return VD(n,t).pipe(Dd((r,o)=>function xk(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Mk(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return CS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return CS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return CS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function sx(n,e=Qc.y){return n=n??NI,(0,si.e)((t,r)=>{let o,u=!0;t.subscribe((0,yr.x)(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}(),(0,wt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function CS(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function WR(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function Tk(n){(function Ck(n,e){n.INTERNAL.registerComponent(new Ud.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},bk)))})(n,(e,t)=>new BR(e,t,new Ik)),n.registerVersion("@firebase/firestore-compat","0.2.2")}(VC.Z);class KR{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=VD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,wt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(af(void 0),Fn(),as(([r,o])=>o.length>0||!r),(0,wt.U)(([r,o])=>o),Yn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Dd((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=WR(e);return qR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Yn.iC)}valueChanges(e={}){return bS(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Yn.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(Yn.iC)}add(e){return this.ref.add(e)}doc(e){return new ZR(this.ref.doc(e),this.afs)}}class ZR{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=JR(r,t);return new KR(o,u,this.afs)}snapshotChanges(){return function Sk(n,e){return zR(n,e).pipe(af(void 0),Fn(),(0,wt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Yn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,wt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ln.D)(this.ref.get(e)).pipe(Yn.iC)}}class Rk{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?VD(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),as(t=>t.length>0),Yn.iC):VD(this.query,this.afs.schedulers.outsideAngular).pipe(Yn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Dd((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=WR(e);return qR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Yn.iC)}valueChanges(e={}){return bS(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Yn.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(Yn.iC)}}const YR=new g.OlP("angularfire2.enableFirestorePersistence"),QR=new g.OlP("angularfire2.firestore.persistenceSettings"),Nk=new g.OlP("angularfire2.firestore.settings"),Ok=new g.OlP("angularfire2.firestore.use-emulator");function JR(n,e=(t=>t)){return{query:e(n),ref:n}}let XR=(()=>{class n{constructor(t,r,o,u,d,m,w,b,S,N,$,Y,oe,Oe,Pe,Tt,Pt){this.schedulers=w;const Lt=(0,ui.on)(t,m,r),Vt=S;N&&xI(Lt,m,$,oe,Oe,Pe,Y,Tt),[this.firestore,this.persistenceEnabled$]=(0,ui.cc)(`${Lt.name}.firestore`,"AngularFirestore",Lt.name,()=>{const kt=m.runOutsideAngular(()=>Lt.firestore());if(u&&kt.settings(u),Vt&&kt.useEmulator(...Vt),o&&!lr(d)){const Ht=()=>{try{return(0,ln.D)(kt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(Jr){return typeof console<"u"&&console.warn(Jr),rt(!1)}};return[kt,m.runOutsideAngular(Ht)]}return[kt,rt(!1)]},[u,Vt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=JR(o,r),m=this.schedulers.ngZone.run(()=>u);return new KR(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new Rk(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new ZR(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ui.Dh),g.LFG(ui.xv,8),g.LFG(YR,8),g.LFG(Nk,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Yn.HU),g.LFG(QR,8),g.LFG(Ok,8),g.LFG(Gu,8),g.LFG(zv,8),g.LFG(qv,8),g.LFG(Wv,8),g.LFG(Kv,8),g.LFG(Hu,8),g.LFG(SI,8),g.LFG(Hv,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Pk=(()=>{class n{constructor(){TI.Z.registerVersion("angularfire",Yn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:YR,useValue:!0},{provide:QR,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[XR]}),n})(),kk=(()=>{class n{constructor(t){this.fs=t}getAllUsers(){return this.fs.collection("users").stateChanges()}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(XR))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Fk(n,e){1&n&&(g.TgZ(0,"a",9),g._uU(1,"Admin Profile"),g.qZA())}let Lk=(()=>{class n{constructor(t,r){this.as=t,this.us=r,this.isOpen=!1,this.isUser=!1,this.isAdmin=!1}ngOnInit(){this.as.user.subscribe(t=>{this.isUser=!!t}),this.as.user.subscribe(t=>{this.isAdmin="admin@gmail.com"==t?.email})}logout(){this.as.logout()}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(zu),g.Y36(kk))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-navbar"]],decls:14,vars:1,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark","ps-3"],[1,"container-fluid"],["routerLink","/home",1,"navbar-brand"],["id","navbarColor01",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["class","nav-link","routerLink","/admin",4,"ngIf"],["routerLink","/user",1,"nav-link"],[1,"btn","btn-primary","rounded-0",3,"click"],["routerLink","/admin",1,"nav-link"]],template:function(t,r){1&t&&(g.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),g._uU(3,"Home"),g.qZA(),g.TgZ(4,"div",3)(5,"ul",4)(6,"li",5),g.YNc(7,Fk,2,0,"a",6),g.qZA(),g.TgZ(8,"li",5)(9,"a",7),g._uU(10,"User Profile"),g.qZA()(),g.TgZ(11,"li",5)(12,"button",8),g.NdJ("click",function(){return r.logout()}),g._uU(13,"Logout"),g.qZA()()()()()()),2&t&&(g.xp6(7),g.Q6J("ngIf",r.isAdmin))},dependencies:[Pn,Tf]}),n})();function Vk(n,e){1&n&&g._UZ(0,"app-navbar")}let Uk=(()=>{class n{constructor(t){this.as=t,this.title="Project",this.isOpen=!1,this.isUser=!1,this.isUserAdmin=!1}ngOnInit(){this.as.user.subscribe(t=>{t?(this.isUser=!0,this.as.userId=t.uid):this.isUser=!1})}admin(){this.as.user.subscribe(t=>{this.isUserAdmin=!(!t||"ifESFXxDIzPRSv3cqAFHmP5NfPs1"!==t.uid)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(zu))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:1,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(g.YNc(0,Vk,1,0,"app-navbar",0),g._UZ(1,"router-outlet")),2&t&&g.Q6J("ngIf",r.isUser)},dependencies:[Pn,Ew,Lk]}),n})();const eN_firebase={projectId:"project-3adc7",appId:"1:25220960994:web:a6e5a5b949e33515a884bb",storageBucket:"project-3adc7.appspot.com",apiKey:"AIzaSyBVyvTB_vT_1wGZd_ve4fsQotuR9YoWSzo",authDomain:"project-3adc7.firebaseapp.com",messagingSenderId:"25220960994",measurementId:"G-7JFKH9MW56"};let Bk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[Uk]}),n.\u0275inj=g.cJS({imports:[Nc,Fg,Dy,Su,ui.hO.initializeApp(eN_firebase),Pk]}),n})();(0,g.G48)(),au().bootstrapModule(Bk).catch(n=>console.error(n))},5867:(ot,Te,k)=>{k.d(Te,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=k(9681);(0,g.registerVersion)("firebase","9.13.0","app")},127:(ot,Te,k)=>{k.d(Te,{Z:()=>g.Z});var g=k(3942);g.Z.registerVersion("firebase","9.13.0","app-compat")},1277:(ot,Te,k)=>{k.r(Te);var g=k(5861),J=k(3942),O=k(2090),ie=k(9681),re=k(1877),le=k(655),ue=k(4859);const we=function Le(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},et=function Se(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Qe=new re.Yd("@firebase/auth");function nt(y,...h){Qe.logLevel<=re.in.ERROR&&Qe.error(`Auth (${ie.SDK_VERSION}): ${y}`,...h)}function Ae(y,...h){throw je(y,...h)}function ve(y,...h){return je(y,...h)}function Ie(y,h,p){const _=Object.assign(Object.assign({},et()),{[h]:p});return new O.LL("auth","Firebase",_).create(h,{appName:y.name})}function Ue(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&Ae(y,"argument-error"),Ie(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(y,...h){if("string"!=typeof y){const p=h[0],_=[...h.slice(1)];return _[0]&&(_[0].appName=y.name),y._errorFactory.create(p,..._)}return ge.create(y,...h)}function V(y,h,...p){if(!y)throw je(h,...p)}function pe(y){const h="INTERNAL ASSERTION FAILED: "+y;throw nt(h),new Error(h)}function z(y,h){y||pe(h)}const Q=new Map;function te(y){z(y instanceof Function,"Expected a class definition");let h=Q.get(y);return h?(z(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,Q.set(y,h),h)}function Re(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function at(){return"http:"===Kt()||"https:"===Kt()}function Kt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class nn{constructor(h,p){this.shortDelay=h,this.longDelay=p,z(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Ut(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(at()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function yn(y,h){z(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class qt{static initialize(h,p,_){this.fetchImpl=h,p&&(this.headersImpl=p),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Zt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Er=new nn(3e4,6e4);function At(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function un(y,h,p,_){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,g.Z)(function*(y,h,p,_,A={}){return mi(y,A,(0,g.Z)(function*(){let R={},G={};_&&("GET"===h?G=_:R={body:JSON.stringify(_)});const ae=(0,O.xO)(Object.assign({key:y.config.apiKey},G)).slice(1),Fe=yield y._getAdditionalHeaders();return Fe["Content-Type"]="application/json",y.languageCode&&(Fe["X-Firebase-Locale"]=y.languageCode),qt.fetch()(yi(y,y.config.apiHost,p,ae),Object.assign({method:h,headers:Fe,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function mi(y,h,p){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,g.Z)(function*(y,h,p){y._canInitEmulator=!1;const _=Object.assign(Object.assign({},Zt),h);try{const A=new Xr(y),R=yield Promise.race([p(),A.promise]);A.clearNetworkTimeout();const G=yield R.json();if("needConfirmation"in G)throw ei(y,"account-exists-with-different-credential",G);if(R.ok&&!("errorMessage"in G))return G;{const ae=R.ok?G.errorMessage:G.error.message,[Fe,Ze]=ae.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw ei(y,"credential-already-in-use",G);if("EMAIL_EXISTS"===Fe)throw ei(y,"email-already-in-use",G);if("USER_DISABLED"===Fe)throw ei(y,"user-disabled",G);const ht=_[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(Ze)throw Ie(y,ht,Ze);Ae(y,ht)}}catch(A){if(A instanceof O.ZR)throw A;Ae(y,"network-request-failed")}})).apply(this,arguments)}function Lr(y,h,p,_){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,g.Z)(function*(y,h,p,_,A={}){const R=yield un(y,h,p,_,A);return"mfaPendingCredential"in R&&Ae(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function yi(y,h,p,_){const A=`${h}${p}?${_}`;return y.config.emulator?yn(y.config,A):`${y.config.apiScheme}://${A}`}class Xr{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,_)=>{this.timer=setTimeout(()=>_(ve(this.auth,"network-request-failed")),Er.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ei(y,h,p){const _={appName:y.name};p.email&&(_.email=p.email),p.phoneNumber&&(_.phoneNumber=p.phoneNumber);const A=ve(y,h,_);return A.customData._tokenResponse=p,A}function Ke(){return(Ke=(0,g.Z)(function*(y,h){return un(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function gr(y,h){return gs.apply(this,arguments)}function gs(){return(gs=(0,g.Z)(function*(y,h){return un(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function zn(y,h){return ti.apply(this,arguments)}function ti(){return(ti=(0,g.Z)(function*(y,h){return un(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Ci(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function fn(){return(fn=(0,g.Z)(function*(y,h=!1){const p=(0,O.m9)(y),_=yield p.getIdToken(h),A=it(_);V(A&&A.exp&&A.auth_time&&A.iat,p.auth,"internal-error");const R="object"==typeof A.firebase?A.firebase:void 0,G=R?.sign_in_provider;return{claims:A,token:_,authTime:Ci(dt(A.auth_time)),issuedAtTime:Ci(dt(A.iat)),expirationTime:Ci(dt(A.exp)),signInProvider:G||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function dt(y){return 1e3*Number(y)}function it(y){var h;const[p,_,A]=y.split(".");if(void 0===p||void 0===_||void 0===A)return nt("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,O.tV)(_);return R?JSON.parse(R):(nt("Failed to decode base64 JWT payload"),null)}catch(R){return nt("Caught error parsing JWT payload as JSON",null===(h=R)||void 0===h?void 0:h.toString()),null}}function ur(y,h){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,g.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(_){throw _ instanceof O.ZR&&Vr(_)&&y.auth.currentUser===y&&(yield y.auth.signOut()),_}})).apply(this,arguments)}function Vr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class bt{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const A=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const _=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),_)}iteration(){var h=this;return(0,g.Z)(function*(){var p;try{yield h.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===(null===(p=_)||void 0===p?void 0:p.code)&&h.schedule(!0))}h.schedule()})()}}class ms{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ci(this.lastLoginAt),this.creationTime=Ci(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Qt(y){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,g.Z)(function*(y){var h;const p=y.auth,_=yield y.getIdToken(),A=yield ur(y,zn(p,{idToken:_}));V(A?.users.length,p,"internal-error");const R=A.users[0];y._notifyReloadListener(R);const G=null!==(h=R.providerUserInfo)&&void 0!==h&&h.length?Xe(R.providerUserInfo):[],ae=br(y.providerData,G),ht=!!y.isAnonymous&&!(y.email&&R.passwordHash||ae?.length),ft={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ae,metadata:new ms(R.createdAt,R.lastLoginAt),isAnonymous:ht};Object.assign(y,ft)})).apply(this,arguments)}function qn(){return(qn=(0,g.Z)(function*(y){const h=(0,O.m9)(y);yield Qt(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function br(y,h){return[...y.filter(_=>!h.some(A=>A.providerId===_.providerId)),...h]}function Xe(y){return y.map(h=>{var{providerId:p}=h,_=(0,le._T)(h,["providerId"]);return{providerId:p,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function Je(){return(Je=(0,g.Z)(function*(y,h){const p=yield mi(y,{},(0,g.Z)(function*(){const _=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:A,apiKey:R}=y.config,G=yi(y,A,"/v1/token",`key=${R}`),ae=yield y._getAdditionalHeaders();return ae["Content-Type"]="application/x-www-form-urlencoded",qt.fetch()(G,{method:"POST",headers:ae,body:_})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class _t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){V(h.idToken,"internal-error"),V(typeof h.idToken<"u","internal-error"),V(typeof h.refreshToken<"u","internal-error");const p="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function tn(y){const h=it(y);return V(h,"internal-error"),V(typeof h.exp<"u","internal-error"),V(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var _=this;return(0,g.Z)(function*(){return V(!_.accessToken||_.refreshToken,h,"user-token-expired"),p||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(h,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var _=this;return(0,g.Z)(function*(){const{accessToken:A,refreshToken:R,expiresIn:G}=yield function be(y,h){return Je.apply(this,arguments)}(h,p);_.updateTokensAndExpiration(A,R,Number(G))})()}updateTokensAndExpiration(h,p,_){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(h,p){const{refreshToken:_,accessToken:A,expirationTime:R}=p,G=new _t;return _&&(V("string"==typeof _,"internal-error",{appName:h}),G.refreshToken=_),A&&(V("string"==typeof A,"internal-error",{appName:h}),G.accessToken=A),R&&(V("number"==typeof R,"internal-error",{appName:h}),G.expirationTime=R),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new _t,this.toJSON())}_performRefresh(){return pe("not implemented")}}function yt(y,h){V("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class Mt{constructor(h){var{uid:p,auth:_,stsTokenManager:A}=h,R=(0,le._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=_,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new ms(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,g.Z)(function*(){const _=yield ur(p,p.stsTokenManager.getToken(p.auth,h));return V(_,p.auth,"internal-error"),p.accessToken!==_&&(p.accessToken=_,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),_})()}getIdTokenResult(h){return function Ln(y){return fn.apply(this,arguments)}(this,h)}reload(){return function Jt(y){return qn.apply(this,arguments)}(this)}_assign(h){this!==h&&(V(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new Mt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var _=this;return(0,g.Z)(function*(){let A=!1;h.idToken&&h.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(h),A=!0),p&&(yield Qt(_)),yield _.auth._persistUserIfCurrent(_),A&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var h=this;return(0,g.Z)(function*(){const p=yield h.getIdToken();return yield ur(h,function Bo(y,h){return Ke.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var _,A,R,G,ae,Fe,Ze,ht;const ft=null!==(_=p.displayName)&&void 0!==_?_:void 0,dr=null!==(A=p.email)&&void 0!==A?A:void 0,ki=null!==(R=p.phoneNumber)&&void 0!==R?R:void 0,Id=null!==(G=p.photoURL)&&void 0!==G?G:void 0,Dy=null!==(ae=p.tenantId)&&void 0!==ae?ae:void 0,Su=null!==(Fe=p._redirectEventId)&&void 0!==Fe?Fe:void 0,Wp=null!==(Ze=p.createdAt)&&void 0!==Ze?Ze:void 0,$0=null!==(ht=p.lastLoginAt)&&void 0!==ht?ht:void 0,{uid:by,emailVerified:Kp,isAnonymous:Cy,providerData:Zp,stsTokenManager:Yp}=p;V(by&&Yp,h,"internal-error");const Qp=_t.fromJSON(this.name,Yp);V("string"==typeof by,h,"internal-error"),yt(ft,h.name),yt(dr,h.name),V("boolean"==typeof Kp,h,"internal-error"),V("boolean"==typeof Cy,h,"internal-error"),yt(ki,h.name),yt(Id,h.name),yt(Dy,h.name),yt(Su,h.name),yt(Wp,h.name),yt($0,h.name);const rt=new Mt({uid:by,auth:h,email:dr,emailVerified:Kp,displayName:ft,isAnonymous:Cy,photoURL:Id,phoneNumber:ki,tenantId:Dy,stsTokenManager:Qp,createdAt:Wp,lastLoginAt:$0});return Zp&&Array.isArray(Zp)&&(rt.providerData=Zp.map(Rs=>Object.assign({},Rs))),Su&&(rt._redirectEventId=Su),rt}static _fromIdTokenResponse(h,p,_=!1){return(0,g.Z)(function*(){const A=new _t;A.updateFromServerResponse(p);const R=new Mt({uid:p.localId,auth:h,stsTokenManager:A,isAnonymous:_});return yield Qt(R),R})()}}const L=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,_){var A=this;return(0,g.Z)(function*(){A.storage[p]=_})()}_get(p){var _=this;return(0,g.Z)(function*(){const A=_.storage[p];return void 0===A?null:A})()}_remove(p){var _=this;return(0,g.Z)(function*(){delete _.storage[p]})()}_addListener(p,_){}_removeListener(p,_){}}return y.type="NONE",y})();function q(y,h,p){return`firebase:${y}:${h}:${p}`}class _e{constructor(h,p,_){this.persistence=h,this.auth=p,this.userKey=_;const{config:A,name:R}=this.auth;this.fullUserKey=q(this.userKey,A.apiKey,R),this.fullPersistenceKey=q("persistence",A.apiKey,R),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?Mt._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,g.Z)(function*(){if(p.persistence===h)return;const _=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,_?p.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,_="authUser"){return(0,g.Z)(function*(){if(!p.length)return new _e(te(L),h,_);const A=(yield Promise.all(p.map(function(){var Ze=(0,g.Z)(function*(ht){if(yield ht._isAvailable())return ht});return function(ht){return Ze.apply(this,arguments)}}()))).filter(Ze=>Ze);let R=A[0]||te(L);const G=q(_,h.config.apiKey,h.name);let ae=null;for(const Ze of p)try{const ht=yield Ze._get(G);if(ht){const ft=Mt._fromJSON(h,ht);Ze!==R&&(ae=ft),R=Ze;break}}catch{}const Fe=A.filter(Ze=>Ze._shouldAllowMigration);return R._shouldAllowMigration&&Fe.length?(R=Fe[0],ae&&(yield R._set(G,ae.toJSON())),yield Promise.all(p.map(function(){var Ze=(0,g.Z)(function*(ht){if(ht!==R)try{yield ht._remove(G)}catch{}});return function(ht){return Ze.apply(this,arguments)}}())),new _e(R,h,_)):new _e(R,h,_)})()}}function Z(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(dn(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(He(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Ve(h))return"Blackberry";if($e(h))return"Webos";if(ut(h))return"Safari";if((h.includes("chrome/")||Wt(h))&&!h.includes("edge/"))return"Chrome";if(Gt(h))return"Android";{const _=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function He(y=(0,O.z$)()){return/firefox\//i.test(y)}function ut(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Wt(y=(0,O.z$)()){return/crios\//i.test(y)}function dn(y=(0,O.z$)()){return/iemobile/i.test(y)}function Gt(y=(0,O.z$)()){return/android/i.test(y)}function Ve(y=(0,O.z$)()){return/blackberry/i.test(y)}function $e(y=(0,O.z$)()){return/webos/i.test(y)}function Ft(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Us(y=(0,O.z$)()){return Ft(y)||Gt(y)||$e(y)||Ve(y)||/windows phone/i.test(y)||dn(y)}function ys(y,h=[]){let p;switch(y){case"Browser":p=Z((0,O.z$)());break;case"Worker":p=`${Z((0,O.z$)())}-${y}`;break;default:p=y}const _=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${ie.SDK_VERSION}/${_}`}class ho{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const _=R=>new Promise((G,ae)=>{try{G(h(R))}catch(Fe){ae(Fe)}});_.onAbort=p,this.queue.push(_);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,g.Z)(function*(){var _;if(p.auth.currentUser===h)return;const A=[];try{for(const R of p.queue)yield R(h),R.onAbort&&A.push(R.onAbort)}catch(R){A.reverse();for(const G of A)try{G()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:null===(_=R)||void 0===_?void 0:_.message})}})()}}class Rt{constructor(h,p,_){this.app=h,this.heartbeatServiceProvider=p,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bs(this),this.idTokenSubscription=new Bs(this),this.beforeStateQueue=new ho(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(h,p){var _=this;return p&&(this._popupRedirectResolver=te(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var A,R;if(!_._deleted&&(_.persistenceManager=yield _e.create(_,h),!_._deleted)){if(null!==(A=_._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(p),_.lastNotifiedUid=(null===(R=_.currentUser)||void 0===R?void 0:R.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,g.Z)(function*(){var _;const A=yield p.assertedPersistence.getCurrentUser();let R=A,G=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const ae=null===(_=p.redirectUser)||void 0===_?void 0:_._redirectEventId,Fe=R?._redirectEventId,Ze=yield p.tryRedirectSignIn(h);(!ae||ae===Fe)&&Ze?.user&&(R=Ze.user,G=!0)}if(!R)return p.directlySetCurrentUser(null);if(!R._redirectEventId){if(G)try{yield p.beforeStateQueue.runMiddleware(R)}catch(ae){R=A,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(ae))}return R?p.reloadAndSetCurrentUserOrClear(R):p.directlySetCurrentUser(null)}return V(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===R._redirectEventId?p.directlySetCurrentUser(R):p.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(h){var p=this;return(0,g.Z)(function*(){let _=null;try{_=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch{yield p._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,g.Z)(function*(){var _;try{yield Qt(h)}catch(A){if("auth/network-request-failed"!==(null===(_=A)||void 0===_?void 0:_.code))return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function We(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){const _=h?(0,O.m9)(h):null;return _&&V(_.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(_&&_._clone(p))})()}_updateCurrentUser(h,p=!1){var _=this;return(0,g.Z)(function*(){if(!_._deleted)return h&&V(_.tenantId===h.tenantId,_,"tenant-id-mismatch"),p||(yield _.beforeStateQueue.runMiddleware(h)),_.queue((0,g.Z)(function*(){yield _.directlySetCurrentUser(h),_.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(te(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,p,_){return this.registerStateListener(this.authStateSubscription,h,p,_)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,_){return this.registerStateListener(this.idTokenSubscription,h,p,_)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var _=this;return(0,g.Z)(function*(){const A=yield _.getOrInitRedirectPersistenceManager(p);return null===h?A.removeCurrentUser():A.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const _=h&&te(h)||p._popupRedirectResolver;V(_,p,"argument-error"),p.redirectPersistenceManager=yield _e.create(p,[te(_._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,g.Z)(function*(){var _,A;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(_=p._currentUser)||void 0===_?void 0:_._redirectEventId)===h?p._currentUser:(null===(A=p.redirectUser)||void 0===A?void 0:A._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,g.Z)(function*(){if(h===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,_,A){if(this._deleted)return()=>{};const R="function"==typeof p?p:p.next.bind(p),G=this._isInitialized?Promise.resolve():this._initializationPromise;return V(G,this,"internal-error"),G.then(()=>R(this.currentUser)),"function"==typeof p?h.addObserver(p,_,A):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=ys(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var p;const _={"X-Client-Version":h.clientVersion};h.app.options.appId&&(_["X-Firebase-gmpid"]=h.app.options.appId);const A=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return A&&(_["X-Firebase-Client"]=A),_})()}}function En(y){return(0,O.m9)(y)}class Bs{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ai(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function vs(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class cr{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return pe("not implemented")}_getIdTokenResponse(h){return pe("not implemented")}_linkToIdToken(h,p){return pe("not implemented")}_getReauthenticationResolver(h){return pe("not implemented")}}function Bn(y,h){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,g.Z)(function*(y,h){return un(y,"POST","/v1/accounts:resetPassword",At(y,h))})).apply(this,arguments)}function cn(y,h){return uc.apply(this,arguments)}function uc(){return(uc=(0,g.Z)(function*(y,h){return un(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function cc(y,h){return js.apply(this,arguments)}function js(){return(js=(0,g.Z)(function*(y,h){return un(y,"POST","/v1/accounts:update",At(y,h))})).apply(this,arguments)}function fo(){return(fo=(0,g.Z)(function*(y,h){return Lr(y,"POST","/v1/accounts:signInWithPassword",At(y,h))})).apply(this,arguments)}function ws(y,h){return vi.apply(this,arguments)}function vi(){return(vi=(0,g.Z)(function*(y,h){return un(y,"POST","/v1/accounts:sendOobCode",At(y,h))})).apply(this,arguments)}function Pn(y,h){return lc.apply(this,arguments)}function lc(){return(lc=(0,g.Z)(function*(y,h){return ws(y,h)})).apply(this,arguments)}function tr(y,h){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,g.Z)(function*(y,h){return ws(y,h)})).apply(this,arguments)}function La(y,h){return $o.apply(this,arguments)}function $o(){return($o=(0,g.Z)(function*(y,h){return ws(y,h)})).apply(this,arguments)}function dc(y,h){return mr.apply(this,arguments)}function mr(){return(mr=(0,g.Z)(function*(y,h){return ws(y,h)})).apply(this,arguments)}function Vl(){return(Vl=(0,g.Z)(function*(y,h){return Lr(y,"POST","/v1/accounts:signInWithEmailLink",At(y,h))})).apply(this,arguments)}function hc(){return(hc=(0,g.Z)(function*(y,h){return Lr(y,"POST","/v1/accounts:signInWithEmailLink",At(y,h))})).apply(this,arguments)}class fc extends cr{constructor(h,p,_,A=null){super("password",_),this._email=h,this._password=p,this._tenantId=A}static _fromEmailAndPassword(h,p){return new fc(h,p,"password")}static _fromEmailAndCode(h,p,_=null){return new fc(h,p,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function jo(y,h){return fo.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function Ch(y,h){return Vl.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:Ae(h,"internal-error")}})()}_linkToIdToken(h,p){var _=this;return(0,g.Z)(function*(){switch(_.signInMethod){case"password":return cn(h,{idToken:p,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Th(y,h){return hc.apply(this,arguments)}(h,{idToken:p,email:_._email,oobCode:_._password});default:Ae(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Kn(y,h){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,g.Z)(function*(y,h){return Lr(y,"POST","/v1/accounts:signInWithIdp",At(y,h))})).apply(this,arguments)}class Gi extends cr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new Gi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):Ae("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:A}=p,R=(0,le._T)(p,["providerId","signInMethod"]);if(!_||!A)return null;const G=new Gi(_,A);return G.idToken=R.idToken||void 0,G.accessToken=R.accessToken||void 0,G.secret=R.secret,G.nonce=R.nonce,G.pendingToken=R.pendingToken||null,G}_getIdTokenResponse(h){return Kn(h,this.buildRequest())}_linkToIdToken(h,p){const _=this.buildRequest();return _.idToken=p,Kn(h,_)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Kn(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,O.xO)(p)}return h}}function Tp(y,h){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,g.Z)(function*(y,h){return un(y,"POST","/v1/accounts:sendVerificationCode",At(y,h))})).apply(this,arguments)}function Is(){return(Is=(0,g.Z)(function*(y,h){return Lr(y,"POST","/v1/accounts:signInWithPhoneNumber",At(y,h))})).apply(this,arguments)}function jl(){return(jl=(0,g.Z)(function*(y,h){const p=yield Lr(y,"POST","/v1/accounts:signInWithPhoneNumber",At(y,h));if(p.temporaryProof)throw ei(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Sp={USER_NOT_FOUND:"user-not-found"};function $l(){return($l=(0,g.Z)(function*(y,h){return Lr(y,"POST","/v1/accounts:signInWithPhoneNumber",At(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Sp)})).apply(this,arguments)}class Es extends cr{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new Es({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new Es({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function pc(y,h){return Is.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function Ap(y,h){return jl.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function xp(y,h){return $l.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:_,verificationCode:A}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:_,code:A}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:_,phoneNumber:A,temporaryProof:R}=h;return _||p||A||R?new Es({verificationId:p,verificationCode:_,phoneNumber:A,temporaryProof:R}):null}}class Va{constructor(h){var p,_,A,R,G,ae;const Fe=(0,O.zd)((0,O.pd)(h)),Ze=null!==(p=Fe.apiKey)&&void 0!==p?p:null,ht=null!==(_=Fe.oobCode)&&void 0!==_?_:null,ft=function Hl(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Fe.mode)&&void 0!==A?A:null);V(Ze&&ht&&ft,"argument-error"),this.apiKey=Ze,this.operation=ft,this.code=ht,this.continueUrl=null!==(R=Fe.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(G=Fe.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(ae=Fe.tenantId)&&void 0!==ae?ae:null}static parseLink(h){const p=function Gl(y){const h=(0,O.zd)((0,O.pd)(y)).link,p=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,_=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(_?(0,O.zd)((0,O.pd)(_)).link:null)||_||p||h||y}(h);try{return new Va(p)}catch{return null}}}let Si=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,_){return fc._fromEmailAndPassword(p,_)}static credentialWithLink(p,_){const A=Va.parseLink(_);return V(A,"argument-error"),fc._fromEmailAndCode(p,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class zi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class qi extends zi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class $s extends qi{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return V("providerId"in p&&"signInMethod"in p,"argument-error"),Gi._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return V(h.idToken||h.accessToken,"argument-error"),Gi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return $s.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return $s.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:_,oauthTokenSecret:A,pendingToken:R,nonce:G,providerId:ae}=h;if(!_&&!A&&!p&&!R||!ae)return null;try{return new $s(ae)._credential({idToken:p,accessToken:_,nonce:G,pendingToken:R})}catch{return null}}}let Ho=(()=>{class y extends qi{constructor(){super("facebook.com")}static credential(p){return Gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Ua=(()=>{class y extends qi{constructor(){super("google.com"),this.addScope("profile")}static credential(p,_){return Gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:A}=p;if(!_&&!A)return null;try{return y.credential(_,A)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),gc=(()=>{class y extends qi{constructor(){super("github.com")}static credential(p){return Gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Go extends cr{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Kn(h,this.buildRequest())}_linkToIdToken(h,p){const _=this.buildRequest();return _.idToken=p,Kn(h,_)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Kn(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:A,pendingToken:R}=p;return _&&A&&R&&_===A?new Go(_,R):null}static _create(h,p){return new Go(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ni extends zi{constructor(h){V(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return ni.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return ni.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=Go.fromJSON(h);return V(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:_}=h;if(!p||!_)return null;try{return Go._create(_,p)}catch{return null}}}let Br=(()=>{class y extends qi{constructor(){super("twitter.com")}static credential(p,_){return Gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:_,oauthTokenSecret:A}=p;if(!_||!A)return null;try{return y.credential(_,A)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function po(y,h){return zl.apply(this,arguments)}function zl(){return(zl=(0,g.Z)(function*(y,h){return Lr(y,"POST","/v1/accounts:signUp",At(y,h))})).apply(this,arguments)}class lr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,_,A=!1){return(0,g.Z)(function*(){const R=yield Mt._fromIdTokenResponse(h,_,A),G=xh(_);return new lr({user:R,providerId:G,_tokenResponse:_,operationType:p})})()}static _forOperation(h,p,_){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(_,!0);const A=xh(_);return new lr({user:h,providerId:A,_tokenResponse:_,operationType:p})})()}}function xh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function An(){return(An=(0,g.Z)(function*(y){var h;const p=En(y);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new lr({user:p.currentUser,providerId:null,operationType:"signIn"});const _=yield po(p,{returnSecureToken:!0}),A=yield lr._fromIdTokenResponse(p,"signIn",_,!0);return yield p._updateCurrentUser(A.user),A})).apply(this,arguments)}class Ba extends O.ZR{constructor(h,p,_,A){var R;super(p.code,p.message),this.operationType=_,this.user=A,Object.setPrototypeOf(this,Ba.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:p.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(h,p,_,A){return new Ba(h,p,_,A)}}function Rh(y,h,p,_){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Ba._fromErrorAndOperation(y,R,h,_):R})}function ri(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function ja(){return(ja=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y);yield zt(!0,p,h);const{providerUserInfo:_}=yield gr(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),A=ri(_||[]);return p.providerData=p.providerData.filter(R=>A.has(R.providerId)),A.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function go(y,h){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,g.Z)(function*(y,h,p=!1){const _=yield ur(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return lr._forOperation(y,"link",_)})).apply(this,arguments)}function zt(y,h,p){return $a.apply(this,arguments)}function $a(){return($a=(0,g.Z)(function*(y,h,p){yield Qt(h);const A=!1===y?"provider-already-linked":"no-such-provider";V(ri(h.providerData).has(p)===y,h.auth,A)})).apply(this,arguments)}function Hs(y,h){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,g.Z)(function*(y,h,p=!1){var _;const{auth:A}=y,R="reauthenticate";try{const G=yield ur(y,Rh(A,R,h,y),p);V(G.idToken,A,"internal-error");const ae=it(G.idToken);V(ae,A,"internal-error");const{sub:Fe}=ae;return V(y.uid===Fe,A,"user-mismatch"),lr._forOperation(y,R,G)}catch(G){throw"auth/user-not-found"===(null===(_=G)||void 0===_?void 0:_.code)&&Ae(A,"user-mismatch"),G}})).apply(this,arguments)}function _i(y,h){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,g.Z)(function*(y,h,p=!1){const _="signIn",A=yield Rh(y,_,h),R=yield lr._fromIdTokenResponse(y,_,A);return p||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Cn(y,h){return Et.apply(this,arguments)}function Et(){return(Et=(0,g.Z)(function*(y,h){return _i(En(y),h)})).apply(this,arguments)}function za(y,h){return Nh.apply(this,arguments)}function Nh(){return(Nh=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y);return yield zt(!1,p,h.providerId),go(p,h)})).apply(this,arguments)}function qa(y,h){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,g.Z)(function*(y,h){return Hs((0,O.m9)(y),h)})).apply(this,arguments)}function mc(y,h){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,g.Z)(function*(y,h){return Lr(y,"POST","/v1/accounts:signInWithCustomToken",At(y,h))})).apply(this,arguments)}function zo(){return(zo=(0,g.Z)(function*(y,h){const p=En(y),_=yield mc(p,{token:h,returnSecureToken:!0}),A=yield lr._fromIdTokenResponse(p,"signIn",_);return yield p._updateCurrentUser(A.user),A})).apply(this,arguments)}class Ce{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?Bt._fromServerResponse(h,p):Ae(h,"internal-error")}}class Bt extends Ce{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new Bt(p)}}function vc(y,h,p){var _;V((null===(_=p.url)||void 0===_?void 0:_.length)>0,y,"invalid-continue-uri"),V(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(V(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(V(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function Sn(){return(Sn=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y),A={requestType:"PASSWORD_RESET",email:h};p&&vc(_,A,p),yield tr(_,A)})).apply(this,arguments)}function mo(){return(mo=(0,g.Z)(function*(y,h,p){yield Bn((0,O.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function qo(){return(qo=(0,g.Z)(function*(y,h){yield cc((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function Wo(y,h){return wc.apply(this,arguments)}function wc(){return(wc=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y),_=yield Bn(p,{oobCode:h}),A=_.requestType;switch(V(A,p,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":V(_.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":V(_.mfaInfo,p,"internal-error");default:V(_.email,p,"internal-error")}let R=null;return _.mfaInfo&&(R=Ce._fromServerResponse(En(p),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:R},operation:A}})).apply(this,arguments)}function ql(){return(ql=(0,g.Z)(function*(y,h){const{data:p}=yield Wo((0,O.m9)(y),h);return p.email})).apply(this,arguments)}function xn(){return(xn=(0,g.Z)(function*(y,h,p){const _=En(y),A=yield po(_,{returnSecureToken:!0,email:h,password:p}),R=yield lr._fromIdTokenResponse(_,"signIn",A);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}function Gs(){return(Gs=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y),A={requestType:"EMAIL_SIGNIN",email:h};V(p.handleCodeInApp,_,"argument-error"),p&&vc(_,A,p),yield La(_,A)})).apply(this,arguments)}function Zo(){return(Zo=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y),A=Si.credentialWithLink(h,p||Re());return V(A._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),Cn(_,A)})).apply(this,arguments)}function Rp(y,h){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,g.Z)(function*(y,h){return un(y,"POST","/v1/accounts:createAuthUri",At(y,h))})).apply(this,arguments)}function Yo(){return(Yo=(0,g.Z)(function*(y,h){const _={identifier:h,continueUri:at()?Re():"http://localhost"},{signinMethods:A}=yield Rp((0,O.m9)(y),_);return A||[]})).apply(this,arguments)}function Qo(){return(Qo=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&vc(p.auth,A,h);const{email:R}=yield Pn(p.auth,A);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function Ya(){return(Ya=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&vc(_.auth,R,p);const{email:G}=yield dc(_.auth,R);G!==y.email&&(yield y.reload())})).apply(this,arguments)}function Qa(y,h){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,g.Z)(function*(y,h){return un(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Sc(){return(Sc=(0,g.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const _=(0,O.m9)(y),R={idToken:yield _.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},G=yield ur(_,Qa(_.auth,R));_.displayName=G.displayName||null,_.photoURL=G.photoUrl||null;const ae=_.providerData.find(({providerId:Fe})=>"password"===Fe);ae&&(ae.displayName=_.displayName,ae.photoURL=_.photoURL),yield _._updateTokensIfNecessary(G)})).apply(this,arguments)}function qs(y,h,p){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,g.Z)(function*(y,h,p){const{auth:_}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),p&&(R.password=p);const G=yield ur(y,cn(_,R));yield y._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class jr{constructor(h,p,_={}){this.isNewUser=h,this.providerId=p,this.profile=_}}class _n extends jr{constructor(h,p,_,A){super(h,p,_),this.username=A}}class Kl extends jr{constructor(h,p){super(h,"facebook.com",p)}}class xc extends _n{constructor(h,p){super(h,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class Oh extends jr{constructor(h,p){super(h,"google.com",p)}}class Mc extends _n{constructor(h,p,_){super(h,"twitter.com",p,_)}}function Xa(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Zn(y){var h,p;if(!y)return null;const{providerId:_}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!_&&y?.idToken){const G=null===(p=null===(h=it(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(G)return new jr(R,"anonymous"!==G&&"custom"!==G?G:null)}if(!_)return null;switch(_){case"facebook.com":return new Kl(R,A);case"github.com":return new xc(R,A);case"google.com":return new Oh(R,A);case"twitter.com":return new Mc(R,A,y.screenName||null);case"custom":case"anonymous":return new jr(R,null);default:return new jr(R,_,A)}}(p)}class Ks{constructor(h,p,_){this.type=h,this.credential=p,this.auth=_}static _fromIdtoken(h,p){return new Ks("enroll",h,p)}static _fromMfaPendingCredential(h){return new Ks("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,_;if(h?.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Ks._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(_=h.multiFactorSession)&&void 0!==_&&_.idToken)return Ks._fromIdtoken(h.multiFactorSession.idToken)}return null}}class tu{constructor(h,p,_){this.session=h,this.hints=p,this.signInResolver=_}static _fromError(h,p){const _=En(h),A=p.customData._serverResponse,R=(A.mfaInfo||[]).map(ae=>Ce._fromServerResponse(_,ae));V(A.mfaPendingCredential,_,"internal-error");const G=Ks._fromMfaPendingCredential(A.mfaPendingCredential);return new tu(G,R,function(){var ae=(0,g.Z)(function*(Fe){const Ze=yield Fe._process(_,G);delete A.mfaInfo,delete A.mfaPendingCredential;const ht=Object.assign(Object.assign({},A),{idToken:Ze.idToken,refreshToken:Ze.refreshToken});switch(p.operationType){case"signIn":const ft=yield lr._fromIdTokenResponse(_,p.operationType,ht);return yield _._updateCurrentUser(ft.user),ft;case"reauthenticate":return V(p.user,_,"internal-error"),lr._forOperation(p.user,p.operationType,ht);default:Ae(_,"internal-error")}});return function(Fe){return ae.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,g.Z)(function*(){return p.signInResolver(h)})()}}function nu(y,h){return un(y,"POST","/v2/accounts/mfaEnrollment:start",At(y,h))}class Ph{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(_=>Ce._fromServerResponse(h.auth,_)))})}static _fromUser(h){return new Ph(h)}getSession(){var h=this;return(0,g.Z)(function*(){return Ks._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,p){var _=this;return(0,g.Z)(function*(){const A=h,R=yield _.getSession(),G=yield ur(_.user,A._process(_.user.auth,R,p));return yield _.user._updateTokensIfNecessary(G),_.user.reload()})()}unenroll(h){var p=this;return(0,g.Z)(function*(){var _;const A="string"==typeof h?h:h.uid,R=yield p.user.getIdToken(),G=yield ur(p.user,function Jl(y,h){return un(y,"POST","/v2/accounts/mfaEnrollment:withdraw",At(y,h))}(p.user.auth,{idToken:R,mfaEnrollmentId:A}));p.enrolledFactors=p.enrolledFactors.filter(({uid:ae})=>ae!==A),yield p.user._updateTokensIfNecessary(G);try{yield p.user.reload()}catch(ae){if("auth/user-token-expired"!==(null===(_=ae)||void 0===_?void 0:_.code))throw ae}})()}}const _o=new WeakMap,Zs="__sak";class iu{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Zs,"1"),this.storage.removeItem(Zs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Xo=(()=>{class y extends iu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,_)=>this.onStorageEvent(p,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Jo(){const y=(0,O.z$)();return ut(y)||Ft(y)}()&&function vn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Us(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const _ of Object.keys(this.listeners)){const A=this.storage.getItem(_),R=this.localCache[_];A!==R&&p(_,R,A)}}onStorageEvent(p,_=!1){if(!p.key)return void this.forAllChangedKeys((ae,Fe,Ze)=>{this.notifyListeners(ae,Ze)});const A=p.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ae=this.storage.getItem(A);if(p.newValue!==ae)null!==p.newValue?this.storage.setItem(A,p.newValue):this.storage.removeItem(A);else if(this.localCache[A]===p.newValue&&!_)return}const R=()=>{const ae=this.storage.getItem(A);!_&&this.localCache[A]===ae||this.notifyListeners(A,ae)},G=this.storage.getItem(A);!function Wn(){return(0,O.w1)()&&10===document.documentMode}()||G===p.newValue||p.newValue===p.oldValue?R():setTimeout(R,10)}notifyListeners(p,_){this.localCache[p]=_;const A=this.listeners[p];if(A)for(const R of Array.from(A))R(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,_,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:_,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,_){var A=()=>super._set,R=this;return(0,g.Z)(function*(){yield A().call(R,p,_),R.localCache[p]=JSON.stringify(_)})()}_get(p){var _=()=>super._get,A=this;return(0,g.Z)(function*(){const R=yield _().call(A,p);return A.localCache[p]=JSON.stringify(R),R})()}_remove(p){var _=()=>super._remove,A=this;return(0,g.Z)(function*(){yield _().call(A,p),delete A.localCache[p]})()}}return y.type="LOCAL",y})(),Mi=(()=>{class y extends iu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,_){}_removeListener(p,_){}}return y.type="SESSION",y})();let td=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const _=this.receivers.find(R=>R.isListeningto(p));if(_)return _;const A=new y(p);return this.receivers.push(A),A}isListeningto(p){return this.eventTarget===p}handleEvent(p){var _=this;return(0,g.Z)(function*(){const A=p,{eventId:R,eventType:G,data:ae}=A.data,Fe=_.handlersMap[G];if(!Fe?.size)return;A.ports[0].postMessage({status:"ack",eventId:R,eventType:G});const Ze=Array.from(Fe).map(function(){var ft=(0,g.Z)(function*(dr){return dr(A.origin,ae)});return function(dr){return ft.apply(this,arguments)}}()),ht=yield function ta(y){return Promise.all(y.map(function(){var h=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(_){return{fulfilled:!1,reason:_}}});return function(p){return h.apply(this,arguments)}}()))}(Ze);A.ports[0].postMessage({status:"done",eventId:R,eventType:G,response:ht})})()}_subscribe(p,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(_)}_unsubscribe(p,_){this.handlersMap[p]&&_&&this.handlersMap[p].delete(_),(!_||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function na(y="",h=10){let p="";for(let _=0;_<h;_++)p+=Math.floor(10*Math.random());return y+p}class Rc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,_=50){var A=this;return(0,g.Z)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let G,ae;return new Promise((Fe,Ze)=>{const ht=na("",20);R.port1.start();const ft=setTimeout(()=>{Ze(new Error("unsupported_event"))},_);ae={messageChannel:R,onMessage(dr){const ki=dr;if(ki.data.eventId===ht)switch(ki.data.status){case"ack":clearTimeout(ft),G=setTimeout(()=>{Ze(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),Fe(ki.data.response);break;default:clearTimeout(ft),clearTimeout(G),Ze(new Error("invalid_response"))}}},A.handlers.add(ae),R.port1.addEventListener("message",ae.onMessage),A.target.postMessage({eventType:h,eventId:ht,data:p},[R.port2])}).finally(()=>{ae&&A.removeMessageHandler(ae)})})()}}function kn(){return window}function su(){return typeof kn().WorkerGlobalScope<"u"&&"function"==typeof kn().importScripts}function ra(){return(ra=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Cs="firebaseLocalStorageDb",Ts="firebaseLocalStorage",Nc="fbase_key";class Qs{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function ia(y,h){return y.transaction([Ts],h?"readwrite":"readonly").objectStore(Ts)}function Io(){const y=indexedDB.open(Cs,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const _=y.result;try{_.createObjectStore(Ts,{keyPath:Nc})}catch(A){p(A)}}),y.addEventListener("success",(0,g.Z)(function*(){const _=y.result;_.objectStoreNames.contains(Ts)?h(_):(_.close(),yield function rd(){const y=indexedDB.deleteDatabase(Cs);return new Qs(y).toPromise()}(),h(yield Io()))}))})}function Qi(y,h,p){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,g.Z)(function*(y,h,p){const _=ia(y,!0).put({[Nc]:h,value:p});return new Qs(_).toPromise()})).apply(this,arguments)}function sa(){return(sa=(0,g.Z)(function*(y,h){const p=ia(y,!1).get(h),_=yield new Qs(p).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function Js(y,h){const p=ia(y,!0).delete(h);return new Qs(p).toPromise()}const Eo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield Io()),p.db})()}_withRetries(p){var _=this;return(0,g.Z)(function*(){let A=0;for(;;)try{const R=yield _._openDb();return yield p(R)}catch(R){if(A++>3)throw R;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return su()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=td._getInstance(function au(){return su()?self:null}()),p.receiver._subscribe("keyChanged",function(){var _=(0,g.Z)(function*(A,R){return{keyProcessed:(yield p._poll()).includes(R.key)}});return function(A,R){return _.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var _=(0,g.Z)(function*(A,R){return["keyChanged"]});return function(A,R){return _.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var _,A;if(p.activeServiceWorker=yield function Ys(){return ra.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Rc(p.activeServiceWorker);const R=yield p.sender._send("ping",{},800);!R||(null===(_=R[0])||void 0===_?void 0:_.fulfilled)&&(null===(A=R[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var _=this;return(0,g.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function ou(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:p},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Io();return yield Qi(p,Zs,"1"),yield Js(p,Zs),!0}catch{}return!1})()}_withPendingWrite(p){var _=this;return(0,g.Z)(function*(){_.pendingWrites++;try{yield p()}finally{_.pendingWrites--}})()}_set(p,_){var A=this;return(0,g.Z)(function*(){return A._withPendingWrite((0,g.Z)(function*(){return yield A._withRetries(R=>Qi(R,p,_)),A.localCache[p]=_,A.notifyServiceWorker(p)}))})()}_get(p){var _=this;return(0,g.Z)(function*(){const A=yield _._withRetries(R=>function uu(y,h){return sa.apply(this,arguments)}(R,p));return _.localCache[p]=A,A})()}_remove(p){var _=this;return(0,g.Z)(function*(){return _._withPendingWrite((0,g.Z)(function*(){return yield _._withRetries(A=>Js(A,p)),delete _.localCache[p],_.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const _=yield p._withRetries(G=>{const ae=ia(G,!1).getAll();return new Qs(ae).toPromise()});if(!_)return[];if(0!==p.pendingWrites)return[];const A=[],R=new Set;for(const{fbase_key:G,value:ae}of _)R.add(G),JSON.stringify(p.localCache[G])!==JSON.stringify(ae)&&(p.notifyListeners(G,ae),A.push(G));for(const G of Object.keys(p.localCache))p.localCache[G]&&!R.has(G)&&(p.notifyListeners(G,null),A.push(G));return A})()}notifyListeners(p,_){this.localCache[p]=_;const A=this.listeners[p];if(A)for(const R of Array.from(A))R(_)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Do(y,h){return un(y,"POST","/v2/accounts/mfaSignIn:start",At(y,h))}function As(){return(As=(0,g.Z)(function*(y){return(yield un(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Co(y){return new Promise((h,p)=>{const _=document.createElement("script");_.setAttribute("src",y),_.onload=h,_.onerror=A=>{const R=ve("internal-error");R.customData=A,p(R)},_.type="text/javascript",_.charset="UTF-8",function bo(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(_)})}function du(y){return`__${y}${Math.floor(1e6*Math.random())}`}const oa=1e12;class pn{constructor(h){this.auth=h,this.counter=oa,this._widgets=new Map}render(h,p){const _=this.counter;return this._widgets.set(_,new Np(h,this.auth.name,p||{})),this.counter++,_}reset(h){var p;const _=h||oa;null===(p=this._widgets.get(_))||void 0===p||p.delete(),this._widgets.delete(_)}getResponse(h){var p;return(null===(p=this._widgets.get(h||oa))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,g.Z)(function*(){var _;return null===(_=p._widgets.get(h||oa))||void 0===_||_.execute(),""})()}}class Np{constructor(h,p,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof h?document.getElementById(h):h;V(A,"argument-error",{appName:p}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Qm(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<y;_++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Op=du("rcb"),Jm=new nn(3e4,6e4);class kh{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=kn().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return V(function N0(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(kn().grecaptcha):new Promise((_,A)=>{const R=kn().setTimeout(()=>{A(ve(h,"network-request-failed"))},Jm.get());kn()[Op]=()=>{kn().clearTimeout(R),delete kn()[Op];const ae=kn().grecaptcha;if(!ae)return void A(ve(h,"internal-error"));const Fe=ae.render;ae.render=(Ze,ht)=>{const ft=Fe(Ze,ht);return this.counter++,ft},this.hostLanguage=p,_(ae)},Co(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Op,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(R),A(ve(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=kn().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class kc{load(h){return(0,g.Z)(function*(){return new pn(h)})()}clearedOneInstance(){}}const ey="recaptcha",ty={theme:"light",type:"image"};class rr{constructor(h,p=Object.assign({},ty),_){this.parameters=p,this.type=ey,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=En(_),this.isInvisible="invisible"===this.parameters.size,V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof h?document.getElementById(h):h;V(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new kc:new kh,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),_=h.getAssertedRecaptcha();return _.getResponse(p)||new Promise(R=>{const G=ae=>{!ae||(h.tokenChangeListeners.delete(G),R(ae))};h.tokenChangeListeners.add(G),h.isInvisible&&_.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(_=>_(p)),"function"==typeof h)h(p);else if("string"==typeof h){const _=kn()[h];"function"==typeof _&&_(p)}}}assertNotDestroyed(){V(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const _=document.createElement("div");p.appendChild(_),p=_}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){V(at()&&!su(),h.auth,"internal-error"),yield function ln(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function $r(y){return As.apply(this,arguments)}(h.auth);V(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ar{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=Es._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function hu(){return(hu=(0,g.Z)(function*(y,h,p){const _=En(y),A=yield Ei(_,h,(0,O.m9)(p));return new Ar(A,R=>Cn(_,R))})).apply(this,arguments)}function Ii(){return(Ii=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y);yield zt(!1,_,"phone");const A=yield Ei(_.auth,h,(0,O.m9)(p));return new Ar(A,R=>za(_,R))})).apply(this,arguments)}function Ao(){return(Ao=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y),A=yield Ei(_.auth,h,(0,O.m9)(p));return new Ar(A,R=>qa(_,R))})).apply(this,arguments)}function Ei(y,h,p){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,g.Z)(function*(y,h,p){var _;const A=yield p.verify();try{let R;if(V("string"==typeof A,y,"argument-error"),V(p.type===ey,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const G=R.session;if("phoneNumber"in R)return V("enroll"===G.type,y,"internal-error"),(yield nu(y,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{V("signin"===G.type,y,"internal-error");const ae=(null===(_=R.multiFactorHint)||void 0===_?void 0:_.uid)||R.multiFactorUid;return V(ae,y,"missing-multi-factor-info"),(yield Do(y,{mfaPendingCredential:G.credential,mfaEnrollmentId:ae,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield Tp(y,{phoneNumber:R.phoneNumber,recaptchaToken:A});return G}}finally{p._reset()}})).apply(this,arguments)}function wt(){return(wt=(0,g.Z)(function*(y,h){yield go((0,O.m9)(y),h)})).apply(this,arguments)}let fu=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=En(p)}verifyPhoneNumber(p,_){return Ei(this.auth,p,(0,O.m9)(_))}static credential(p,_){return Es._fromVerification(p,_)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:_,temporaryProof:A}=p;return _&&A?Es._fromTokenResponse(_,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function So(y,h){return h?te(h):(V(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class aa extends cr{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Kn(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Kn(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Kn(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function Sr(y){return _i(y.auth,new aa(y),y.bypassAuthState)}function ua(y){const{auth:h,user:p}=y;return V(p,h,"internal-error"),Hs(p,new aa(y),y.bypassAuthState)}function es(y){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,g.Z)(function*(y){const{auth:h,user:p}=y;return V(p,h,"internal-error"),go(p,new aa(y),y.bypassAuthState)})).apply(this,arguments)}class xr{constructor(h,p,_,A,R=!1){this.auth=h,this.resolver=_,this.user=A,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,g.Z)(function*(_,A){h.pendingPromise={resolve:_,reject:A};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(_,A){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,g.Z)(function*(){const{urlResponse:_,sessionId:A,postBody:R,tenantId:G,error:ae,type:Fe}=h;if(ae)return void p.reject(ae);const Ze={auth:p.auth,requestUri:_,sessionId:A,tenantId:G||void 0,postBody:R||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Fe)(Ze))}catch(ht){p.reject(ht)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Sr;case"linkViaPopup":case"linkViaRedirect":return es;case"reauthViaPopup":case"reauthViaRedirect":return ua;default:Ae(this.auth,"internal-error")}}resolve(h){z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Lc=new nn(2e3,1e4);function ca(){return(ca=(0,g.Z)(function*(y,h,p){const _=En(y);Ue(y,h,zi);const A=So(_,p);return new Gr(_,"signInViaPopup",h,A).executeNotNull()})).apply(this,arguments)}function id(){return(id=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y);Ue(_.auth,h,zi);const A=So(_.auth,p);return new Gr(_.auth,"reauthViaPopup",h,A,_).executeNotNull()})).apply(this,arguments)}function la(){return(la=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y);Ue(_.auth,h,zi);const A=So(_.auth,p);return new Gr(_.auth,"linkViaPopup",h,A,_).executeNotNull()})).apply(this,arguments)}let Gr=(()=>{class y extends xr{constructor(p,_,A,R,G){super(p,_,R,G),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const _=yield p.execute();return V(_,p.auth,"internal-error"),_})()}onExecution(){var p=this;return(0,g.Z)(function*(){z(1===p.filter.length,"Popup operations only handle one event");const _=na();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],_),p.authWindow.associatedEvent=_,p.resolver._originValidation(p.auth).catch(A=>{p.reject(A)}),p.resolver._isIframeWebStorageSupported(p.auth,A=>{A||p.reject(ve(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var _,A;this.pollId=null!==(A=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,Lc.get())};p()}}return y.currentPopupAction=null,y})();const gn=new Map;class Ni extends xr{constructor(h,p,_=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,_),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,g.Z)(function*(){let _=gn.get(p.auth._key());if(!_){try{const R=(yield function gu(y,h){return Oi.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;_=()=>Promise.resolve(R)}catch(A){_=()=>Promise.reject(A)}gn.set(p.auth._key(),_)}return p.bypassAuthState||gn.set(p.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,_=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(_,h);if("unknown"!==h.type){if(h.eventId){const A=yield _.auth._redirectUserForId(h.eventId);if(A)return _.user=A,p().call(_,h);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function Oi(){return(Oi=(0,g.Z)(function*(y,h){const p=Uc(h),_=ts(y);if(!(yield _._isAvailable()))return!1;const A="true"===(yield _._get(p));return yield _._remove(p),A})).apply(this,arguments)}function mu(y,h){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,g.Z)(function*(y,h){return ts(y)._set(Uc(h),"true")})).apply(this,arguments)}function eo(y,h){gn.set(y._key(),h)}function ts(y){return te(y._redirectPersistence)}function Uc(y){return q("pendingRedirect",y.config.apiKey,y.name)}function D(){return(D=(0,g.Z)(function*(y,h,p){const _=En(y);Ue(y,h,zi);const A=So(_,p);return yield mu(A,_),A._openRedirect(_,h,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y);Ue(_.auth,h,zi);const A=So(_.auth,p);yield mu(A,_.auth);const R=yield lt(_);return A._openRedirect(_.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function Ee(){return(Ee=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y);Ue(_.auth,h,zi);const A=So(_.auth,p);yield zt(!1,_,h.providerId),yield mu(A,_.auth);const R=yield lt(_);return A._openRedirect(_.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function ct(){return(ct=(0,g.Z)(function*(y,h){return yield En(y)._initializationPromise,gt(y,h,!1)})).apply(this,arguments)}function gt(y,h){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,g.Z)(function*(y,h,p=!1){const _=En(y),A=So(_,h),G=yield new Ni(_,A,p).execute();return G&&!p&&(delete G.user._redirectEventId,yield _._persistUserIfCurrent(G.user),yield _._setRedirectUser(null,h)),G})).apply(this,arguments)}function lt(y){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,g.Z)(function*(y){const h=na(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Ss{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(h,_)&&(p=!0,this.sendToConsumer(h,_),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function to(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xs(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var _;if(h.error&&!xs(h)){const A=(null===(_=h.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";p.onError(ve(this.auth,A))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const _=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&_}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ns(h))}saveEventToCache(h){this.cachedEventUids.add(ns(h)),this.lastProcessedEventTime=Date.now()}}function ns(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function xs({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function rs(y){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,g.Z)(function*(y,h={}){return un(y,"GET","/v1/projects",h)})).apply(this,arguments)}const zr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ms=/^https?/;function ny(){return(ny=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield rs(y);for(const p of h)try{if(kp(p))return}catch{}Ae(y,"unauthorized-domain")})).apply(this,arguments)}function kp(y){const h=Re(),{protocol:p,hostname:_}=new URL(h);if(y.startsWith("chrome-extension://")){const G=new URL(y);return""===G.hostname&&""===_?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&G.hostname===_}if(!Ms.test(p))return!1;if(zr.test(y))return _===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(_)}const Fp=new nn(3e4,6e4);function ad(){const y=kn().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let Bc=null;function Vh(y){return Bc=Bc||function da(y){return new Promise((h,p)=>{var _,A,R;function G(){ad(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{ad(),p(ve(y,"network-request-failed"))},timeout:Fp.get()})}if(null!==(A=null===(_=kn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==A&&A.Iframe)h(gapi.iframes.getContext());else{if(null===(R=kn().gapi)||void 0===R||!R.load){const ae=du("iframefcb");return kn()[ae]=()=>{gapi.load?G():p(ve(y,"network-request-failed"))},Co(`https://apis.google.com/js/api.js?onload=${ae}`).catch(Fe=>p(Fe))}G()}}).catch(h=>{throw Bc=null,h})}(y),Bc}const Lp=new nn(5e3,15e3),BD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Vp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function O0(y){const h=y.config;V(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?yn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,_={apiKey:h.apiKey,appName:y.name,v:ie.SDK_VERSION},A=Vp.get(y.config.apiHost);A&&(_.eid=A);const R=y._getFrameworks();return R.length&&(_.fw=R.join(",")),`${p}?${(0,O.xO)(_).slice(1)}`}function jc(){return jc=(0,g.Z)(function*(y){const h=yield Vh(y),p=kn().gapi;return V(p,y,"internal-error"),h.open({where:document.body,url:O0(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BD,dontclear:!0},_=>new Promise(function(){var A=(0,g.Z)(function*(R,G){yield _.restyle({setHideOnLeave:!1});const ae=ve(y,"network-request-failed"),Fe=kn().setTimeout(()=>{G(ae)},Lp.get());function Ze(){kn().clearTimeout(Fe),R(_)}_.ping(Ze).then(Ze,()=>{G(ae)})});return function(R,G){return A.apply(this,arguments)}}()))}),jc.apply(this,arguments)}const Uh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class fa{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vu(y,h,p,_,A,R){V(y.config.authDomain,y,"auth-domain-config-required"),V(y.config.apiKey,y,"invalid-api-key");const G={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:_,v:ie.SDK_VERSION,eventId:A};if(h instanceof zi){h.setDefaultLanguage(y.languageCode),G.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(G.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Fe,Ze]of Object.entries(R||{}))G[Fe]=Ze}if(h instanceof qi){const Fe=h.getScopes().filter(Ze=>""!==Ze);Fe.length>0&&(G.scopes=Fe.join(","))}y.tenantId&&(G.tid=y.tenantId);const ae=G;for(const Fe of Object.keys(ae))void 0===ae[Fe]&&delete ae[Fe];return`${function Up({config:y}){return y.emulator?yn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(ae).slice(1)}`}const Hc="webStorageSupport";class is extends class jp{constructor(h){this.factorId=h}_process(h,p,_){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,_);case"signin":return this._finalizeSignIn(h,p.credential);default:return pe("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new is(h)}_finalizeEnroll(h,p,_){return function ru(y,h){return un(y,"POST","/v2/accounts/mfaEnrollment:finalize",At(y,h))}(h,{idToken:p,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function lu(y,h){return un(y,"POST","/v2/accounts/mfaSignIn:finalize",At(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Mo=(()=>{class y{constructor(){}static assertion(p){return is._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var _u="@firebase/auth",k0="0.20.11";class jD{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(_=>{var A;h((null===(A=_)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function no(){return window}function ma(){return(ma=(0,g.Z)(function*(y,h,p){var _;const{BuildInfo:A}=no();z(h.sessionId,"AuthEvent did not contain a session ID");const R=yield ld(h.sessionId),G={};return Ft()?G.ibi=A.packageName:Gt()?G.apn=A.packageName:Ae(y,"operation-not-supported-in-this-environment"),A.displayName&&(G.appDisplayName=A.displayName),G.sessionId=R,vu(y,p,h.type,void 0,null!==(_=h.eventId)&&void 0!==_?_:void 0,G)})).apply(this,arguments)}function cd(){return(cd=(0,g.Z)(function*(y){const{BuildInfo:h}=no(),p={};Ft()?p.iosBundleId=h.packageName:Gt()?p.androidPackageName=h.packageName:Ae(y,"operation-not-supported-in-this-environment"),yield rs(y,p)})).apply(this,arguments)}function uy(){return(uy=(0,g.Z)(function*(y,h,p){const{cordova:_}=no();let A=()=>{};try{yield new Promise((R,G)=>{let ae=null;function Fe(){var ft;R();const dr=null===(ft=_.plugins.browsertab)||void 0===ft?void 0:ft.close;"function"==typeof dr&&dr(),"function"==typeof p?.close&&p.close()}function Ze(){ae||(ae=window.setTimeout(()=>{G(ve(y,"redirect-cancelled-by-user"))},2e3))}function ht(){"visible"===document?.visibilityState&&Ze()}h.addPassiveListener(Fe),document.addEventListener("resume",Ze,!1),Gt()&&document.addEventListener("visibilitychange",ht,!1),A=()=>{h.removePassiveListener(Fe),document.removeEventListener("resume",Ze,!1),document.removeEventListener("visibilitychange",ht,!1),ae&&window.clearTimeout(ae)}})}finally{A()}})).apply(this,arguments)}function ld(y){return dd.apply(this,arguments)}function dd(){return(dd=(0,g.Z)(function*(y){const h=$p(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function $p(y){if(z(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let _=0;_<y.length;_++)p[_]=y.charCodeAt(_);return p}(0,O.Pz)("authIdTokenMaxAge"),function $D(y){(0,ie._registerComponent)(new ue.wA("auth",(h,{options:p})=>{const _=h.getProvider("app").getImmediate(),A=h.getProvider("heartbeat"),{apiKey:R,authDomain:G}=_.options;return((ae,Fe)=>{V(R&&!R.includes(":"),"invalid-api-key",{appName:ae.name}),V(!G?.includes(":"),"argument-error",{appName:ae.name});const Ze={apiKey:R,authDomain:G,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ys(y)},ht=new Rt(ae,Fe,Ze);return function ke(y,h){const p=h?.persistence||[],_=(Array.isArray(p)?p:[p]).map(te);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(_,h?.popupRedirectResolver)}(ht,p),ht})(_,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,_)=>{h.getProvider("auth-internal").initialize()})),(0,ie._registerComponent)(new ue.wA("auth-internal",h=>{const p=En(h.getProvider("auth").getImmediate());return new jD(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ie.registerVersion)(_u,k0,function ay(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ie.registerVersion)(_u,k0,"esm2017")}("Browser");class Hh extends Ss{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function ly(y){return zh.apply(this,arguments)}function zh(){return(zh=(0,g.Z)(function*(y){const h=yield hd()._get(bu(y));return h&&(yield hd()._remove(bu(y))),h})).apply(this,arguments)}function Du(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const _=Math.floor(Math.random()*h.length);y.push(h.charAt(_))}return y.join("")}function hd(){return te(Xo)}function bu(y){return q("authEvent",y.config.apiKey,y.name)}function fd(y){if(!y?.includes("?"))return{};const[h,...p]=y.split("?");return(0,O.zd)(p.join("?"))}function hy(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function Wc(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function ya(y=(0,O.z$)()){return!("file:"!==Wc()&&"ionic:"!==Wc()&&"capacitor:"!==Wc()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Kh(){try{const y=self.localStorage,h=na();if(y)return y.setItem(h,"1"),y.removeItem(h),!function my(y=(0,O.z$)()){return function Wh(){return(0,O.w1)()&&11===document?.documentMode}()||function qp(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch{return pd()&&(0,O.hl)()}return!1}function pd(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Kc(){return(function gy(){return"http:"===Wc()||"https:"===Wc()}()||(0,O.ru)()||ya())&&!function qh(){return(0,O.b$)()||(0,O.UG)()}()&&Kh()&&!pd()}function gd(){return ya()&&typeof document<"u"}function Zc(){return(Zc=(0,g.Z)(function*(){return!!gd()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const qr={LOCAL:"local",NONE:"none",SESSION:"session"},Cu=V,ss="persistence";function va(y){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,g.Z)(function*(y){yield y._initializationPromise;const h=Yc(),p=q(ss,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function Yc(){var y;try{return(null===(y=function Zh(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const md=V;class Mr{constructor(){this.browserResolver=te(class Bp{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Mi,this._completeRedirectFn=gt,this._overrideRedirectResult=eo}_openPopup(h,p,_,A){var R=this;return(0,g.Z)(function*(){var G;z(null===(G=R.eventManagers[h._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const ae=vu(h,p,_,Re(),A);return function pa(y,h,p,_=500,A=600){const R=Math.max((window.screen.availHeight-A)/2,0).toString(),G=Math.max((window.screen.availWidth-_)/2,0).toString();let ae="";const Fe=Object.assign(Object.assign({},Uh),{width:_.toString(),height:A.toString(),top:R,left:G}),Ze=(0,O.z$)().toLowerCase();p&&(ae=Wt(Ze)?"_blank":p),He(Ze)&&(h=h||"http://localhost",Fe.scrollbars="yes");const ht=Object.entries(Fe).reduce((dr,[ki,Id])=>`${dr}${ki}=${Id},`,"");if(function Ur(y=(0,O.z$)()){var h;return Ft(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Ze)&&"_self"!==ae)return function $c(y,h){const p=document.createElement("a");p.href=y,p.target=h;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(_)}(h||"",ae),new fa(null);const ft=window.open(h||"",ae,ht);V(ft,y,"popup-blocked");try{ft.focus()}catch{}return new fa(ft)}(h,ae,na())})()}_openRedirect(h,p,_,A){var R=this;return(0,g.Z)(function*(){return yield R._originValidation(h),function wi(y){kn().location.href=y}(vu(h,p,_,Re(),A)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:A,promise:R}=this.eventManagers[p];return A?Promise.resolve(A):(z(R,"If manager is not set, promise should be"),R)}const _=this.initAndGetManager(h);return this.eventManagers[p]={promise:_},_.catch(()=>{delete this.eventManagers[p]}),_}initAndGetManager(h){var p=this;return(0,g.Z)(function*(){const _=yield function iy(y){return jc.apply(this,arguments)}(h),A=new Ss(h);return _.register("authEvent",R=>(V(R?.authEvent,h,"invalid-auth-event"),{status:A.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:A},p.iframes[h._key()]=_,A})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Hc,{type:Hc},A=>{var R;const G=null===(R=A?.[0])||void 0===R?void 0:R[Hc];void 0!==G&&p(!!G),Ae(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Lh(y){return ny.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return Us()||ut()||Ft()}}),this.cordovaResolver=te(class Gp{constructor(){this._redirectPersistence=Mi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=gt,this._overrideRedirectResult=eo}_initialize(h){var p=this;return(0,g.Z)(function*(){const _=h._key();let A=p.eventManagers.get(_);return A||(A=new Hh(h),p.eventManagers.set(_,A),p.attachCallbackListeners(h,A)),A})()}_openPopup(h){Ae(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,_,A){var R=this;return(0,g.Z)(function*(){!function V0(y){var h,p,_,A,R,G,ae,Fe,Ze,ht;const ft=no();V("function"==typeof(null===(h=ft?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),V(typeof(null===(p=ft?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),V("function"==typeof(null===(R=null===(A=null===(_=ft?.cordova)||void 0===_?void 0:_.plugins)||void 0===A?void 0:A.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Fe=null===(ae=null===(G=ft?.cordova)||void 0===G?void 0:G.plugins)||void 0===ae?void 0:ae.browsertab)||void 0===Fe?void 0:Fe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(ht=null===(Ze=ft?.cordova)||void 0===Ze?void 0:Ze.InAppBrowser)||void 0===ht?void 0:ht.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const G=yield R._initialize(h);yield G.initialized(),G.resetRedirect(),function sd(){gn.clear()}(),yield R._originValidation(h);const ae=function Gh(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:Du(),postBody:null,tenantId:y.tenantId,error:ve(y,"no-auth-event")}}(h,_,A);yield function cy(y,h){return hd()._set(bu(y),h)}(h,ae);const Fe=yield function ro(y,h,p){return ma.apply(this,arguments)}(h,ae,p),Ze=yield function $h(y){const{cordova:h}=no();return new Promise(p=>{h.plugins.browsertab.isAvailable(_=>{let A=null;_?h.plugins.browsertab.openUrl(y):A=h.InAppBrowser.open(y,function er(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(A)})})}(Fe);return function L0(y,h,p){return uy.apply(this,arguments)}(h,G,Ze)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function jh(y){return cd.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:_,handleOpenURL:A,BuildInfo:R}=no(),G=setTimeout((0,g.Z)(function*(){yield ly(h),p.onEvent(hy())}),500),ae=function(){var ht=(0,g.Z)(function*(ft){clearTimeout(G);const dr=yield ly(h);let ki=null;dr&&ft?.url&&(ki=function Eu(y,h){var p,_;const A=function sr(y){const h=fd(y),p=h.link?decodeURIComponent(h.link):void 0,_=fd(p).link,A=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return fd(A).link||A||_||p||y}(h);if(A.includes("/__/auth/callback")){const R=fd(A),G=R.firebaseError?function qc(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,ae=null===(_=null===(p=G?.code)||void 0===p?void 0:p.split("auth/"))||void 0===_?void 0:_[1],Fe=ae?ve(ae):null;return Fe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(dr,ft.url)),p.onEvent(ki||hy())});return function(dr){return ht.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,ae);const Fe=A,Ze=`${R.packageName.toLowerCase()}://`;no().handleOpenURL=function(){var ht=(0,g.Z)(function*(ft){if(ft.toLowerCase().startsWith(Ze)&&ae({url:ft}),"function"==typeof Fe)try{Fe(ft)}catch(dr){console.error(dr)}});return function(ft){return ht.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Mi,this._completeRedirectFn=gt,this._overrideRedirectResult=eo}_initialize(h){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,_,A){var R=this;return(0,g.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,p,_,A)})()}_openRedirect(h,p,_,A){var R=this;return(0,g.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,p,_,A)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return gd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return md(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const p=yield function yy(){return Zc.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Qh(y){return y.unwrap()}function _y(y){return Xh(y)}function Xh(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return fu.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let _;switch(p){case"google.com":_=Ua;break;case"facebook.com":_=Ho;break;case"github.com":_=gc;break;case"twitter.com":_=Br;break;default:const{oauthIdToken:A,oauthAccessToken:R,oauthTokenSecret:G,pendingToken:ae,nonce:Fe}=h;return R||G||A||ae?ae?p.startsWith("saml.")?Go._create(p,ae):Gi._fromParams({providerId:p,signInMethod:p,pendingToken:ae,idToken:A,accessToken:R}):new $s(p).credential({idToken:A,accessToken:R,rawNonce:Fe}):null}return y instanceof O.ZR?_.credentialFromError(y):_.credentialFromResult(y)}function or(y,h){return h.catch(p=>{throw p instanceof O.ZR&&function Jh(y,h){var p,_;const A=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===(null===(_=h)||void 0===_?void 0:_.code))h.resolver=new j0(y,function Mn(y,h){var p;const _=(0,O.m9)(y),A=h;return V(h.customData.operationType,_,"argument-error"),V(null===(p=A.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,_,"argument-error"),tu._fromError(_,A)}(y,h));else if(A){const R=Xh(h),G=h;R&&(G.credential=R,G.tenantId=A.tenantId||void 0,G.email=A.email||void 0,G.phoneNumber=A.phoneNumber||void 0)}}(y,p),p}).then(p=>{const A=p.user;return{operationType:p.operationType,credential:_y(p),additionalUserInfo:Xa(p),user:os.getOrCreate(A)}})}function vd(y,h){return ef.apply(this,arguments)}function ef(){return(ef=(0,g.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:_=>or(y,p.confirm(_))}})).apply(this,arguments)}class j0{constructor(h,p){this.resolver=p,this.auth=function yd(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return or(Qh(this.auth),this.resolver.resolveSignIn(h))}}class os{constructor(h){this._delegate=h,this.multiFactor=function wo(y){const h=(0,O.m9)(y);return _o.has(h)||_o.set(h,Ph._fromUser(h)),_o.get(h)}(h)}static getOrCreate(h){return os.USER_MAP.has(h)||os.USER_MAP.set(h,new os(h)),os.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,g.Z)(function*(){return or(p.auth,za(p._delegate,h))})()}linkWithPhoneNumber(h,p){var _=this;return(0,g.Z)(function*(){return vd(_.auth,function Hr(y,h,p){return Ii.apply(this,arguments)}(_._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,g.Z)(function*(){return or(p.auth,function Vc(y,h,p){return la.apply(this,arguments)}(p._delegate,h,Mr))})()}linkWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield va(En(p.auth)),function K(y,h,p){return function ne(y,h,p){return Ee.apply(this,arguments)}(y,h,p)}(p._delegate,h,Mr)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,g.Z)(function*(){return or(p.auth,qa(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return vd(this.auth,function Fc(y,h,p){return Ao.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return or(this.auth,function Pp(y,h,p){return id.apply(this,arguments)}(this._delegate,h,Mr))}reauthenticateWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield va(En(p.auth)),function C(y,h,p){return function x(y,h,p){return F.apply(this,arguments)}(y,h,p)}(p._delegate,h,Mr)})()}sendEmailVerification(h){return function bc(y,h){return Qo.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,g.Z)(function*(){return yield function Tr(y,h){return ja.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function Wl(y,h){return qs((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function zs(y,h){return qs((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function yr(y,h){return wt.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Ac(y,h){return Sc.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function Cc(y,h,p){return Ya.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}os.USER_MAP=new WeakMap;const _a=V;let tf=(()=>{class y{constructor(p,_){if(this.app=p,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=p.options;_a(A,"invalid-api-key",{appName:p.name}),_a(A,"invalid-api-key",{appName:p.name});const R=typeof window<"u"?Mr:void 0;this._delegate=_.initialize({options:{persistence:wa(A,p.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(we),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?os.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,_){!function ka(y,h,p){const _=En(y);V(_._canInitEmulator,_,"emulator-config-failed"),V(/^https?:\/\//.test(h),_,"invalid-emulator-scheme");const A=!!p?.disableWarnings,R=Ai(h),{host:G,port:ae}=function Un(y){const h=Ai(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const _=p[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(_);if(A){const R=A[1];return{host:R,port:vs(_.substr(R.length+1))}}{const[R,G]=_.split(":");return{host:R,port:vs(G)}}}(h);_.config.emulator={url:`${R}//${G}${null===ae?"":`:${ae}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:G,port:ae,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function _s(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,_)}applyActionCode(p){return function ii(y,h){return qo.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return Wo(this._delegate,p)}confirmPasswordReset(p,_){return function Ka(y,h,p){return mo.apply(this,arguments)}(this._delegate,p,_)}createUserWithEmailAndPassword(p,_){var A=this;return(0,g.Z)(function*(){return or(A._delegate,function Ko(y,h,p){return xn.apply(this,arguments)}(A._delegate,p,_))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function Za(y,h){return Yo.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Yi(y,h){return"EMAIL_SIGNIN"===Va.parseLink(h)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){_a(Kc(),p._delegate,"operation-not-supported-in-this-environment");const _=yield function Be(y,h){return ct.apply(this,arguments)}(p._delegate,Mr);return _?or(p._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function B0(y,h){En(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,_,A){const{next:R,error:G,complete:ae}=_d(p,_,A);return this._delegate.onAuthStateChanged(R,G,ae)}onIdTokenChanged(p,_,A){const{next:R,error:G,complete:ae}=_d(p,_,A);return this._delegate.onIdTokenChanged(R,G,ae)}sendSignInLinkToEmail(p,_){return function Ec(y,h,p){return Gs.apply(this,arguments)}(this._delegate,p,_)}sendPasswordResetEmail(p,_){return function _c(y,h,p){return Sn.apply(this,arguments)}(this._delegate,p,_||void 0)}setPersistence(p){var _=this;return(0,g.Z)(function*(){let A;switch(function vy(y,h){Cu(Object.values(qr).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?Cu(h!==qr.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Cu(h===qr.NONE,y,"unsupported-persistence-type"):pd()?Cu(h===qr.NONE||h===qr.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Cu(h===qr.NONE||Kh(),y,"unsupported-persistence-type")}(_._delegate,p),p){case qr.SESSION:A=Mi;break;case qr.LOCAL:A=(yield te(Eo)._isAvailable())?Eo:Xo;break;case qr.NONE:A=L;break;default:return Ae("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return or(this._delegate,function Mh(y){return An.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return or(this._delegate,Cn(this._delegate,p))}signInWithCustomToken(p){return or(this._delegate,function yc(y,h){return zo.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,_){return or(this._delegate,function xi(y,h,p){return Cn((0,O.m9)(y),Si.credential(h,p))}(this._delegate,p,_))}signInWithEmailLink(p,_){return or(this._delegate,function Mp(y,h,p){return Zo.apply(this,arguments)}(this._delegate,p,_))}signInWithPhoneNumber(p,_){return vd(this._delegate,function Fh(y,h,p){return hu.apply(this,arguments)}(this._delegate,p,_))}signInWithPopup(p){var _=this;return(0,g.Z)(function*(){return _a(Kc(),_._delegate,"operation-not-supported-in-this-environment"),or(_._delegate,function pu(y,h,p){return ca.apply(this,arguments)}(_._delegate,p,Mr))})()}signInWithRedirect(p){var _=this;return(0,g.Z)(function*(){return _a(Kc(),_._delegate,"operation-not-supported-in-this-environment"),yield va(_._delegate),function Rn(y,h,p){return function od(y,h,p){return D.apply(this,arguments)}(y,h,p)}(_._delegate,p,Mr)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function Ic(y,h){return ql.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=qr,y})();function _d(y,h,p){let _=y;"function"!=typeof y&&({next:_,error:h,complete:p}=y);const A=_;return{next:G=>A(G&&os.getOrCreate(G)),error:h,complete:p}}function wa(y,h){const p=function Yh(y,h){const p=Yc();if(!p)return[];const _=q(ss,y,h);switch(p.getItem(_)){case qr.NONE:return[L];case qr.LOCAL:return[Eo,Mi];case qr.SESSION:return[Mi];default:return[]}}(y,h);if(typeof self<"u"&&!p.includes(Eo)&&p.push(Eo),typeof window<"u")for(const _ of[Xo,Mi])p.includes(_)||p.push(_);return p.includes(L)||p.push(L),p}class wd{constructor(){this.providerId="phone",this._delegate=new fu(Qh(J.Z.auth()))}static credential(h,p){return fu.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}wd.PHONE_SIGN_IN_METHOD=fu.PHONE_SIGN_IN_METHOD,wd.PROVIDER_ID=fu.PROVIDER_ID;const wy=V;class Iy{constructor(h,p,_=J.Z.app()){var A;wy(null===(A=_.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new rr(h,p,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ey(y){y.INTERNAL.registerComponent(new ue.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),_=h.getProvider("auth");return new tf(p,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Si,FacebookAuthProvider:Ho,GithubAuthProvider:gc,GoogleAuthProvider:Ua,OAuthProvider:$s,SAMLAuthProvider:ni,PhoneAuthProvider:wd,PhoneMultiFactorGenerator:Mo,RecaptchaVerifier:Iy,TwitterAuthProvider:Br,Auth:tf,AuthCredential:cr,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.24")}(J.Z)},9751:(ot,Te,k)=>{k.d(Te,{y:()=>de});var g=k(2961),J=k(727),O=k(8822),ie=k(9635),re=k(2416),le=k(576),ue=k(2806);let de=(()=>{class W{constructor(Se){Se&&(this._subscribe=Se)}lift(Se){const we=new W;return we.source=this,we.operator=Se,we}subscribe(Se,we,et){const ge=function B(W){return W&&W instanceof g.Lv||function U(W){return W&&(0,le.m)(W.next)&&(0,le.m)(W.error)&&(0,le.m)(W.complete)}(W)&&(0,J.Nn)(W)}(Se)?Se:new g.Hp(Se,we,et);return(0,ue.x)(()=>{const{operator:fe,source:Qe}=this;ge.add(fe?fe.call(ge,Qe):Qe?this._subscribe(ge):this._trySubscribe(ge))}),ge}_trySubscribe(Se){try{return this._subscribe(Se)}catch(we){Se.error(we)}}forEach(Se,we){return new(we=he(we))((et,ge)=>{const fe=new g.Hp({next:Qe=>{try{Se(Qe)}catch(nt){ge(nt),fe.unsubscribe()}},error:ge,complete:et});this.subscribe(fe)})}_subscribe(Se){var we;return null===(we=this.source)||void 0===we?void 0:we.subscribe(Se)}[O.L](){return this}pipe(...Se){return(0,ie.U)(Se)(this)}toPromise(Se){return new(Se=he(Se))((we,et)=>{let ge;this.subscribe(fe=>ge=fe,fe=>et(fe),()=>we(ge))})}}return W.create=Le=>new W(Le),W})();function he(W){var Le;return null!==(Le=W??re.v.Promise)&&void 0!==Le?Le:Promise}},7579:(ot,Te,k)=>{k.d(Te,{x:()=>ue});var g=k(9751),J=k(727);const ie=(0,k(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=k(8737),le=k(2806);let ue=(()=>{class he extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const W=new de(this,this);return W.operator=B,W}_throwIfClosed(){if(this.closed)throw new ie}next(B){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const W of this.currentObservers)W.next(B)}})}error(B){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:W}=this;for(;W.length;)W.shift().error(B)}})}complete(){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:W,isStopped:Le,observers:Se}=this;return W||Le?J.Lc:(this.currentObservers=null,Se.push(B),new J.w0(()=>{this.currentObservers=null,(0,re.P)(Se,B)}))}_checkFinalizedStatuses(B){const{hasError:W,thrownError:Le,isStopped:Se}=this;W?B.error(Le):Se&&B.complete()}asObservable(){const B=new g.y;return B.source=this,B}}return he.create=(U,B)=>new de(U,B),he})();class de extends ue{constructor(U,B){super(),this.destination=U,this.source=B}next(U){var B,W;null===(W=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===W||W.call(B,U)}error(U){var B,W;null===(W=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===W||W.call(B,U)}complete(){var U,B;null===(B=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===B||B.call(U)}_subscribe(U){var B,W;return null!==(W=null===(B=this.source)||void 0===B?void 0:B.subscribe(U))&&void 0!==W?W:J.Lc}}},2961:(ot,Te,k)=>{k.d(Te,{Hp:()=>et,Lv:()=>W});var g=k(576),J=k(727),O=k(2416),ie=k(7849);function re(){}const le=he("C",void 0,void 0);function he(Ae,ve,Ie){return{kind:Ae,value:ve,error:Ie}}var U=k(3410),B=k(2806);class W extends J.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,J.Nn)(ve)&&ve.add(this)):this.destination=nt}static create(ve,Ie,Ue){return new et(ve,Ie,Ue)}next(ve){this.isStopped?Qe(function de(Ae){return he("N",Ae,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?Qe(function ue(Ae){return he("E",void 0,Ae)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?Qe(le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Le=Function.prototype.bind;function Se(Ae,ve){return Le.call(Ae,ve)}class we{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(ve)}catch(Ue){ge(Ue)}}error(ve){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(ve)}catch(Ue){ge(Ue)}else ge(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(Ie){ge(Ie)}}}class et extends W{constructor(ve,Ie,Ue){let je;if(super(),(0,g.m)(ve)||!ve)je={next:ve??void 0,error:Ie??void 0,complete:Ue??void 0};else{let V;this&&O.v.useDeprecatedNextContext?(V=Object.create(ve),V.unsubscribe=()=>this.unsubscribe(),je={next:ve.next&&Se(ve.next,V),error:ve.error&&Se(ve.error,V),complete:ve.complete&&Se(ve.complete,V)}):je=ve}this.destination=new we(je)}}function ge(Ae){O.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(Ae):(0,ie.h)(Ae)}function Qe(Ae,ve){const{onStoppedNotification:Ie}=O.v;Ie&&U.z.setTimeout(()=>Ie(Ae,ve))}const nt={closed:!0,next:re,error:function fe(Ae){throw Ae},complete:re}},727:(ot,Te,k)=>{k.d(Te,{Lc:()=>le,w0:()=>re,Nn:()=>ue});var g=k(576);const O=(0,k(3888).d)(he=>function(B){he(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((W,Le)=>`${Le+1}) ${W.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var ie=k(8737);class re{constructor(U){this.initialTeardown=U,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let U;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const Se of B)Se.remove(this);else B.remove(this);const{initialTeardown:W}=this;if((0,g.m)(W))try{W()}catch(Se){U=Se instanceof O?Se.errors:[Se]}const{_finalizers:Le}=this;if(Le){this._finalizers=null;for(const Se of Le)try{de(Se)}catch(we){U=U??[],we instanceof O?U=[...U,...we.errors]:U.push(we)}}if(U)throw new O(U)}}add(U){var B;if(U&&U!==this)if(this.closed)de(U);else{if(U instanceof re){if(U.closed||U._hasParent(this))return;U._addParent(this)}(this._finalizers=null!==(B=this._finalizers)&&void 0!==B?B:[]).push(U)}}_hasParent(U){const{_parentage:B}=this;return B===U||Array.isArray(B)&&B.includes(U)}_addParent(U){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push(U),B):B?[B,U]:U}_removeParent(U){const{_parentage:B}=this;B===U?this._parentage=null:Array.isArray(B)&&(0,ie.P)(B,U)}remove(U){const{_finalizers:B}=this;B&&(0,ie.P)(B,U),U instanceof re&&U._removeParent(this)}}re.EMPTY=(()=>{const he=new re;return he.closed=!0,he})();const le=re.EMPTY;function ue(he){return he instanceof re||he&&"closed"in he&&(0,g.m)(he.remove)&&(0,g.m)(he.add)&&(0,g.m)(he.unsubscribe)}function de(he){(0,g.m)(he)?he():he.unsubscribe()}},2416:(ot,Te,k)=>{k.d(Te,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ot,Te,k)=>{k.d(Te,{E:()=>J});const J=new(k(9751).y)(re=>re.complete())},8996:(ot,Te,k)=>{k.d(Te,{D:()=>ve});var g=k(8421),J=k(5363),O=k(9468),le=k(9751),de=k(2202),he=k(576),U=k(9672);function W(Ie,Ue){if(!Ie)throw new Error("Iterable cannot be null");return new le.y(je=>{(0,U.f)(je,Ue,()=>{const V=Ie[Symbol.asyncIterator]();(0,U.f)(je,Ue,()=>{V.next().then(pe=>{pe.done?je.complete():je.next(pe.value)})},0,!0)})})}var Le=k(3670),Se=k(8239),we=k(1144),et=k(6495),ge=k(2206),fe=k(4532),Qe=k(3260);function ve(Ie,Ue){return Ue?function Ae(Ie,Ue){if(null!=Ie){if((0,Le.c)(Ie))return function ie(Ie,Ue){return(0,g.Xf)(Ie).pipe((0,O.R)(Ue),(0,J.Q)(Ue))}(Ie,Ue);if((0,we.z)(Ie))return function ue(Ie,Ue){return new le.y(je=>{let V=0;return Ue.schedule(function(){V===Ie.length?je.complete():(je.next(Ie[V++]),je.closed||this.schedule())})})}(Ie,Ue);if((0,Se.t)(Ie))return function re(Ie,Ue){return(0,g.Xf)(Ie).pipe((0,O.R)(Ue),(0,J.Q)(Ue))}(Ie,Ue);if((0,ge.D)(Ie))return W(Ie,Ue);if((0,et.T)(Ie))return function B(Ie,Ue){return new le.y(je=>{let V;return(0,U.f)(je,Ue,()=>{V=Ie[de.h](),(0,U.f)(je,Ue,()=>{let pe,z;try{({value:pe,done:z}=V.next())}catch(Q){return void je.error(Q)}z?je.complete():je.next(pe)},0,!0)}),()=>(0,he.m)(V?.return)&&V.return()})}(Ie,Ue);if((0,Qe.L)(Ie))return function nt(Ie,Ue){return W((0,Qe.Q)(Ie),Ue)}(Ie,Ue)}throw(0,fe.z)(Ie)}(Ie,Ue):(0,g.Xf)(Ie)}},8421:(ot,Te,k)=>{k.d(Te,{Xf:()=>Le});var g=k(655),J=k(1144),O=k(8239),ie=k(9751),re=k(3670),le=k(2206),ue=k(4532),de=k(6495),he=k(3260),U=k(576),B=k(7849),W=k(8822);function Le(Ae){if(Ae instanceof ie.y)return Ae;if(null!=Ae){if((0,re.c)(Ae))return function Se(Ae){return new ie.y(ve=>{const Ie=Ae[W.L]();if((0,U.m)(Ie.subscribe))return Ie.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,J.z)(Ae))return function we(Ae){return new ie.y(ve=>{for(let Ie=0;Ie<Ae.length&&!ve.closed;Ie++)ve.next(Ae[Ie]);ve.complete()})}(Ae);if((0,O.t)(Ae))return function et(Ae){return new ie.y(ve=>{Ae.then(Ie=>{ve.closed||(ve.next(Ie),ve.complete())},Ie=>ve.error(Ie)).then(null,B.h)})}(Ae);if((0,le.D)(Ae))return fe(Ae);if((0,de.T)(Ae))return function ge(Ae){return new ie.y(ve=>{for(const Ie of Ae)if(ve.next(Ie),ve.closed)return;ve.complete()})}(Ae);if((0,he.L)(Ae))return function Qe(Ae){return fe((0,he.Q)(Ae))}(Ae)}throw(0,ue.z)(Ae)}function fe(Ae){return new ie.y(ve=>{(function nt(Ae,ve){var Ie,Ue,je,V;return(0,g.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,g.KL)(Ae);!(Ue=yield Ie.next()).done;)if(ve.next(Ue.value),ve.closed)return}catch(pe){je={error:pe}}finally{try{Ue&&!Ue.done&&(V=Ie.return)&&(yield V.call(Ie))}finally{if(je)throw je.error}}ve.complete()})})(Ae,ve).catch(Ie=>ve.error(Ie))})}},6451:(ot,Te,k)=>{k.d(Te,{T:()=>le});var g=k(8189),J=k(8421),O=k(515),ie=k(7669),re=k(8996);function le(...ue){const de=(0,ie.yG)(ue),he=(0,ie._6)(ue,1/0),U=ue;return U.length?1===U.length?(0,J.Xf)(U[0]):(0,g.J)(he)((0,re.D)(U,de)):O.E}},5403:(ot,Te,k)=>{k.d(Te,{x:()=>J});var g=k(2961);function J(ie,re,le,ue,de){return new O(ie,re,le,ue,de)}class O extends g.Lv{constructor(re,le,ue,de,he,U){super(re),this.onFinalize=he,this.shouldUnsubscribe=U,this._next=le?function(B){try{le(B)}catch(W){re.error(W)}}:super._next,this._error=de?function(B){try{de(B)}catch(W){re.error(W)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(B){re.error(B)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:le}=this;super.unsubscribe(),!le&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(ot,Te,k)=>{k.d(Te,{U:()=>O});var g=k(4482),J=k(5403);function O(ie,re){return(0,g.e)((le,ue)=>{let de=0;le.subscribe((0,J.x)(ue,he=>{ue.next(ie.call(re,he,de++))}))})}},8189:(ot,Te,k)=>{k.d(Te,{J:()=>O});var g=k(5577),J=k(4671);function O(ie=1/0){return(0,g.z)(J.y,ie)}},5577:(ot,Te,k)=>{k.d(Te,{z:()=>de});var g=k(4004),J=k(8421),O=k(4482),ie=k(9672),re=k(5403),ue=k(576);function de(he,U,B=1/0){return(0,ue.m)(U)?de((W,Le)=>(0,g.U)((Se,we)=>U(W,Se,Le,we))((0,J.Xf)(he(W,Le))),B):("number"==typeof U&&(B=U),(0,O.e)((W,Le)=>function le(he,U,B,W,Le,Se,we,et){const ge=[];let fe=0,Qe=0,nt=!1;const Ae=()=>{nt&&!ge.length&&!fe&&U.complete()},ve=Ue=>fe<W?Ie(Ue):ge.push(Ue),Ie=Ue=>{Se&&U.next(Ue),fe++;let je=!1;(0,J.Xf)(B(Ue,Qe++)).subscribe((0,re.x)(U,V=>{Le?.(V),Se?ve(V):U.next(V)},()=>{je=!0},void 0,()=>{if(je)try{for(fe--;ge.length&&fe<W;){const V=ge.shift();we?(0,ie.f)(U,we,()=>Ie(V)):Ie(V)}Ae()}catch(V){U.error(V)}}))};return he.subscribe((0,re.x)(U,ve,()=>{nt=!0,Ae()})),()=>{et?.()}}(W,Le,he,B)))}},5363:(ot,Te,k)=>{k.d(Te,{Q:()=>ie});var g=k(9672),J=k(4482),O=k(5403);function ie(re,le=0){return(0,J.e)((ue,de)=>{ue.subscribe((0,O.x)(de,he=>(0,g.f)(de,re,()=>de.next(he),le),()=>(0,g.f)(de,re,()=>de.complete(),le),he=>(0,g.f)(de,re,()=>de.error(he),le)))})}},3099:(ot,Te,k)=>{k.d(Te,{B:()=>re});var g=k(8421),J=k(7579),O=k(2961),ie=k(4482);function re(ue={}){const{connector:de=(()=>new J.x),resetOnError:he=!0,resetOnComplete:U=!0,resetOnRefCountZero:B=!0}=ue;return W=>{let Le,Se,we,et=0,ge=!1,fe=!1;const Qe=()=>{Se?.unsubscribe(),Se=void 0},nt=()=>{Qe(),Le=we=void 0,ge=fe=!1},Ae=()=>{const ve=Le;nt(),ve?.unsubscribe()};return(0,ie.e)((ve,Ie)=>{et++,!fe&&!ge&&Qe();const Ue=we=we??de();Ie.add(()=>{et--,0===et&&!fe&&!ge&&(Se=le(Ae,B))}),Ue.subscribe(Ie),!Le&&et>0&&(Le=new O.Hp({next:je=>Ue.next(je),error:je=>{fe=!0,Qe(),Se=le(nt,he,je),Ue.error(je)},complete:()=>{ge=!0,Qe(),Se=le(nt,U),Ue.complete()}}),(0,g.Xf)(ve).subscribe(Le))})(W)}}function le(ue,de,...he){if(!0===de)return void ue();if(!1===de)return;const U=new O.Hp({next:()=>{U.unsubscribe(),ue()}});return de(...he).subscribe(U)}},9468:(ot,Te,k)=>{k.d(Te,{R:()=>J});var g=k(4482);function J(O,ie=0){return(0,g.e)((re,le)=>{le.add(O.schedule(()=>re.subscribe(le),ie))})}},8505:(ot,Te,k)=>{k.d(Te,{b:()=>re});var g=k(576),J=k(4482),O=k(5403),ie=k(4671);function re(le,ue,de){const he=(0,g.m)(le)||ue||de?{next:le,error:ue,complete:de}:le;return he?(0,J.e)((U,B)=>{var W;null===(W=he.subscribe)||void 0===W||W.call(he);let Le=!0;U.subscribe((0,O.x)(B,Se=>{var we;null===(we=he.next)||void 0===we||we.call(he,Se),B.next(Se)},()=>{var Se;Le=!1,null===(Se=he.complete)||void 0===Se||Se.call(he),B.complete()},Se=>{var we;Le=!1,null===(we=he.error)||void 0===we||we.call(he,Se),B.error(Se)},()=>{var Se,we;Le&&(null===(Se=he.unsubscribe)||void 0===Se||Se.call(he)),null===(we=he.finalize)||void 0===we||we.call(he)}))}):ie.y}},4408:(ot,Te,k)=>{k.d(Te,{o:()=>re});var g=k(727);class J extends g.w0{constructor(ue,de){super()}schedule(ue,de=0){return this}}const O={setInterval(le,ue,...de){const{delegate:he}=O;return he?.setInterval?he.setInterval(le,ue,...de):setInterval(le,ue,...de)},clearInterval(le){const{delegate:ue}=O;return(ue?.clearInterval||clearInterval)(le)},delegate:void 0};var ie=k(8737);class re extends J{constructor(ue,de){super(ue,de),this.scheduler=ue,this.work=de,this.pending=!1}schedule(ue,de=0){var he;if(this.closed)return this;this.state=ue;const U=this.id,B=this.scheduler;return null!=U&&(this.id=this.recycleAsyncId(B,U,de)),this.pending=!0,this.delay=de,this.id=null!==(he=this.id)&&void 0!==he?he:this.requestAsyncId(B,this.id,de),this}requestAsyncId(ue,de,he=0){return O.setInterval(ue.flush.bind(ue,this),he)}recycleAsyncId(ue,de,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return de;null!=de&&O.clearInterval(de)}execute(ue,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ue,de);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,de){let U,he=!1;try{this.work(ue)}catch(B){he=!0,U=B||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),U}unsubscribe(){if(!this.closed){const{id:ue,scheduler:de}=this,{actions:he}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(he,this),null!=ue&&(this.id=this.recycleAsyncId(de,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(ot,Te,k)=>{k.d(Te,{v:()=>O});var g=k(6063);class J{constructor(re,le=J.now){this.schedulerActionCtor=re,this.now=le}schedule(re,le=0,ue){return new this.schedulerActionCtor(this,re).schedule(ue,le)}}J.now=g.l.now;class O extends J{constructor(re,le=J.now){super(re,le),this.actions=[],this._active=!1}flush(re){const{actions:le}=this;if(this._active)return void le.push(re);let ue;this._active=!0;do{if(ue=re.execute(re.state,re.delay))break}while(re=le.shift());if(this._active=!1,ue){for(;re=le.shift();)re.unsubscribe();throw ue}}}},4986:(ot,Te,k)=>{k.d(Te,{z:()=>O});var g=k(4408);const O=new(k(7565).v)(g.o)},6063:(ot,Te,k)=>{k.d(Te,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(ot,Te,k)=>{k.d(Te,{z:()=>g});const g={setTimeout(J,O,...ie){const{delegate:re}=g;return re?.setTimeout?re.setTimeout(J,O,...ie):setTimeout(J,O,...ie)},clearTimeout(J){const{delegate:O}=g;return(O?.clearTimeout||clearTimeout)(J)},delegate:void 0}},2202:(ot,Te,k)=>{k.d(Te,{h:()=>J});const J=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ot,Te,k)=>{k.d(Te,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ot,Te,k)=>{k.d(Te,{_6:()=>le,jO:()=>ie,yG:()=>re});var g=k(576);function O(ue){return ue[ue.length-1]}function ie(ue){return(0,g.m)(O(ue))?ue.pop():void 0}function re(ue){return function J(ue){return ue&&(0,g.m)(ue.schedule)}(O(ue))?ue.pop():void 0}function le(ue,de){return"number"==typeof O(ue)?ue.pop():de}},8737:(ot,Te,k)=>{function g(J,O){if(J){const ie=J.indexOf(O);0<=ie&&J.splice(ie,1)}}k.d(Te,{P:()=>g})},3888:(ot,Te,k)=>{function g(J){const ie=J(re=>{Error.call(re),re.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}k.d(Te,{d:()=>g})},2806:(ot,Te,k)=>{k.d(Te,{O:()=>ie,x:()=>O});var g=k(2416);let J=null;function O(re){if(g.v.useDeprecatedSynchronousErrorHandling){const le=!J;if(le&&(J={errorThrown:!1,error:null}),re(),le){const{errorThrown:ue,error:de}=J;if(J=null,ue)throw de}}else re()}function ie(re){g.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=re)}},9672:(ot,Te,k)=>{function g(J,O,ie,re=0,le=!1){const ue=O.schedule(function(){ie(),le?J.add(this.schedule(null,re)):this.unsubscribe()},re);if(J.add(ue),!le)return ue}k.d(Te,{f:()=>g})},4671:(ot,Te,k)=>{function g(J){return J}k.d(Te,{y:()=>g})},1144:(ot,Te,k)=>{k.d(Te,{z:()=>g});const g=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(ot,Te,k)=>{k.d(Te,{D:()=>J});var g=k(576);function J(O){return Symbol.asyncIterator&&(0,g.m)(O?.[Symbol.asyncIterator])}},576:(ot,Te,k)=>{function g(J){return"function"==typeof J}k.d(Te,{m:()=>g})},3670:(ot,Te,k)=>{k.d(Te,{c:()=>O});var g=k(8822),J=k(576);function O(ie){return(0,J.m)(ie[g.L])}},6495:(ot,Te,k)=>{k.d(Te,{T:()=>O});var g=k(2202),J=k(576);function O(ie){return(0,J.m)(ie?.[g.h])}},8239:(ot,Te,k)=>{k.d(Te,{t:()=>J});var g=k(576);function J(O){return(0,g.m)(O?.then)}},3260:(ot,Te,k)=>{k.d(Te,{L:()=>ie,Q:()=>O});var g=k(655),J=k(576);function O(re){return(0,g.FC)(this,arguments,function*(){const ue=re.getReader();try{for(;;){const{value:de,done:he}=yield(0,g.qq)(ue.read());if(he)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(de)}}finally{ue.releaseLock()}})}function ie(re){return(0,J.m)(re?.getReader)}},4482:(ot,Te,k)=>{k.d(Te,{A:()=>J,e:()=>O});var g=k(576);function J(ie){return(0,g.m)(ie?.lift)}function O(ie){return re=>{if(J(re))return re.lift(function(le){try{return ie(le,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(ot,Te,k)=>{k.d(Te,{U:()=>O,z:()=>J});var g=k(4671);function J(...ie){return O(ie)}function O(ie){return 0===ie.length?g.y:1===ie.length?ie[0]:function(le){return ie.reduce((ue,de)=>de(ue),le)}}},7849:(ot,Te,k)=>{k.d(Te,{h:()=>O});var g=k(2416),J=k(3410);function O(ie){J.z.setTimeout(()=>{const{onUnhandledError:re}=g.v;if(!re)throw ie;re(ie)})}},4532:(ot,Te,k)=>{function g(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Te,{z:()=>g})},655:(ot,Te,k)=>{function ie(z,Q){var te={};for(var ee in z)Object.prototype.hasOwnProperty.call(z,ee)&&Q.indexOf(ee)<0&&(te[ee]=z[ee]);if(null!=z&&"function"==typeof Object.getOwnPropertySymbols){var ke=0;for(ee=Object.getOwnPropertySymbols(z);ke<ee.length;ke++)Q.indexOf(ee[ke])<0&&Object.prototype.propertyIsEnumerable.call(z,ee[ke])&&(te[ee[ke]]=z[ee[ke]])}return te}function de(z,Q,te,ee){return new(te||(te=Promise))(function(Re,at){function Kt(nn){try{We(ee.next(nn))}catch(yn){at(yn)}}function Ut(nn){try{We(ee.throw(nn))}catch(yn){at(yn)}}function We(nn){nn.done?Re(nn.value):function ke(Re){return Re instanceof te?Re:new te(function(at){at(Re)})}(nn.value).then(Kt,Ut)}We((ee=ee.apply(z,Q||[])).next())})}function ge(z){return this instanceof ge?(this.v=z,this):new ge(z)}function fe(z,Q,te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,ee=te.apply(z,Q||[]),Re=[];return ke={},at("next"),at("throw"),at("return"),ke[Symbol.asyncIterator]=function(){return this},ke;function at(qt){ee[qt]&&(ke[qt]=function(Zt){return new Promise(function(Er,At){Re.push([qt,Zt,Er,At])>1||Kt(qt,Zt)})})}function Kt(qt,Zt){try{!function Ut(qt){qt.value instanceof ge?Promise.resolve(qt.value.v).then(We,nn):yn(Re[0][2],qt)}(ee[qt](Zt))}catch(Er){yn(Re[0][3],Er)}}function We(qt){Kt("next",qt)}function nn(qt){Kt("throw",qt)}function yn(qt,Zt){qt(Zt),Re.shift(),Re.length&&Kt(Re[0][0],Re[0][1])}}function nt(z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var te,Q=z[Symbol.asyncIterator];return Q?Q.call(z):(z=function W(z){var Q="function"==typeof Symbol&&Symbol.iterator,te=Q&&z[Q],ee=0;if(te)return te.call(z);if(z&&"number"==typeof z.length)return{next:function(){return z&&ee>=z.length&&(z=void 0),{value:z&&z[ee++],done:!z}}};throw new TypeError(Q?"Object is not iterable.":"Symbol.iterator is not defined.")}(z),te={},ee("next"),ee("throw"),ee("return"),te[Symbol.asyncIterator]=function(){return this},te);function ee(Re){te[Re]=z[Re]&&function(at){return new Promise(function(Kt,Ut){!function ke(Re,at,Kt,Ut){Promise.resolve(Ut).then(function(We){Re({value:We,done:Kt})},at)}(Kt,Ut,(at=z[Re](at)).done,at.value)})}}}k.d(Te,{FC:()=>fe,KL:()=>nt,_T:()=>ie,mG:()=>de,qq:()=>ge})},4650:(ot,Te,k)=>{k.d(Te,{$8M:()=>lu,$Z:()=>Ib,AFp:()=>$E,AaK:()=>de,CRH:()=>wE,CZH:()=>vt,CqO:()=>vv,D6c:()=>xT,EJc:()=>pT,F4k:()=>oI,FYo:()=>A,FiY:()=>Be,G48:()=>rp,GfV:()=>Fe,Gpc:()=>B,JOm:()=>so,LFG:()=>Rn,LSH:()=>Gp,Lbi:()=>HE,Lck:()=>YC,MMx:()=>Wd,NdJ:()=>_v,OlP:()=>pn,PXZ:()=>z_,Q6J:()=>Ud,QGY:()=>yv,QP$:()=>Wt,Qsj:()=>R,R0b:()=>Or,RDi:()=>O0,Rgc:()=>wn,SBq:()=>h,Sil:()=>rh,Suo:()=>_E,TTD:()=>qi,TgZ:()=>xf,X6Q:()=>YE,XFs:()=>Ke,Xpm:()=>be,Xts:()=>qh,Y36:()=>ol,YKP:()=>p_,YNc:()=>aC,Yjl:()=>_e,Yz7:()=>Zt,Z0I:()=>Hi,ZZ4:()=>J_,_Bn:()=>em,_UZ:()=>mv,_Vd:()=>Au,_c5:()=>tc,_uU:()=>II,aQg:()=>Mm,c2e:()=>hT,cJS:()=>At,cg1:()=>zu,dDg:()=>Qu,dqk:()=>tn,eFA:()=>Ju,ekj:()=>Gd,eoX:()=>Em,f3M:()=>D,g9A:()=>pr,h0i:()=>Wu,hGG:()=>fh,hij:()=>kf,iGM:()=>pm,ifc:()=>it,ip1:()=>tt,jDz:()=>eE,kL8:()=>MI,lG2:()=>q,lqb:()=>Mr,lri:()=>H_,n5z:()=>Ji,oAB:()=>Mt,oxw:()=>wv,q4F:()=>Ze,qLn:()=>nf,qOj:()=>gv,qZA:()=>Mg,rWj:()=>G_,sBO:()=>ip,sIi:()=>Af,s_b:()=>Zf,soG:()=>tp,tb:()=>GE,tp0:()=>gt,uIk:()=>xg,vHH:()=>we,vpe:()=>ds,wAp:()=>mt,xp6:()=>aw,z2F:()=>Jn,zSh:()=>va,zs3:()=>Ca});var g=k(7579),J=k(727),O=k(9751),ie=k(6451),re=k(3099);function le(i){for(let s in i)if(i[s]===le)return s;throw Error("Could not find renamed property on target object.")}function ue(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function de(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(de).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function he(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const U=le({__forward_ref__:le});function B(i){return i.__forward_ref__=B,i.toString=function(){return de(this())},i}function W(i){return Le(i)?i():i}function Le(i){return"function"==typeof i&&i.hasOwnProperty(U)&&i.__forward_ref__===B}class we extends Error{constructor(s,a){super(function et(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,a)),this.code=s}}function ge(i){return"string"==typeof i?i:null==i?"":String(i)}function ve(i,s){throw new we(-201,!1)}function Ut(i,s){null==i&&function We(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function Zt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function At(i){return{providers:i.providers||[],imports:i.imports||[]}}function un(i){return mi(i,yi)||mi(i,ei)}function Hi(i){return null!==un(i)}function mi(i,s){return i.hasOwnProperty(s)?i[s]:null}function Vs(i){return i&&(i.hasOwnProperty(Xr)||i.hasOwnProperty(Bo))?i[Xr]:null}const yi=le({\u0275prov:le}),Xr=le({\u0275inj:le}),ei=le({ngInjectableDef:le}),Bo=le({ngInjectorDef:le});var Ke=(()=>((Ke=Ke||{})[Ke.Default=0]="Default",Ke[Ke.Host=1]="Host",Ke[Ke.Self=2]="Self",Ke[Ke.SkipSelf=4]="SkipSelf",Ke[Ke.Optional=8]="Optional",Ke))();let gr;function zn(i){const s=gr;return gr=i,s}function ti(i,s,a){const c=un(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Ke.Optional?null:void 0!==s?s:void ve(de(i))}function On(i){return{toString:i}.toString()}var Ln=(()=>((Ln=Ln||{})[Ln.OnPush=0]="OnPush",Ln[Ln.Default=1]="Default",Ln))(),it=(()=>{return(i=it||(it={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",it;var i})();const tn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Vr={},bt=[],ms=le({\u0275cmp:le}),Qt=le({\u0275dir:le}),Ti=le({\u0275pipe:le}),Jt=le({\u0275mod:le}),qn=le({\u0275fac:le}),br=le({__NG_ELEMENT_ID__:le});let Xe=0;function be(i){return On(()=>{const a=!0===i.standalone,c={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Ln.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||bt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||it.Emulated,id:"c"+Xe++,styles:i.styles||bt,_:null,setInput:null,schemas:i.schemas||null,tView:null},f=i.dependencies,v=i.features;return l.inputs=L(i.inputs,c),l.outputs=L(i.outputs),v&&v.forEach(I=>I(l)),l.directiveDefs=f?()=>("function"==typeof f?f():f).map(_t).filter(yt):null,l.pipeDefs=f?()=>("function"==typeof f?f():f).map(ut).filter(yt):null,l})}function _t(i){return Z(i)||He(i)}function yt(i){return null!==i}function Mt(i){return On(()=>({type:i.type,bootstrap:i.bootstrap||bt,declarations:i.declarations||bt,imports:i.imports||bt,exports:i.exports||bt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function L(i,s){if(null==i)return Vr;const a={};for(const c in i)if(i.hasOwnProperty(c)){let l=i[c],f=l;Array.isArray(l)&&(f=l[1],l=l[0]),a[l]=c,s&&(s[l]=f)}return a}const q=be;function _e(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Z(i){return i[ms]||null}function He(i){return i[Qt]||null}function ut(i){return i[Ti]||null}function Wt(i){const s=Z(i)||He(i)||ut(i);return null!==s&&s.standalone}function dn(i,s){const a=i[Jt]||null;if(!a&&!0===s)throw new Error(`Type ${de(i)} does not have '\u0275mod' property.`);return a}function tr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Cr(i){return Array.isArray(i)&&!0===i[1]}function La(i){return 0!=(8&i.flags)}function $o(i){return 2==(2&i.flags)}function dc(i){return 1==(1&i.flags)}function mr(i){return null!==i.template}function Ch(i){return 0!=(256&i[2])}function Si(i,s){return i.hasOwnProperty(qn)?i[qn]:null}class zi{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function qi(){return $s}function $s(i){return i.type.prototype.ngOnChanges&&(i.setInput=Ua),Ho}function Ho(){const i=Sh(this),s=i?.current;if(s){const a=i.previous;if(a===Vr)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function Ua(i,s,a,c){const l=Sh(i)||function Go(i,s){return i[gc]=s}(i,{previous:Vr,current:null}),f=l.current||(l.current={}),v=l.previous,I=this.declaredInputs[a],E=v[I];f[I]=new zi(E&&E.currentValue,s,v===Vr),i[c]=s}qi.ngInherit=!0;const gc="__ngSimpleChanges__";function Sh(i){return i[gc]||null}function An(i){for(;Array.isArray(i);)i=i[0];return i}function ri(i,s){return An(s[i])}function Tr(i,s){return An(s[i.index])}function go(i,s){return i.data[s]}function zt(i,s){const a=s[i];return tr(a)?a:a[0]}function Hs(i){return 64==(64&i[2])}function _i(i,s){return null==s?null:i[s]}function Ga(i){i[18]=0}function Cn(i,s){i[5]+=s;let a=i,c=i[3];for(;null!==c&&(1===s&&1===a[5]||-1===s&&0===a[5]);)c[5]+=s,a=c,c=c[3]}const Et={lFrame:Ac(null),bindingsEnabled:!0};function Zi(){return Et.bindingsEnabled}function Ce(){return Et.lFrame.lView}function Bt(){return Et.lFrame.tView}function Sn(){let i=Ka();for(;null!==i&&64===i.type;)i=i.parent;return i}function Ka(){return Et.lFrame.currentTNode}function ii(i,s){const a=Et.lFrame;a.currentTNode=i,a.isParent=s}function qo(){return Et.lFrame.isParent}function Gs(){return Et.lFrame.bindingIndex++}function Rp(i,s){const a=Et.lFrame;a.bindingIndex=a.bindingRootIndex=i,Za(s)}function Za(i){Et.lFrame.currentDirectiveIndex=i}function bc(){return Et.lFrame.currentQueryIndex}function Qo(i){Et.lFrame.currentQueryIndex=i}function Cc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Ya(i,s,a){if(a&Ke.SkipSelf){let l=s,f=i;for(;!(l=l.parent,null!==l||a&Ke.Host||(l=Cc(f),null===l||(f=f[15],10&l.type))););if(null===l)return!1;s=l,i=f}const c=Et.lFrame=Tc();return c.currentTNode=s,c.lView=i,!0}function Qa(i){const s=Tc(),a=i[1];Et.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Tc(){const i=Et.lFrame,s=null===i?null:i.child;return null===s?Ac(i):s}function Ac(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Sc(){const i=Et.lFrame;return Et.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Wl=Sc;function zs(){const i=Sc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Zn(){return Et.lFrame.selectedIndex}function jr(i){Et.lFrame.selectedIndex=i}function _n(){const i=Et.lFrame;return go(i.tView,i.selectedIndex)}function eu(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:E,ngAfterViewChecked:T,ngOnDestroy:M}=f;v&&(i.contentHooks||(i.contentHooks=[])).push(-a,v),I&&((i.contentHooks||(i.contentHooks=[])).push(a,I),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,I)),E&&(i.viewHooks||(i.viewHooks=[])).push(-a,E),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function Ws(i,s,a){vo(i,s,3,a)}function yo(i,s,a,c){(3&i[2])===a&&vo(i,s,a,c)}function Yl(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function vo(i,s,a,c){const f=c??-1,v=s.length-1;let I=0;for(let E=void 0!==c?65535&i[18]:0;E<v;E++)if("number"==typeof s[E+1]){if(I=s[E],null!=c&&I>=c)break}else s[E]<0&&(i[18]+=65536),(I<f||-1==f)&&(Ql(i,a,s,E),i[18]=(4294901760&i[18])+E+2),E++}function Ql(i,s,a,c){const l=a[c]<0,f=a[c+1],I=i[l?-a[c]:a[c]];if(l){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(I)}finally{}}}else try{f.call(I)}finally{}}class bs{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function wo(i,s,a){let c=0;for(;c<a.length;){const l=a[c];if("number"==typeof l){if(0!==l)break;c++;const f=a[c++],v=a[c++],I=a[c++];i.setAttribute(s,v,I,f)}else{const f=l,v=a[++c];iu(f)?i.setProperty(s,f,v):i.setAttribute(s,f,v),c++}}return c}function Zs(i){return 3===i||4===i||6===i}function iu(i){return 64===i.charCodeAt(0)}function Jo(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const l=s[c];"number"==typeof l?a=l:0===a||Xl(i,a,l,null,-1===a||2===a?s[++c]:null)}}return i}function Xl(i,s,a,c,l){let f=0,v=i.length;if(-1===s)v=-1;else for(;f<i.length;){const I=i[f++];if("number"==typeof I){if(I===s){v=-1;break}if(I>s){v=f-1;break}}}for(;f<i.length;){const I=i[f];if("number"==typeof I)break;if(I===a){if(null===c)return void(null!==l&&(i[f+1]=l));if(c===i[f+1])return void(i[f+2]=l)}f++,null!==c&&f++,null!==l&&f++}-1!==v&&(i.splice(v,0,s),f=v+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==l&&i.splice(f++,0,l)}function ed(i){return-1!==i}function nr(i){return 32767&i}function ea(i,s){let a=function Xo(i){return i>>16}(i),c=s;for(;a>0;)c=c[15],a--;return c}let Mi=!0;function ta(i){const s=Mi;return Mi=i,s}let kn=0;const wi={};function Ys(i,s){const a=ou(i,s);if(-1!==a)return a;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,ra(c.data,i),ra(s,null),ra(c.blueprint,null));const l=au(i,s),f=i.injectorIndex;if(ed(l)){const v=nr(l),I=ea(l,s),E=I[1].data;for(let T=0;T<8;T++)s[f+T]=I[v+T]|E[v+T]}return s[f+8]=l,f}function ra(i,s){i.push(0,0,0,0,0,0,0,0,s)}function ou(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function au(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,l=s;for(;null!==l;){if(c=Do(l),null===c)return-1;if(a++,l=l[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function Cs(i,s,a){!function su(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(br)&&(c=a[br]),null==c&&(c=a[br]=kn++);const l=255&c;s.data[i+(l>>5)]|=1<<l}(i,s,a)}function Ts(i,s,a){if(a&Ke.Optional||void 0!==i)return i;ve()}function Nc(i,s,a,c){if(a&Ke.Optional&&void 0===c&&(c=null),0==(a&(Ke.Self|Ke.Host))){const l=i[9],f=zn(void 0);try{return l?l.get(s,c,a&Ke.Optional):ti(s,c,a&Ke.Optional)}finally{zn(f)}}return Ts(c,0,a)}function Qs(i,s,a,c=Ke.Default,l){if(null!==i){if(1024&s[2]){const v=function Eo(i,s,a,c,l){let f=i,v=s;for(;null!==f&&null!==v&&1024&v[2]&&!(256&v[2]);){const I=ia(f,v,a,c|Ke.Self,wi);if(I!==wi)return I;let E=f.parent;if(!E){const T=v[21];if(T){const M=T.get(a,wi,c);if(M!==wi)return M}E=Do(v),v=v[15]}f=E}return l}(i,s,a,c,wi);if(v!==wi)return v}const f=ia(i,s,a,c,wi);if(f!==wi)return f}return Nc(s,a,c,l)}function ia(i,s,a,c,l){const f=function Oc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(br)?i[br]:void 0;return"number"==typeof s?s>=0?255&s:Pc:s}(a);if("function"==typeof f){if(!Ya(s,i,c))return c&Ke.Host?Ts(l,0,c):Nc(s,a,c,l);try{const v=f(c);if(null!=v||c&Ke.Optional)return v;ve()}finally{Wl()}}else if("number"==typeof f){let v=null,I=ou(i,s),E=-1,T=c&Ke.Host?s[16][6]:null;for((-1===I||c&Ke.SkipSelf)&&(E=-1===I?au(i,s):s[I+8],-1!==E&&sa(c,!1)?(v=s[1],I=nr(E),s=ea(E,s)):I=-1);-1!==I;){const M=s[1];if(uu(f,I,M.data)){const P=rd(I,s,a,v,c,T);if(P!==wi)return P}E=s[I+8],-1!==E&&sa(c,s[1].data[I+8]===T)&&uu(f,I,s)?(v=M,I=nr(E),s=ea(E,s)):I=-1}}return l}function rd(i,s,a,c,l,f){const v=s[1],I=v.data[i+8],M=Io(I,v,a,null==c?$o(I)&&Mi:c!=v&&0!=(3&I.type),l&Ke.Host&&f===I);return null!==M?Qi(s,v,M,I):wi}function Io(i,s,a,c,l){const f=i.providerIndexes,v=s.data,I=1048575&f,E=i.directiveStart,M=f>>20,H=l?I+M:i.directiveEnd;for(let X=c?I:I+M;X<H;X++){const me=v[X];if(X<E&&a===me||X>=E&&me.type===a)return X}if(l){const X=v[E];if(X&&mr(X)&&X.type===a)return E}return null}function Qi(i,s,a,c){let l=i[a];const f=s.data;if(function Ks(i){return i instanceof bs}(l)){const v=l;v.resolving&&function Qe(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new we(-200,`Circular dependency in DI detected for ${i}${a}`)}(function fe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ge(i)}(f[a]));const I=ta(v.canSeeViewProviders);v.resolving=!0;const E=v.injectImpl?zn(v.injectImpl):null;Ya(i,c,Ke.Default);try{l=i[a]=v.factory(void 0,f,i,c),s.firstCreatePass&&a>=c.directiveStart&&function Zl(i,s,a){const{ngOnChanges:c,ngOnInit:l,ngDoCheck:f}=s.type.prototype;if(c){const v=$s(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,v)}l&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,l),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==E&&zn(E),ta(I),v.resolving=!1,Wl()}}return l}function uu(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function sa(i,s){return!(i&Ke.Self||i&Ke.Host&&s)}class Js{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return Qs(this._tNode,this._lView,s,c,a)}}function Pc(){return new Js(Sn(),Ce())}function Ji(i){return On(()=>{const s=i.prototype.constructor,a=s[qn]||cu(s),c=Object.prototype;let l=Object.getPrototypeOf(i.prototype).constructor;for(;l&&l!==c;){const f=l[qn]||cu(l);if(f&&f!==a)return f;l=Object.getPrototypeOf(l)}return f=>new f})}function cu(i){return Le(i)?()=>{const s=cu(W(i));return s&&s()}:Si(i)}function Do(i){const s=i[1],a=s.type;return 2===a?s.declTNode:1===a?i[6]:null}function lu(i){return function nd(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let l=0;for(;l<c;){const f=a[l];if(Zs(f))break;if(0===f)l+=2;else if("number"==typeof f)for(l++;l<c&&"string"==typeof a[l];)l++;else{if(f===s)return a[l+1];l+=2}}}return null}(Sn(),i)}const As="__parameters__";function To(i,s,a){return On(()=>{const c=function du(i){return function(...a){if(i){const c=i(...a);for(const l in c)this[l]=c[l]}}}(s);function l(...f){if(this instanceof l)return c.apply(this,f),this;const v=new l(...f);return I.annotation=v,I;function I(E,T,M){const P=E.hasOwnProperty(As)?E[As]:Object.defineProperty(E,As,{value:[]})[As];for(;P.length<=M;)P.push(null);return(P[M]=P[M]||[]).push(v),E}}return a&&(l.prototype=Object.create(a.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}class pn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Zt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Hr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(s===i&&(s=i.slice(0,a)),Hr(c,s)):s!==i&&s.push(c)}return s}function Ii(i,s){i.forEach(a=>Array.isArray(a)?Ii(a,s):s(a))}function Fc(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Ao(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Sr(i,s,a){let c=es(i,s);return c>=0?i[1|c]=a:(c=~c,function wt(i,s,a,c){let l=i.length;if(l==s)i.push(a,c);else if(1===l)i.push(c,i[0]),i[0]=a;else{for(l--,i.push(i[l-1],i[l]);l>s;)i[l]=i[l-2],l--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function ua(i,s){const a=es(i,s);if(a>=0)return i[1|a]}function es(i,s){return function xr(i,s,a){let c=0,l=i.length>>a;for(;l!==c;){const f=c+(l-c>>1),v=i[f<<a];if(s===v)return f<<a;v>s?l=f:c=f+1}return~(l<<a)}(i,s,1)}const gn={},Ni="__NG_DI_FLAG__",gu="ngTempTokenPath",mu=/\n/gm,sd="__source";let eo;function ts(i){const s=eo;return eo=i,s}function Uc(i,s=Ke.Default){if(void 0===eo)throw new we(-203,!1);return null===eo?ti(i,void 0,s):eo.get(i,s&Ke.Optional?null:void 0,s)}function Rn(i,s=Ke.Default){return(function gs(){return gr}()||Uc)(W(i),s)}function D(i,s=Ke.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),Rn(i,s)}function C(i){const s=[];for(let a=0;a<i.length;a++){const c=W(i[a]);if(Array.isArray(c)){if(0===c.length)throw new we(900,!1);let l,f=Ke.Default;for(let v=0;v<c.length;v++){const I=c[v],E=F(I);"number"==typeof E?-1===E?l=I.token:f|=E:l=I}s.push(Rn(l,f))}else s.push(Rn(c))}return s}function x(i,s){return i[Ni]=s,i.prototype[Ni]=s,i}function F(i){return i[Ni]}const Be=x(To("Optional"),8),gt=x(To("SkipSelf"),4);let Vp;function O0(i){Vp=i}class vu{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function is(i){return i instanceof vu?i.changingThisBreaksApplicationSecurity:i}const no=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var sr=(()=>((sr=sr||{})[sr.NONE=0]="NONE",sr[sr.HTML=1]="HTML",sr[sr.STYLE=2]="STYLE",sr[sr.SCRIPT=3]="SCRIPT",sr[sr.URL=4]="URL",sr[sr.RESOURCE_URL=5]="RESOURCE_URL",sr))();function Gp(i){const s=function ya(){const i=Ce();return i&&i[12]}();return s?s.sanitize(sr.URL,i)||"":function Mo(i,s){const a=function _u(i){return i instanceof vu&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?is(i):function Iu(i){return(i=String(i)).match(no)?i:"unsafe:"+i}(ge(i))}const qh=new pn("ENVIRONMENT_INITIALIZER"),Wh=new pn("INJECTOR",-1),qp=new pn("INJECTOR_DEF_TYPES");class my{get(s,a=gn){if(a===gn){const c=new Error(`NullInjectorError: No provider for ${de(s)}!`);throw c.name="NullInjectorError",c}return a}}function Kh(...i){return{\u0275providers:pd(0,i)}}function pd(i,...s){const a=[],c=new Set;let l;return Ii(s,f=>{const v=f;gd(v,a,[],c)&&(l||(l=[]),l.push(v))}),void 0!==l&&Kc(l,a),a}function Kc(i,s){for(let a=0;a<i.length;a++){const{providers:l}=i[a];Ii(l,f=>{s.push(f)})}}function gd(i,s,a,c){if(!(i=W(i)))return!1;let l=null,f=Vs(i);const v=!f&&Z(i);if(f||v){if(v&&!v.standalone)return!1;l=i}else{const E=i.ngModule;if(f=Vs(E),!f)return!1;l=E}const I=c.has(l);if(v){if(I)return!1;if(c.add(l),v.dependencies){const E="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const T of E)gd(T,s,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!I){let T;c.add(l);try{Ii(f.imports,M=>{gd(M,s,a,c)&&(T||(T=[]),T.push(M))})}finally{}void 0!==T&&Kc(T,s)}if(!I){const T=Si(l)||(()=>new l);s.push({provide:l,useFactory:T,deps:bt},{provide:qp,useValue:l,multi:!0},{provide:qh,useValue:()=>Rn(l),multi:!0})}const E=f.providers;null==E||I||Ii(E,M=>{s.push(M)})}}return l!==i&&void 0!==i.providers}const Zc=le({provide:String,useValue:le});function Zh(i){return null!==i&&"object"==typeof i&&Zc in i}function ss(i){return"function"==typeof i}const va=new pn("Set Injector scope."),Tu={},Yh={};let Yc;function md(){return void 0===Yc&&(Yc=new my),Yc}class Mr{}class Qh extends Mr{constructor(s,a,c,l){super(),this.parent=a,this.source=c,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_a(s,v=>this.processProvider(v)),this.records.set(Wh,or(void 0,this)),l.has("environment")&&this.records.set(Mr,or(void 0,this));const f=this.records.get(va);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(qp.multi,bt,Ke.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=ts(this),c=zn(void 0);try{return s()}finally{ts(a),zn(c)}}get(s,a=gn,c=Ke.Default){this.assertNotDestroyed();const l=ts(this),f=zn(void 0);try{if(!(c&Ke.SkipSelf)){let I=this.records.get(s);if(void 0===I){const E=function j0(i){return"function"==typeof i||"object"==typeof i&&i instanceof pn}(s)&&un(s);I=E&&this.injectableDefInScope(E)?or(yd(s),Tu):null,this.records.set(s,I)}if(null!=I)return this.hydrate(s,I)}return(c&Ke.Self?md():this.parent).get(s,a=c&Ke.Optional&&a===gn?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[gu]=v[gu]||[]).unshift(de(s)),l)throw v;return function K(i,s,a,c){const l=i[gu];throw s[sd]&&l.unshift(s[sd]),i.message=function ne(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let l=de(s);if(Array.isArray(s))l=s.map(de).join(" -> ");else if("object"==typeof s){let f=[];for(let v in s)if(s.hasOwnProperty(v)){let I=s[v];f.push(v+":"+("string"==typeof I?JSON.stringify(I):de(I)))}l=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${l}]: ${i.replace(mu,"\n  ")}`}("\n"+i.message,l,a,c),i.ngTokenPath=l,i[gu]=null,i}(v,s,"R3InjectorError",this.source)}throw v}finally{zn(f),ts(l)}}resolveInjectorInitializers(){const s=ts(this),a=zn(void 0);try{const c=this.get(qh.multi,bt,Ke.Self);for(const l of c)l()}finally{ts(s),zn(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(de(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new we(205,!1)}processProvider(s){let a=ss(s=W(s))?s:W(s&&s.provide);const c=function Jh(i){return Zh(i)?or(void 0,i.useValue):or(Xh(i),Tu)}(s);if(ss(s)||!0!==s.multi)this.records.get(a);else{let l=this.records.get(a);l||(l=or(void 0,Tu,!0),l.factory=()=>C(l.multi),this.records.set(a,l)),a=s,l.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===Tu&&(a.value=Yh,a.value=a.factory()),"object"==typeof a.value&&a.value&&function ef(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=W(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function yd(i){const s=un(i),a=null!==s?s.factory:Si(i);if(null!==a)return a;if(i instanceof pn)throw new we(204,!1);if(i instanceof Function)return function _y(i){const s=i.length;if(s>0)throw function Ei(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new we(204,!1);const a=function Dr(i){const s=i&&(i[yi]||i[ei]);if(s){const a=function Lr(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new we(204,!1)}function Xh(i,s,a){let c;if(ss(i)){const l=W(i);return Si(l)||yd(l)}if(Zh(i))c=()=>W(i.useValue);else if(function Cu(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...C(i.deps||[]));else if(function qr(i){return!(!i||!i.useExisting)}(i))c=()=>Rn(W(i.useExisting));else{const l=W(i&&(i.useClass||i.provide));if(!function vd(i){return!!i.deps}(i))return Si(l)||yd(l);c=()=>new l(...C(i.deps))}return c}function or(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function os(i){return!!i.\u0275providers}function _a(i,s){for(const a of i)Array.isArray(a)?_a(a,s):os(a)?_a(a.\u0275providers,s):s(a)}class _d{}class Iy{resolveComponentFactory(s){throw function wa(i){const s=Error(`No component factory found for ${de(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Au=(()=>{class i{}return i.NULL=new Iy,i})();function Ey(){return y(Sn(),Ce())}function y(i,s){return new h(Tr(i,s))}let h=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Ey,i})();function p(i){return i instanceof h?i.nativeElement:i}class A{}let R=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function G(){const i=Ce(),a=zt(Sn().index,i);return(tr(a)?a:i)[11]}(),i})(),ae=(()=>{class i{}return i.\u0275prov=Zt({token:i,providedIn:"root",factory:()=>null}),i})();class Fe{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Ze=new Fe("14.2.9"),ht={};function Qc(i){return i.ngOriginalError}class nf{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Qc(s);for(;a&&Qc(a);)a=Qc(a);return a||null}}const rf=new Map;let sf=0;const as="__ngContext__";function hn(i,s){tr(s)?(i[as]=s[20],function q0(i){rf.set(i[20],i)}(s)):i[as]=s}function us(i){return i instanceof Function?i():i}var so=(()=>((so=so||{})[so.Important=1]="Important",so[so.DashCase=2]="DashCase",so))();function Z0(i,s){return undefined(i,s)}function uf(i){const s=i[3];return Cr(s)?s[3]:s}function eg(i){return Py(i[13])}function Oy(i){return Py(i[4])}function Py(i){for(;null!==i&&!Cr(i);)i=i[4];return i}function el(i,s,a,c,l){if(null!=c){let f,v=!1;Cr(c)?f=c:tr(c)&&(v=!0,c=c[0]);const I=An(c);0===i&&null!==a?null==l?Fy(s,a,I):Ru(s,a,I,l||null,!0):1===i&&null!==a?Ru(s,a,I,l||null,!0):2===i?function ib(i,s,a){const c=rl(i,s);c&&function nb(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,I,v):3===i&&s.destroyNode(I),null!=f&&function pf(i,s,a,c,l){const f=a[7];f!==An(a)&&el(s,i,c,f,l);for(let I=10;I<a.length;I++){const E=a[I];ff(E[1],E,i,s,c,f)}}(s,i,f,a,l)}}function jt(i,s,a){return i.createElement(s,a)}function J0(i,s){const a=i[9],c=a.indexOf(s),l=s[3];512&s[2]&&(s[2]&=-513,Cn(l,-1)),a.splice(c,1)}function Cd(i,s){if(i.length<=10)return;const a=10+s,c=i[a];if(c){const l=c[17];null!==l&&l!==i&&J0(l,c),s>0&&(i[a-1][4]=c[4]);const f=Ao(i,10+s);!function lf(i,s){ff(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const v=f[19];null!==v&&v.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Td(i,s){if(!(128&s[2])){const a=s[11];a.destroyNode&&ff(i,s,a,3,null,null),function eb(i){let s=i[13];if(!s)return ng(i[1],i);for(;s;){let a=null;if(tr(s))a=s[13];else{const c=s[10];c&&(a=c)}if(!a){for(;s&&!s[4]&&s!==i;)tr(s)&&ng(s[1],s),s=s[3];null===s&&(s=i),tr(s)&&ng(s[1],s),a=s&&s[4]}s=a}}(s)}}function ng(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function tb(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const l=s[a[c]];if(!(l instanceof bs)){const f=a[c+1];if(Array.isArray(f))for(let v=0;v<f.length;v+=2){const I=l[f[v]],E=f[v+1];try{E.call(I)}finally{}}else try{f.call(l)}finally{}}}}(i,s),function rg(i,s){const a=i.cleanup,c=s[7];let l=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const v=a[f+1],I="function"==typeof v?v(s):An(s[v]),E=c[l=a[f+2]],T=a[f+3];"boolean"==typeof T?I.removeEventListener(a[f],E,T):T>=0?c[l=T]():c[l=-T].unsubscribe(),f+=2}else{const v=c[l=a[f+1]];a[f].call(v)}if(null!==c){for(let f=l+1;f<c.length;f++)(0,c[f])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const a=s[17];if(null!==a&&Cr(s[3])){a!==s[3]&&J0(a,s);const c=s[19];null!==c&&c.detachView(i)}!function Sy(i){rf.delete(i[20])}(s)}}function ig(i,s,a){return function df(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[0];if(2&c.flags){const l=i.data[c.directiveStart].encapsulation;if(l===it.None||l===it.Emulated)return null}return Tr(c,a)}(i,s.parent,a)}function Ru(i,s,a,c,l){i.insertBefore(s,a,c,l)}function Fy(i,s,a){i.appendChild(s,a)}function X0(i,s,a,c,l){null!==c?Ru(i,s,a,c,l):Fy(i,s,a)}function rl(i,s){return i.parentNode(s)}let nw=function tw(i,s,a){return 40&i.type?Tr(i,a):null};function il(i,s,a,c){const l=ig(i,c,s),f=s[11],I=function ew(i,s,a){return nw(i,s,a)}(c.parent||s[6],c,s);if(null!=l)if(Array.isArray(a))for(let E=0;E<a.length;E++)X0(f,l,a[E],I,!1);else X0(f,l,a,I,!1)}function og(i,s){if(null!==s){const a=s.type;if(3&a)return Tr(s,i);if(4&a)return hf(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return og(i,c);{const l=i[s.index];return Cr(l)?hf(-1,l):An(l)}}if(32&a)return Z0(s,i)()||An(i[s.index]);{const c=Nu(i,s);return null!==c?Array.isArray(c)?c[0]:og(uf(i[16]),c):og(i,s.next)}}return null}function Nu(i,s){return null!==s?i[16][6].projection[s.projection]:null}function hf(i,s){const a=10+i+1;if(a<s.length){const c=s[a],l=c[1].firstChild;if(null!==l)return og(c,l)}return s[7]}function Vy(i,s,a,c,l,f,v){for(;null!=a;){const I=c[a.index],E=a.type;if(v&&0===s&&(I&&hn(An(I),c),a.flags|=4),64!=(64&a.flags))if(8&E)Vy(i,s,a.child,c,l,f,!1),el(s,i,l,I,f);else if(32&E){const T=Z0(a,c);let M;for(;M=T();)el(s,i,l,M,f);el(s,i,l,I,f)}else 16&E?Ad(i,s,c,a,l,f):el(s,i,l,I,f);a=v?a.projectionNext:a.next}}function ff(i,s,a,c,l,f){Vy(a,c,i.firstChild,s,l,f,!1)}function Ad(i,s,a,c,l,f){const v=a[16],E=v[6].projection[c.projection];if(Array.isArray(E))for(let T=0;T<E.length;T++)el(s,i,l,E[T],f);else Vy(i,s,E,v[3],l,f,!0)}function Uy(i,s,a){i.setAttribute(s,"style",a)}function ag(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function By(i,s,a){let c=i.length;for(;;){const l=i.indexOf(s,a);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const f=s.length;if(l+f===c||i.charCodeAt(l+f)<=32)return l}a=l+1}}const rw="ng-template";function ob(i,s,a){let c=0;for(;c<i.length;){let l=i[c++];if(a&&"class"===l){if(l=i[c],-1!==By(l.toLowerCase(),s,0))return!0}else if(1===l){for(;c<i.length&&"string"==typeof(l=i[c++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function jy(i){return 4===i.type&&i.value!==rw}function ab(i,s,a){return s===(4!==i.type||a?i.value:rw)}function $y(i,s,a){let c=4;const l=i.attrs||[],f=function iw(i){for(let s=0;s<i.length;s++)if(Zs(i[s]))return s;return i.length}(l);let v=!1;for(let I=0;I<s.length;I++){const E=s[I];if("number"!=typeof E){if(!v)if(4&c){if(c=2|1&c,""!==E&&!ab(i,E,a)||""===E&&1===s.length){if(Di(c))return!1;v=!0}}else{const T=8&c?E:s[++I];if(8&c&&null!==i.attrs){if(!ob(i.attrs,T,a)){if(Di(c))return!1;v=!0}continue}const P=ub(8&c?"class":E,l,jy(i),a);if(-1===P){if(Di(c))return!1;v=!0;continue}if(""!==T){let H;H=P>f?"":l[P+1].toLowerCase();const X=8&c?H:null;if(X&&-1!==By(X,T,0)||2&c&&T!==H){if(Di(c))return!1;v=!0}}}}else{if(!v&&!Di(c)&&!Di(E))return!1;if(v&&Di(E))continue;v=!1,c=E|1&c}}return Di(c)||v}function Di(i){return 0==(1&i)}function ub(i,s,a,c){if(null===s)return-1;let l=0;if(c||!a){let f=!1;for(;l<s.length;){const v=s[l];if(v===i)return l;if(3===v||6===v)f=!0;else{if(1===v||2===v){let I=s[++l];for(;"string"==typeof I;)I=s[++l];continue}if(4===v)break;if(0===v){l+=4;continue}}l+=f?1:2}return-1}return function sw(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function ug(i,s,a=!1){for(let c=0;c<s.length;c++)if($y(i,s[c],a))return!0;return!1}function cg(i,s){return i?":not("+s.trim()+")":s}function sl(i){let s=i[0],a=1,c=2,l="",f=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&c){const I=i[++a];l+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?l+="."+v:4&c&&(l+=" "+v);else""!==l&&!Di(v)&&(s+=cg(f,l),l=""),c=v,f=f||!Di(c);a++}return""!==l&&(s+=cg(f,l)),s}const Ot={};function aw(i){uw(Bt(),Ce(),Zn()+i,!1)}function uw(i,s,a,c){if(!c)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&Ws(s,f,a)}else{const f=i.preOrderHooks;null!==f&&yo(s,f,0,a)}jr(a)}function hw(i,s=null,a=null,c){const l=Hy(i,s,a,c);return l.resolveInjectorInitializers(),l}function Hy(i,s=null,a=null,c,l=new Set){const f=[a||bt,Kh(i)];return c=c||("object"==typeof i?void 0:de(i)),new Qh(f,s||md(),c||null,l)}let Ca=(()=>{class i{static create(a,c){if(Array.isArray(a))return hw({name:""},c,a,"");{const l=a.name??"";return hw({name:l},a.parent,a.providers,l)}}}return i.THROW_IF_NOT_FOUND=gn,i.NULL=new my,i.\u0275prov=Zt({token:i,providedIn:"any",factory:()=>Rn(Wh)}),i.__NG_ELEMENT_ID__=-1,i})();function ol(i,s=Ke.Default){const a=Ce();return null===a?Rn(i,s):Qs(Sn(),a,W(i),s)}function Ib(){throw new Error("invalid")}function Zy(i,s){return i<<17|s<<2}function Ro(i){return i>>17&32767}function Yy(i){return 2|i}function Ta(i){return(131068&i)>>2}function mf(i,s){return-131069&i|s<<2}function fg(i){return 1|i}function Df(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const l=a[c],f=a[c+1];if(-1!==f){const v=i.data[f];Qo(l),v.contentQueries(2,s[f],f)}}}function ul(i,s,a,c,l,f,v,I,E,T,M){const P=s.blueprint.slice();return P[0]=l,P[2]=76|c,(null!==M||i&&1024&i[2])&&(P[2]|=1024),Ga(P),P[3]=P[15]=i,P[8]=a,P[10]=v||i&&i[10],P[11]=I||i&&i[11],P[12]=E||i&&i[12]||null,P[9]=T||i&&i[9]||null,P[6]=f,P[20]=function Jc(){return sf++}(),P[21]=M,P[16]=2==s.type?i[16]:P,P}function Aa(i,s,a,c,l){let f=i.data[s];if(null===f)f=function yg(i,s,a,c,l){const f=Ka(),v=qo(),E=i.data[s]=function Rb(i,s,a,c,l,f){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?f:f&&f.parent,a,s,c,l);return null===i.firstChild&&(i.firstChild=E),null!==f&&(v?null==f.child&&null!==E.parent&&(f.child=E):null===f.next&&(f.next=E)),E}(i,s,a,c,l),function Mp(){return Et.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=c,f.attrs=l;const v=function mo(){const i=Et.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===v?-1:v.injectorIndex}return ii(f,!0),f}function No(i,s,a,c){if(0===a)return-1;const l=s.length;for(let f=0;f<a;f++)s.push(c),i.blueprint.push(c),i.data.push(null);return l}function vg(i,s,a){Qa(s);try{const c=i.viewQuery;null!==c&&hv(1,c,a);const l=i.template;null!==l&&Pw(i,s,l,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Df(i,s),i.staticViewQueries&&hv(2,i.viewQuery,a);const f=i.components;null!==f&&function Ow(i,s){for(let a=0;a<s.length;a++)jb(i,s[a])}(s,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,zs()}}function _g(i,s,a,c){const l=s[2];if(128!=(128&l)){Qa(s);try{Ga(s),function Ec(i){return Et.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Pw(i,s,a,2,c);const v=3==(3&l);if(v){const T=i.preOrderCheckHooks;null!==T&&Ws(s,T,null)}else{const T=i.preOrderHooks;null!==T&&yo(s,T,0,null),Yl(s,0)}if(function Bb(i){for(let s=eg(i);null!==s;s=Oy(s)){if(!s[2])continue;const a=s[9];for(let c=0;c<a.length;c++){const l=a[c],f=l[3];0==(512&l[2])&&Cn(f,1),l[2]|=512}}}(s),function Ub(i){for(let s=eg(i);null!==s;s=Oy(s))for(let a=10;a<s.length;a++){const c=s[a],l=c[1];Hs(c)&&_g(l,c,l.template,c[8])}}(s),null!==i.contentQueries&&Df(i,s),v){const T=i.contentCheckHooks;null!==T&&Ws(s,T)}else{const T=i.contentHooks;null!==T&&yo(s,T,1),Yl(s,1)}!function Sb(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const l=a[c];if(l<0)jr(~l);else{const f=l,v=a[++c],I=a[++c];Rp(v,f),I(2,s[f])}}}finally{jr(-1)}}(i,s);const I=i.components;null!==I&&function Nw(i,s){for(let a=0;a<s.length;a++)Dg(i,s[a])}(s,I);const E=i.viewQuery;if(null!==E&&hv(2,E,c),v){const T=i.viewCheckHooks;null!==T&&Ws(s,T)}else{const T=i.viewHooks;null!==T&&yo(s,T,2),Yl(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,Cn(s[3],-1))}finally{zs()}}}function Pw(i,s,a,c,l){const f=Zn(),v=2&c;try{jr(-1),v&&s.length>22&&uw(i,s,22,!1),a(c,l)}finally{jr(f)}}function rv(i,s,a){!Zi()||(function kb(i,s,a,c){const l=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||Ys(a,s),hn(c,s);const v=a.initialInputs;for(let I=l;I<f;I++){const E=i.data[I],T=mr(E);T&&Vb(s,a,E);const M=Qi(s,i,I,a);hn(M,s),null!==v&&Ig(0,I-l,M,E,0,v),T&&(zt(a.index,s)[8]=M)}}(i,s,a,Tr(a,s)),128==(128&a.flags)&&function Fb(i,s,a){const c=a.directiveStart,l=a.directiveEnd,f=a.index,v=function Dc(){return Et.lFrame.currentDirectiveIndex}();try{jr(f);for(let I=c;I<l;I++){const E=i.data[I],T=s[I];Za(I),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&jw(E,T)}}finally{jr(-1),Za(v)}}(i,s,a))}function iv(i,s,a=Tr){const c=s.localNames;if(null!==c){let l=s.index+1;for(let f=0;f<c.length;f+=2){const v=c[f+1],I=-1===v?a(s,i):i[v];i[l++]=I}}}function bf(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=sv(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function sv(i,s,a,c,l,f,v,I,E,T){const M=22+c,P=M+l,H=function xb(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:Ot);return a}(M,P),X="function"==typeof T?T():T;return H[1]={type:i,blueprint:H,template:a,queries:null,viewQuery:I,declTNode:s,data:H.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:E,consts:X,incompleteFirstPass:!1}}function Fw(i,s,a,c){const l=cl(s);null===a?l.push(c):(l.push(a),i.firstCreatePass&&Tf(i).push(c,l.length-1))}function Lw(i,s,a){for(let c in i)if(i.hasOwnProperty(c)){const l=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(s,l):a[c]=[s,l]}return a}function ov(i,s){const c=s.directiveEnd,l=i.data,f=s.attrs,v=[];let I=null,E=null;for(let T=s.directiveStart;T<c;T++){const M=l[T],P=M.inputs,H=null===f||jy(s)?null:qw(P,f);v.push(H),I=Lw(P,T,I),E=Lw(M.outputs,T,E)}null!==I&&(I.hasOwnProperty("class")&&(s.flags|=16),I.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=v,s.inputs=I,s.outputs=E}function av(i,s){const a=zt(s,i);16&a[2]||(a[2]|=32)}function uv(i,s,a,c){let l=!1;if(Zi()){const f=function $w(i,s,a){const c=i.directiveRegistry;let l=null;if(c)for(let f=0;f<c.length;f++){const v=c[f];ug(a,v.selectors,!1)&&(l||(l=[]),Cs(Ys(a,s),i,v.type),mr(v)?(wg(i,a),l.unshift(v)):l.push(v))}return l}(i,s,a),v=null===c?null:{"":-1};if(null!==f){l=!0,Lb(a,i.data.length,f.length);for(let M=0;M<f.length;M++){const P=f[M];P.providersResolver&&P.providersResolver(P)}let I=!1,E=!1,T=No(i,s,f.length,null);for(let M=0;M<f.length;M++){const P=f[M];a.mergedAttrs=Jo(a.mergedAttrs,P.hostAttrs),zw(i,a,s,T,P),Gw(T,P,v),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const H=P.type.prototype;!I&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),I=!0),!E&&(H.ngOnChanges||H.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),T++}ov(i,a)}v&&function Hw(i,s,a){if(s){const c=i.localNames=[];for(let l=0;l<s.length;l+=2){const f=a[s[l+1]];if(null==f)throw new we(-301,!1);c.push(s[l],f)}}}(a,c,v)}return a.mergedAttrs=Jo(a.mergedAttrs,a.attrs),l}function Bw(i,s,a,c,l,f){const v=f.hostBindings;if(v){let I=i.hostBindingOpCodes;null===I&&(I=i.hostBindingOpCodes=[]);const E=~s.index;(function Pb(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(I)!=E&&I.push(E),I.push(c,l,v)}}function jw(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function wg(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function Gw(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;mr(s)&&(a[""]=i)}}function Lb(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function zw(i,s,a,c,l){i.data[c]=l;const f=l.factory||(l.factory=Si(l.type)),v=new bs(f,mr(l),ol);i.blueprint[c]=v,a[c]=v,Bw(i,s,0,c,No(i,a,l.hostVars,Ot),l)}function Vb(i,s,a){const c=Tr(s,i),l=bf(a),f=i[10],v=bg(i,ul(i,l,null,a.onPush?32:16,c,s,f,f.createRenderer(c,a),null,null,null));i[s.index]=v}function Oo(i,s,a,c,l,f){const v=Tr(i,s);!function cv(i,s,a,c,l,f,v){if(null==f)i.removeAttribute(s,l,a);else{const I=null==v?ge(f):v(f,c||"",l);i.setAttribute(s,l,I,a)}}(s[11],v,f,i.value,a,c,l)}function Ig(i,s,a,c,l,f){const v=f[s];if(null!==v){const I=c.setInput;for(let E=0;E<v.length;){const T=v[E++],M=v[E++],P=v[E++];null!==I?c.setInput(a,P,T,M):a[M]=P}}}function qw(i,s){let a=null,c=0;for(;c<s.length;){const l=s[c];if(0!==l)if(5!==l){if("number"==typeof l)break;i.hasOwnProperty(l)&&(null===a&&(a=[]),a.push(l,i[l],s[c+1])),c+=2}else c+=2;else c+=4}return a}function Eg(i,s,a,c){return new Array(i,!0,!1,s,null,0,c,a,null,null)}function Dg(i,s){const a=zt(s,i);if(Hs(a)){const c=a[1];48&a[2]?_g(c,a,c.template,a[8]):a[5]>0&&lv(a)}}function lv(i){for(let c=eg(i);null!==c;c=Oy(c))for(let l=10;l<c.length;l++){const f=c[l];if(Hs(f))if(512&f[2]){const v=f[1];_g(v,f,v.template,f[8])}else f[5]>0&&lv(f)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const l=zt(a[c],i);Hs(l)&&l[5]>0&&lv(l)}}function jb(i,s){const a=zt(s,i),c=a[1];(function $b(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),vg(c,a,a[8])}function bg(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function dv(i){for(;i;){i[2]|=32;const s=uf(i);if(Ch(i)&&!s)return i;i=s}return null}function Cf(i,s,a,c=!0){const l=s[10];l.begin&&l.begin();try{_g(i,s,i.template,a)}catch(v){throw c&&Zw(s,v),v}finally{l.end&&l.end()}}function hv(i,s,a){Qo(0),s(i,a)}function cl(i){return i[7]||(i[7]=[])}function Tf(i){return i.cleanup||(i.cleanup=[])}function Zw(i,s){const a=i[9],c=a?a.get(nf,null):null;c&&c.handleError(s)}function Cg(i,s,a,c,l){for(let f=0;f<a.length;){const v=a[f++],I=a[f++],E=s[v],T=i.data[v];null!==T.setInput?T.setInput(E,l,c,I):E[I]=l}}function fv(i,s,a){let c=a?i.styles:null,l=a?i.classes:null,f=0;if(null!==s)for(let v=0;v<s.length;v++){const I=s[v];"number"==typeof I?f=I:1==f?l=he(l,I):2==f&&(c=he(c,I+": "+s[++v]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=l:i.classesWithoutHost=l}function Tg(i,s,a,c,l=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&c.push(An(f)),Cr(f))for(let I=10;I<f.length;I++){const E=f[I],T=E[1].firstChild;null!==T&&Tg(E[1],E,T,c)}const v=a.type;if(8&v)Tg(i,s,a.child,c);else if(32&v){const I=Z0(a,s);let E;for(;E=I();)c.push(E)}else if(16&v){const I=Nu(s,a);if(Array.isArray(I))c.push(...I);else{const E=uf(s[16]);Tg(E[1],E,I,c,!0)}}a=l?a.projectionNext:a.next}return c}class ll{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Tg(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Cr(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(Cd(s,c),Ao(a,c))}this._attachedToViewContainer=!1}Td(this._lView[1],this._lView)}onDestroy(s){Fw(this._lView[1],this._lView,null,s)}markForCheck(){dv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Cf(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new we(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function nl(i,s){ff(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new we(902,!1);this._appRef=s}}class Yw extends ll{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Cf(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class Pd extends Au{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Z(s);return new dl(a,this.ngModule)}}function Gb(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class kd{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){const l=this.injector.get(s,ht,c);return l!==ht||a===ht?l:this.parentInjector.get(s,a,c)}}class dl extends _d{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function lg(i){return i.map(sl).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Gb(this.componentDef.inputs)}get outputs(){return Gb(this.componentDef.outputs)}create(s,a,c,l){let f=(l=l||this.ngModule)instanceof Mr?l:l?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const v=f?new kd(s,f):s,I=v.get(A,null);if(null===I)throw new we(407,!1);const E=v.get(ae,null),T=I.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",P=c?function Mb(i,s,a){return i.selectRootElement(s,a===it.ShadowDom)}(T,c,this.componentDef.encapsulation):jt(I.createRenderer(null,this.componentDef),M,function Qw(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(M)),H=this.componentDef.onPush?288:272,X=sv(0,null,null,1,0,null,null,null,null,null),me=ul(null,X,null,H,null,null,I,T,E,v,null);let Me,Ge;Qa(me);try{const Ye=function qb(i,s,a,c,l,f){const v=a[1];a[22]=i;const E=Aa(v,22,2,"#host",null),T=E.mergedAttrs=s.hostAttrs;null!==T&&(fv(E,T,!0),null!==i&&(wo(l,i,T),null!==E.classes&&ag(l,i,E.classes),null!==E.styles&&Uy(l,i,E.styles)));const M=c.createRenderer(i,s),P=ul(a,bf(s),null,s.onPush?32:16,a[22],E,c,M,f||null,null,null);return v.firstCreatePass&&(Cs(Ys(E,a),v,s.type),wg(v,E),Lb(E,a.length,1)),bg(a,P),a[22]=P}(P,this.componentDef,me,I,T);if(P)if(c)wo(T,P,["ng-version",Ze.full]);else{const{attrs:pt,classes:De}=function ow(i){const s=[],a=[];let c=1,l=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===l?""!==f&&s.push(f,i[++c]):8===l&&a.push(f);else{if(!Di(l))break;l=f}c++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);pt&&wo(T,P,pt),De&&De.length>0&&ag(T,P,De.join(" "))}if(Ge=go(X,22),void 0!==a){const pt=Ge.projection=[];for(let De=0;De<this.ngContentSelectors.length;De++){const It=a[De];pt.push(null!=It?Array.from(It):null)}}Me=function Wb(i,s,a,c){const l=a[1],f=function Uw(i,s,a){const c=Sn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),zw(i,c,s,No(i,s,1,null),a),ov(i,c));const l=Qi(s,i,c.directiveStart,c);hn(l,s);const f=Tr(c,s);return f&&hn(f,s),l}(l,a,s);if(i[8]=a[8]=f,null!==c)for(const I of c)I(f,s);if(s.contentQueries){const I=Sn();s.contentQueries(1,f,I.directiveStart)}const v=Sn();return!l.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(jr(v.index),Bw(a[1],v,0,v.directiveStart,v.directiveEnd,s),jw(s,f)),f}(Ye,this.componentDef,me,[Kb]),vg(X,me,null)}finally{zs()}return new Jw(this.componentType,Me,y(Ge,me),me,Ge)}}class Jw extends class tf{}{constructor(s,a,c,l,f){super(),this.location=c,this._rootLView=l,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new Yw(l),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let l;if(null!==c&&(l=c[s])){const f=this._rootLView;Cg(f[1],f,l,s,a),av(f,this._tNode.index)}}get injector(){return new Js(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function Kb(){const i=Sn();eu(Ce()[1],i)}function gv(i){let s=function pv(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let l;if(mr(i))l=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new we(903,!1);l=s.\u0275dir}if(l){if(a){c.push(l);const v=i;v.inputs=Fd(i.inputs),v.declaredInputs=Fd(i.declaredInputs),v.outputs=Fd(i.outputs);const I=l.hostBindings;I&&Zb(i,I);const E=l.viewQuery,T=l.contentQueries;if(E&&zS(i,E),T&&eI(i,T),ue(i.inputs,l.inputs),ue(i.declaredInputs,l.declaredInputs),ue(i.outputs,l.outputs),mr(l)&&l.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(l.data.animation)}}const f=l.features;if(f)for(let v=0;v<f.length;v++){const I=f[v];I&&I.ngInherit&&I(i),I===gv&&(a=!1)}}s=Object.getPrototypeOf(s)}!function GS(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const l=i[c];l.hostVars=s+=l.hostVars,l.hostAttrs=Jo(l.hostAttrs,a=Jo(a,l.hostAttrs))}}(c)}function Fd(i){return i===Vr?{}:i===bt?[]:i}function zS(i,s){const a=i.viewQuery;i.viewQuery=a?(c,l)=>{s(c,l),a(c,l)}:s}function eI(i,s){const a=i.contentQueries;i.contentQueries=a?(c,l,f)=>{s(c,l,f),a(c,l,f)}:s}function Zb(i,s){const a=i.hostBindings;i.hostBindings=a?(c,l)=>{s(c,l),a(c,l)}:s}let Ag=null;function hl(){if(!Ag){const i=tn.Symbol;if(i&&i.iterator)Ag=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Ag=c)}}}return Ag}function Af(i){return!!rI(i)&&(Array.isArray(i)||!(i instanceof Map)&&hl()in i)}function rI(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ai(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function xg(i,s,a,c){const l=Ce();return ai(l,Gs(),s)&&(Bt(),Oo(_n(),l,i,s,a,c)),xg}function aC(i,s,a,c,l,f,v,I){const E=Ce(),T=Bt(),M=i+22,P=T.firstCreatePass?function KS(i,s,a,c,l,f,v,I,E){const T=s.consts,M=Aa(s,i,4,v||null,_i(T,I));uv(s,a,M,_i(T,E)),eu(s,M);const P=M.tViews=sv(2,M,c,l,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,M),P.queries=s.queries.embeddedTView(M)),M}(M,T,E,s,a,c,l,f,v):T.data[M];ii(P,!1);const H=E[11].createComment("");il(T,E,H,P),hn(H,E),bg(E,E[M]=Eg(H,E,H,P)),dc(P)&&rv(T,E,P),null!=v&&iv(E,P,I)}function Ud(i,s,a){const c=Ce();return ai(c,Gs(),s)&&function Fi(i,s,a,c,l,f,v,I){const E=Tr(s,a);let M,T=s.inputs;!I&&null!=T&&(M=T[c])?(Cg(i,a,M,c,l),$o(s)&&av(a,s.index)):3&s.type&&(c=function Nb(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),l=null!=v?v(l,s.value||"",c):l,f.setProperty(E,c,l))}(Bt(),_n(),c,i,s,c[11],a,!1),Ud}function Xt(i,s,a,c,l){const v=l?"class":"style";Cg(i,a,s.inputs[v],v,c)}function xf(i,s,a,c){const l=Ce(),f=Bt(),v=22+i,I=l[11],E=l[v]=jt(I,s,function Xa(){return Et.lFrame.currentNamespace}()),T=f.firstCreatePass?function $u(i,s,a,c,l,f,v){const I=s.consts,T=Aa(s,i,2,l,_i(I,f));return uv(s,a,T,_i(I,v)),null!==T.attrs&&fv(T,T.attrs,!1),null!==T.mergedAttrs&&fv(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(v,f,l,0,s,a,c):f.data[v];ii(T,!0);const M=T.mergedAttrs;null!==M&&wo(I,E,M);const P=T.classes;null!==P&&ag(I,E,P);const H=T.styles;return null!==H&&Uy(I,E,H),64!=(64&T.flags)&&il(f,l,E,T),0===function qa(){return Et.lFrame.elementDepthCount}()&&hn(E,l),function Wa(){Et.lFrame.elementDepthCount++}(),dc(T)&&(rv(f,l,T),function kw(i,s,a){if(La(s)){const l=s.directiveEnd;for(let f=s.directiveStart;f<l;f++){const v=i.data[f];v.contentQueries&&v.contentQueries(1,a[f],f)}}}(f,T,l)),null!==c&&iv(l,T),xf}function Mg(){let i=Sn();qo()?function Wo(){Et.lFrame.isParent=!1}():(i=i.parent,ii(i,!1));const s=i;!function mc(){Et.lFrame.elementDepthCount--}();const a=Bt();return a.firstCreatePass&&(eu(a,i),La(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function ru(i){return 0!=(16&i.flags)}(s)&&Xt(a,s,Ce(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Jl(i){return 0!=(32&i.flags)}(s)&&Xt(a,s,Ce(),s.stylesWithoutHost,!1),Mg}function mv(i,s,a,c){return xf(i,s,a,c),Mg(),mv}function yv(i){return!!i&&"function"==typeof i.then}function oI(i){return!!i&&"function"==typeof i.subscribe}const vv=oI;function _v(i,s,a,c){const l=Ce(),f=Bt(),v=Sn();return function uI(i,s,a,c,l,f,v,I){const E=dc(c),M=i.firstCreatePass&&Tf(i),P=s[8],H=cl(s);let X=!0;if(3&c.type||I){const Ge=Tr(c,s),Ye=I?I(Ge):Ge,pt=H.length,De=I?on=>I(An(on[c.index])):c.index;let It=null;if(!I&&E&&(It=function cC(i,s,a,c){const l=i.cleanup;if(null!=l)for(let f=0;f<l.length-1;f+=2){const v=l[f];if(v===a&&l[f+1]===c){const I=s[7],E=l[f+2];return I.length>E?I[E]:null}"string"==typeof v&&(f+=2)}return null}(i,s,l,c.index)),null!==It)(It.__ngLastListenerFn__||It).__ngNextListenerFn__=f,It.__ngLastListenerFn__=f,X=!1;else{f=Mf(c,s,P,f,!1);const on=a.listen(Ye,l,f);H.push(f,on),M&&M.push(l,De,pt,pt+1)}}else f=Mf(c,s,P,f,!1);const me=c.outputs;let Me;if(X&&null!==me&&(Me=me[l])){const Ge=Me.length;if(Ge)for(let Ye=0;Ye<Ge;Ye+=2){const In=s[Me[Ye]][Me[Ye+1]].subscribe(f),Rl=H.length;H.push(f,In),M&&M.push(l,c.index,Rl,-(Rl+1))}}}(f,l,l[11],v,i,s,0,c),_v}function ci(i,s,a,c){try{return!1!==a(c)}catch(l){return Zw(i,l),!1}}function Mf(i,s,a,c,l){return function f(v){if(v===Function)return c;dv(2&i.flags?zt(i.index,s):s);let E=ci(s,0,c,v),T=f.__ngNextListenerFn__;for(;T;)E=ci(s,0,T,v)&&E,T=T.__ngNextListenerFn__;return l&&!1===E&&(v.preventDefault(),v.returnValue=!1),E}}function wv(i=1){return function qs(i){return(Et.lFrame.contextLView=function Ja(i,s){for(;i>0;)s=s[15],i--;return s}(i,Et.lFrame.contextLView))[8]}(i)}function fI(i,s,a,c,l){const f=i[a+1],v=null===s;let I=c?Ro(f):Ta(f),E=!1;for(;0!==I&&(!1===E||v);){const M=i[I+1];pI(i[I],s)&&(E=!0,i[I+1]=c?fg(M):Yy(M)),I=c?Ro(M):Ta(M)}E&&(i[a+1]=c?Yy(f):fg(f))}function pI(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&es(i,s)>=0}function Gd(i,s){return function uo(i,s,a,c){const l=Ce(),f=Bt(),v=function Yi(i){const s=Et.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function Ov(i,s,a,c){const l=i.data;if(null===l[a+1]){const f=l[Zn()],v=function ml(i,s){return s>=i.expandoStartIndex}(i,a);(function wI(i,s){return 0!=(i.flags&(s?16:32))})(f,c)&&null===s&&!v&&(s=!1),s=function fC(i,s,a,c){const l=function Yo(i){const s=Et.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=c?s.residualClasses:s.residualStyles;if(null===l)0===(c?s.classBindings:s.styleBindings)&&(a=Nf(a=Pv(null,i,s,a,c),s.attrs,c),f=null);else{const v=s.directiveStylingLast;if(-1===v||i[v]!==l)if(a=Pv(l,i,s,a,c),null===f){let E=function pC(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==Ta(c))return i[Ro(c)]}(i,s,c);void 0!==E&&Array.isArray(E)&&(E=Pv(null,i,s,E[1],c),E=Nf(E,s.attrs,c),function gC(i,s,a,c){i[Ro(a?s.classBindings:s.styleBindings)]=c}(i,s,c,E))}else f=function mC(i,s,a){let c;const l=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<l;f++)c=Nf(c,i[f].hostAttrs,a);return Nf(c,s.attrs,a)}(i,s,c)}return void 0!==f&&(c?s.residualClasses=f:s.residualStyles=f),a}(l,f,s,c),function lC(i,s,a,c,l,f){let v=f?s.classBindings:s.styleBindings,I=Ro(v),E=Ta(v);i[c]=a;let M,T=!1;if(Array.isArray(a)){const P=a;M=P[1],(null===M||es(P,M)>0)&&(T=!0)}else M=a;if(l)if(0!==E){const H=Ro(i[I+1]);i[c+1]=Zy(H,I),0!==H&&(i[H+1]=mf(i[H+1],c)),i[I+1]=function Db(i,s){return 131071&i|s<<17}(i[I+1],c)}else i[c+1]=Zy(I,0),0!==I&&(i[I+1]=mf(i[I+1],c)),I=c;else i[c+1]=Zy(E,0),0===I?I=c:i[E+1]=mf(i[E+1],c),E=c;T&&(i[c+1]=Yy(i[c+1])),fI(i,M,c,!0),fI(i,M,c,!1),function dC(i,s,a,c,l){const f=l?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&es(f,s)>=0&&(a[c+1]=fg(a[c+1]))}(s,M,i,c,f),v=Zy(I,E),f?s.classBindings=v:s.styleBindings=v}(l,f,s,a,v,c)}}(f,i,v,c),s!==Ot&&ai(l,v,s)&&function Of(i,s,a,c,l,f,v,I){if(!(3&s.type))return;const E=i.data,T=E[I+1];Pf(function cs(i){return 1==(1&i)}(T)?kv(E,s,a,l,Ta(T),v):void 0)||(Pf(f)||function hg(i){return 2==(2&i)}(T)&&(f=kv(E,null,a,l,I,v)),function Sd(i,s,a,c,l){if(s)l?i.addClass(a,c):i.removeClass(a,c);else{let f=-1===c.indexOf("-")?void 0:so.DashCase;null==l?i.removeStyle(a,c,f):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),f|=so.Important),i.setStyle(a,c,l,f))}}(c,v,ri(Zn(),a),l,f))}(f,f.data[Zn()],l,l[11],i,l[v+1]=function Fv(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=de(is(i)))),i}(s,a),c,v)}(i,s,null,!0),Gd}function Pv(i,s,a,c,l){let f=null;const v=a.directiveEnd;let I=a.directiveStylingLast;for(-1===I?I=a.directiveStart:I++;I<v&&(f=s[I],c=Nf(c,f.hostAttrs,l),f!==i);)I++;return null!==i&&(a.directiveStylingLast=I),c}function Nf(i,s,a){const c=a?1:2;let l=-1;if(null!==s)for(let f=0;f<s.length;f++){const v=s[f];"number"==typeof v?l=v:l===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Sr(i,v,!!a||s[++f]))}return void 0===i?null:i}function kv(i,s,a,c,l,f){const v=null===s;let I;for(;l>0;){const E=i[l],T=Array.isArray(E),M=T?E[1]:E,P=null===M;let H=a[l+1];H===Ot&&(H=P?bt:void 0);let X=P?ua(H,c):M===c?H:void 0;if(T&&!Pf(X)&&(X=ua(E,c)),Pf(X)&&(I=X,v))return I;const me=i[l+1];l=v?Ro(me):Ta(me)}if(null!==s){let E=f?s.residualClasses:s.residualStyles;null!=E&&(I=ua(E,c))}return I}function Pf(i){return void 0!==i}function II(i,s=""){const a=Ce(),c=Bt(),l=i+22,f=c.firstCreatePass?Aa(c,l,1,s,null):c.data[l],v=a[l]=function tg(i,s){return i.createText(s)}(a[11],s);il(c,a,v,f),ii(f,!1)}function kf(i,s,a){const c=Ce(),l=function Yn(i,s,a,c){return ai(i,Gs(),a)?s+ge(a)+c:Ot}(c,i,s,a);return l!==Ot&&function Vu(i,s,a){const c=ri(s,i);!function cf(i,s,a){i.setValue(s,a)}(i[11],c,a)}(c,Zn(),l),kf}const Hu=void 0;var xI=["en",[["a","p"],["AM","PM"],Hu],[["AM","PM"],Hu,Hu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Hu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Hu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Hu,"{1} 'at' {0}",Hu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function SI(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Gu={};function zu(i){const s=function OC(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=RI(s);if(a)return a;const c=s.split("-")[0];if(a=RI(c),a)return a;if("en"===c)return xI;throw new we(701,!1)}function MI(i){return zu(i)[mt.PluralCase]}function RI(i){return i in Gu||(Gu[i]=tn.ng&&tn.ng.common&&tn.ng.common.locales&&tn.ng.common.locales[i]),Gu[i]}var mt=(()=>((mt=mt||{})[mt.LocaleId=0]="LocaleId",mt[mt.DayPeriodsFormat=1]="DayPeriodsFormat",mt[mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",mt[mt.DaysFormat=3]="DaysFormat",mt[mt.DaysStandalone=4]="DaysStandalone",mt[mt.MonthsFormat=5]="MonthsFormat",mt[mt.MonthsStandalone=6]="MonthsStandalone",mt[mt.Eras=7]="Eras",mt[mt.FirstDayOfWeek=8]="FirstDayOfWeek",mt[mt.WeekendRange=9]="WeekendRange",mt[mt.DateFormat=10]="DateFormat",mt[mt.TimeFormat=11]="TimeFormat",mt[mt.DateTimeFormat=12]="DateTimeFormat",mt[mt.NumberSymbols=13]="NumberSymbols",mt[mt.NumberFormats=14]="NumberFormats",mt[mt.CurrencyCode=15]="CurrencyCode",mt[mt.CurrencySymbol=16]="CurrencySymbol",mt[mt.CurrencyName=17]="CurrencyName",mt[mt.Currencies=18]="Currencies",mt[mt.Directionality=19]="Directionality",mt[mt.PluralCase=20]="PluralCase",mt[mt.ExtraData=21]="ExtraData",mt))();const Ff="en-US";let NI=Ff;function l_(i,s,a,c,l){if(i=W(i),Array.isArray(i))for(let f=0;f<i.length;f++)l_(i[f],s,a,c,l);else{const f=Bt(),v=Ce();let I=ss(i)?i:W(i.provide),E=Xh(i);const T=Sn(),M=1048575&T.providerIndexes,P=T.directiveStart,H=T.providerIndexes>>20;if(ss(i)||!i.multi){const X=new bs(E,l,ol),me=d_(I,s,l?M:M+H,P);-1===me?(Cs(Ys(T,v),f,I),Qg(f,i,s.length),s.push(I),T.directiveStart++,T.directiveEnd++,l&&(T.providerIndexes+=1048576),a.push(X),v.push(X)):(a[me]=X,v[me]=X)}else{const X=d_(I,s,M+H,P),me=d_(I,s,M,M+H),Me=X>=0&&a[X],Ge=me>=0&&a[me];if(l&&!Ge||!l&&!Me){Cs(Ys(T,v),f,I);const Ye=function Xg(i,s,a,c,l){const f=new bs(i,a,ol);return f.multi=[],f.index=s,f.componentProviders=0,Jg(f,l,c&&!a),f}(l?JI:h_,a.length,l,c,E);!l&&Ge&&(a[me].providerFactory=Ye),Qg(f,i,s.length,0),s.push(I),T.directiveStart++,T.directiveEnd++,l&&(T.providerIndexes+=1048576),a.push(Ye),v.push(Ye)}else Qg(f,i,X>-1?X:me,Jg(a[l?me:X],E,!l&&c));!l&&c&&Ge&&a[me].componentProviders++}}}function Qg(i,s,a,c){const l=ss(s),f=function vy(i){return!!i.useClass}(s);if(l||f){const E=(f?W(s.useClass):s).prototype.ngOnDestroy;if(E){const T=i.destroyHooks||(i.destroyHooks=[]);if(!l&&s.multi){const M=T.indexOf(a);-1===M?T.push(a,[c,E]):T[M+1].push(c,E)}else T.push(a,E)}}}function Jg(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function d_(i,s,a,c){for(let l=a;l<c;l++)if(s[l]===i)return l;return-1}function h_(i,s,a,c){return f_(this.multi,[])}function JI(i,s,a,c){const l=this.multi;let f;if(this.providerFactory){const v=this.providerFactory.componentProviders,I=Qi(a,a[1],this.providerFactory.index,c);f=I.slice(0,v),f_(l,f);for(let E=v;E<I.length;E++)f.push(I[E])}else f=[],f_(l,f);return f}function f_(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function em(i,s=[]){return a=>{a.providersResolver=(c,l)=>function ZC(i,s,a){const c=Bt();if(c.firstCreatePass){const l=mr(i);l_(a,c.data,c.blueprint,l,!0),l_(s,c.data,c.blueprint,l,!1)}}(c,l?l(i):i,s)}}class Wu{}class p_{}function YC(i,s){return new g_(i,s??null)}class g_ extends Wu{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Pd(this);const c=dn(s);this._bootstrapComponents=us(c.bootstrap),this._r3Injector=Hy(s,a,[{provide:Wu,useValue:this},{provide:Au,useValue:this.componentFactoryResolver}],de(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class nm extends p_{constructor(s){super(),this.moduleType=s}create(s){return new g_(this.moduleType,s)}}class XI extends Wu{constructor(s,a,c){super(),this.componentFactoryResolver=new Pd(this),this.instance=null;const l=new Qh([...s,{provide:Wu,useValue:this},{provide:Au,useValue:this.componentFactoryResolver}],a||md(),c,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function Wd(i,s,a=null){return new XI(i,s,a).injector}let QC=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=pd(0,a.type),l=c.length>0?Wd([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,l)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Zt({token:i,providedIn:"environment",factory:()=>new i(Rn(Mr))}),i})();function eE(i){i.getStandaloneInjector=s=>s.get(QC).getOrCreateStandaloneInjector(i)}function co(i){return s=>{setTimeout(i,void 0,s)}}const ds=class yl extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let l=s,f=a||(()=>null),v=c;if(s&&"object"==typeof s){const E=s;l=E.next?.bind(E),f=E.error?.bind(E),v=E.complete?.bind(E)}this.__isAsync&&(f=co(f),l&&(l=co(l)),v&&(v=co(v)));const I=super.subscribe({next:l,error:f,complete:v});return s instanceof J.w0&&s.add(I),I}};function um(){return this._results[hl()]()}class cm{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=hl(),c=cm.prototype;c[a]||(c[a]=um)}get changes(){return this._changes||(this._changes=new ds)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const l=Hr(s);(this._changesDetected=!function hu(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let l=i[c],f=s[c];if(a&&(l=a(l),f=a(f)),f!==l)return!1}return!0}(c._results,l,a))&&(c._results=l,c.length=l.length,c.last=l[this.length-1],c.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let wn=(()=>{class i{}return i.__NG_ELEMENT_ID__=Kf,i})();const lm=wn,Wf=class extends lm{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s,a){const c=this._declarationTContainer.tViews,l=ul(this._declarationLView,c,s,16,null,c.declTNode,null,null,null,null,a||null);l[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(l[19]=v.createEmbeddedView(c)),vg(c,l,s),new ll(l)}};function Kf(){return dm(Sn(),Ce())}function dm(i,s){return 4&i.type?new Wf(s,i,y(i,s)):null}let Zf=(()=>{class i{}return i.__NG_ELEMENT_ID__=rT,i})();function rT(){return Ra(Sn(),Ce())}const iT=Zf,hE=class extends iT{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return y(this._hostTNode,this._hostLView)}get injector(){return new Js(this._hostTNode,this._hostLView)}get parentInjector(){const s=au(this._hostTNode,this._hostLView);if(ed(s)){const a=ea(s,this._hostLView),c=nr(s);return new Js(a[1].data[c+8],a)}return new Js(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=fE(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,c){let l,f;"number"==typeof c?l=c:null!=c&&(l=c.index,f=c.injector);const v=s.createEmbeddedView(a||{},f);return this.insert(v,l),v}createComponent(s,a,c,l,f){const v=s&&!function Ar(i){return"function"==typeof i}(s);let I;if(v)I=a;else{const P=a||{};I=P.index,c=P.injector,l=P.projectableNodes,f=P.environmentInjector||P.ngModuleRef}const E=v?s:new dl(Z(s)),T=c||this.parentInjector;if(!f&&null==E.ngModule){const H=(v?T:this.parentInjector).get(Mr,null);H&&(f=H)}const M=E.create(T,l,void 0,f);return this.insert(M.hostView,I),M}insert(s,a){const c=s._lView,l=c[1];if(function Ha(i){return Cr(i[3])}(c)){const M=this.indexOf(s);if(-1!==M)this.detach(M);else{const P=c[3],H=new hE(P,P[6],P[3]);H.detach(H.indexOf(s))}}const f=this._adjustIndex(a),v=this._lContainer;!function Q0(i,s,a,c){const l=10+c,f=a.length;c>0&&(a[l-1][4]=s),c<f-10?(s[4]=a[l],Fc(a,10+c,s)):(a.push(s),s[4]=null),s[3]=a;const v=s[17];null!==v&&a!==v&&function ky(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(v,s);const I=s[19];null!==I&&I.insertView(i),s[2]|=64}(l,c,v,f);const I=hf(f,v),E=c[11],T=rl(E,v[7]);return null!==T&&function XD(i,s,a,c,l,f){c[0]=l,c[6]=s,ff(i,c,a,1,l,f)}(l,v[6],E,c,T,I),s.attachToViewContainerRef(),Fc(vl(v),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=fE(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=Cd(this._lContainer,a);c&&(Ao(vl(this._lContainer),a),Td(c[1],c))}detach(s){const a=this._adjustIndex(s,-1),c=Cd(this._lContainer,a);return c&&null!=Ao(vl(this._lContainer),a)?new ll(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function fE(i){return i[8]}function vl(i){return i[8]||(i[8]=[])}function Ra(i,s){let a;const c=s[i.index];if(Cr(c))a=c;else{let l;if(8&i.type)l=An(c);else{const f=s[11];l=f.createComment("");const v=Tr(i,s);Ru(f,rl(f,v),l,function rb(i,s){return i.nextSibling(s)}(f,v),!1)}s[i.index]=a=Eg(c,s,l,i),bg(s,a)}return new hE(a,i,s)}class Yu{constructor(s){this.queryList=s,this.matches=null}clone(){return new Yu(this.queryList)}setDirty(){this.queryList.setDirty()}}class T_{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,l=[];for(let f=0;f<c;f++){const v=a.getByIndex(f);l.push(this.queries[v.indexInDeclarationView].clone())}return new T_(l)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==N_(s,a).matches&&this.queries[a].setDirty()}}class mE{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class hm{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const l=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(s,l);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new hm(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class A_{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new A_(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let l=0;l<c.length;l++){const f=c[l];this.matchTNodeWithReadOption(s,a,yE(a,f)),this.matchTNodeWithReadOption(s,a,Io(a,s,f,!1,!1))}else c===wn?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Io(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const l=this.metadata.read;if(null!==l)if(l===h||l===Zf||l===wn&&4&a.type)this.addMatch(a.index,-2);else{const f=Io(a,s,l,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function yE(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function S_(i,s,a,c){return-1===a?function vE(i,s){return 11&i.type?y(i,s):4&i.type?dm(i,s):null}(s,i):-2===a?function x_(i,s,a){return a===h?y(s,i):a===wn?dm(s,i):a===Zf?Ra(s,i):void 0}(i,s,c):Qi(i,i[1],a,s)}function M_(i,s,a,c){const l=s[19].queries[c];if(null===l.matches){const f=i.data,v=a.matches,I=[];for(let E=0;E<v.length;E+=2){const T=v[E];I.push(T<0?null:S_(s,f[T],v[E+1],a.metadata.read))}l.matches=I}return l.matches}function fm(i,s,a,c){const l=i.queries.getByIndex(a),f=l.matches;if(null!==f){const v=M_(i,s,l,a);for(let I=0;I<f.length;I+=2){const E=f[I];if(E>0)c.push(v[I/2]);else{const T=f[I+1],M=s[-E];for(let P=10;P<M.length;P++){const H=M[P];H[17]===H[3]&&fm(H[1],H,T,c)}if(null!==M[9]){const P=M[9];for(let H=0;H<P.length;H++){const X=P[H];fm(X[1],X,T,c)}}}}}return c}function pm(i){const s=Ce(),a=Bt(),c=bc();Qo(c+1);const l=N_(a,c);if(i.dirty&&function $a(i){return 4==(4&i[2])}(s)===(2==(2&l.metadata.flags))){if(null===l.matches)i.reset([]);else{const f=l.crossesNgTemplate?fm(a,s,c,[]):M_(a,s,l,c);i.reset(f,p),i.notifyOnChanges()}return!0}return!1}function _E(i,s,a,c){const l=Bt();if(l.firstCreatePass){const f=Sn();(function Yf(i,s,a){null===i.queries&&(i.queries=new hm),i.queries.track(new A_(s,a))})(l,new mE(s,a,c),f.index),function R_(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(l,i),2==(2&a)&&(l.staticContentQueries=!0)}!function Jd(i,s,a){const c=new cm(4==(4&a));Fw(i,s,c,c.destroy),null===s[19]&&(s[19]=new T_),s[19].queries.push(new Yu(c))}(l,Ce(),a)}function wE(){return function gm(i,s){return i[19].queries[s].queryList}(Ce(),bc())}function N_(i,s){return i.queries.getByIndex(s)}function Vo(...i){}const tt=new pn("Application Initializer");let vt=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Vo,this.reject=Vo,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,l)=>{this.resolve=c,this.reject=l})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const f=this.appInits[l]();if(yv(f))a.push(f);else if(vv(f)){const v=new Promise((I,E)=>{f.subscribe({complete:I,error:E})});a.push(v)}}Promise.all(a).then(()=>{c()}).catch(l=>{this.reject(l)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Rn(tt,8))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const $E=new pn("AppId",{providedIn:"root",factory:function qe(){return`${xe()}${xe()}${xe()}`}});function xe(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const pr=new pn("Platform Initializer"),HE=new pn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),GE=new pn("appBootstrapListener");let hT=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const tp=new pn("LocaleId",{providedIn:"root",factory:()=>D(tp,Ke.Optional|Ke.SkipSelf)||function fT(){return typeof $localize<"u"&&$localize.locale||Ff}()}),pT=new pn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class xt{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let rh=(()=>{class i{compileModuleSync(a){return new nm(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=us(dn(a).declarations).reduce((v,I)=>{const E=Z(I);return E&&v.push(new dl(E)),v},[]);return new xt(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const ze=(()=>Promise.resolve(0))();function sh(i){typeof Zone>"u"?ze.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Or{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ds(!1),this.onMicrotaskEmpty=new ds(!1),this.onStable=new ds(!1),this.onError=new ds(!1),typeof Zone>"u")throw new we(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!c&&a,l.shouldCoalesceRunChangeDetection=c,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function B_(){let i=tn.requestAnimationFrame,s=tn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function np(i){const s=()=>{!function yT(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(tn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Im(i),i.isCheckStableRunning=!0,oh(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Im(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,l,f,v,I)=>{try{return j_(i),a.invokeTask(l,f,v,I)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),Ui(i)}},onInvoke:(a,c,l,f,v,I,E)=>{try{return j_(i),a.invoke(l,f,v,I,E)}finally{i.shouldCoalesceRunChangeDetection&&s(),Ui(i)}},onHasTask:(a,c,l,f)=>{a.hasTask(l,f),c===l&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Im(i),oh(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,l,f)=>(a.handleError(l,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Or.isInAngularZone())throw new we(909,!1)}static assertNotInAngularZone(){if(Or.isInAngularZone())throw new we(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,l){const f=this._inner,v=f.scheduleEventTask("NgZoneEvent: "+l,s,mT,Vo,Vo);try{return f.runTask(v,a,c)}finally{f.cancelTask(v)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const mT={};function oh(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Im(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function j_(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Ui(i){i._nesting--,oh(i)}class $_{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ds,this.onMicrotaskEmpty=new ds,this.onStable=new ds,this.onError=new ds}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,l){return s.apply(a,c)}}const H_=new pn(""),G_=new pn("");let ah,Qu=(()=>{class i{constructor(a,c,l){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ah||(function se(i){ah=i}(l),l.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Or.assertNotInAngularZone(),sh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())sh(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,l){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:l})}whenStable(a,c,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,l){return[]}}return i.\u0275fac=function(a){return new(a||i)(Rn(Or),Rn(Em),Rn(G_))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac}),i})(),Em=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return ah?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Pr=null;const qE=new pn("AllowMultipleToken"),Cl=new pn("PlatformDestroyListeners");class z_{constructor(s,a){this.name=s,this.token=a}}function Ju(i,s,a=[]){const c=`Platform: ${s}`,l=new pn(c);return(f=[])=>{let v=wr();if(!v||v.injector.get(qE,!1)){const I=[...a,...f,{provide:l,useValue:!0}];i?i(I):function _T(i){if(Pr&&!Pr.get(qE,!1))throw new we(400,!1);Pr=i;const s=i.get(mn);(function bi(i){const s=i.get(pr,null);s&&s.forEach(a=>a())})(i)}(function $n(i=[],s){return Ca.create({name:s,providers:[{provide:va,useValue:"platform"},{provide:Cl,useValue:new Set([()=>Pr=null])},...i]})}(I,c))}return function KE(i){const s=wr();if(!s)throw new we(401,!1);return s}()}}function wr(){return Pr?.get(mn)??null}let mn=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const l=function Tl(i,s){let a;return a="noop"===i?new $_:("zone.js"===i?void 0:i)||new Or(s),a}(c?.ngZone,function W_(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),f=[{provide:Or,useValue:l}];return l.run(()=>{const v=Ca.create({providers:f,parent:this.injector,name:a.moduleType.name}),I=a.create(v),E=I.injector.get(nf,null);if(!E)throw new we(402,!1);return l.runOutsideAngular(()=>{const T=l.onError.subscribe({next:M=>{E.handleError(M)}});I.onDestroy(()=>{Dm(this._modules,I),T.unsubscribe()})}),function Bi(i,s,a){try{const c=a();return yv(c)?c.catch(l=>{throw s.runOutsideAngular(()=>i.handleError(l)),l}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(E,l,()=>{const T=I.injector.get(vt);return T.runInitializers(),T.donePromise.then(()=>(function LC(i){Ut(i,"Expected localeId to be defined"),"string"==typeof i&&(NI=i.toLowerCase().replace(/_/g,"-"))}(I.injector.get(tp,Ff)||Ff),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,c=[]){const l=ZE({},c);return function vT(i,s,a){const c=new nm(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,l))}_moduleDoBootstrap(a){const c=a.injector.get(Jn);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(l=>c.bootstrap(l));else{if(!a.instance.ngDoBootstrap)throw new we(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new we(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(Cl,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Rn(Ca))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function ZE(i,s){return Array.isArray(s)?s.reduce(ZE,i):{...i,...s}}let Jn=(()=>{class i{constructor(a,c,l){this._zone=a,this._injector=c,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new O.y(I=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{Or.assertNotInAngularZone(),sh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{Or.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{E.unsubscribe(),T.unsubscribe()}});this.isStable=(0,ie.T)(f,v.pipe((0,re.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const l=a instanceof _d;if(!this._injector.get(vt).done)throw!l&&Wt(a),new we(405,false);let v;v=l?a:this._injector.get(Au).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const I=function WE(i){return i.isBoundToModule}(v)?void 0:this._injector.get(Wu),T=v.create(Ca.NULL,[],c||v.selector,I),M=T.location.nativeElement,P=T.injector.get(H_,null);return P?.registerApplication(M),T.onDestroy(()=>{this.detachView(T.hostView),Dm(this.components,T),P?.unregisterApplication(M)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new we(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Dm(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(GE,[]).concat(this._bootstrapListeners).forEach(l=>l(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Dm(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new we(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(Rn(Or),Rn(Mr),Rn(nf))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Dm(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Xu=!0,bm=!1;function YE(){return bm=!0,Xu}function rp(){if(bm)throw new Error("Cannot enable prod mode after platform setup.");Xu=!1}let ip=(()=>{class i{}return i.__NG_ELEMENT_ID__=QE,i})();function QE(i){return function ec(i,s,a){if($o(i)&&!a){const c=zt(i.index,s);return new ll(c,c)}return 47&i.type?new ll(s[16],s):null}(Sn(),Ce(),16==(16&i))}class bn{constructor(){}supports(s){return Af(s)}create(s){return new XE(s)}}const CT=(i,s)=>s;class XE{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||CT}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,l=0,f=null;for(;a||c;){const v=!c||a&&a.currentIndex<op(c,l,f)?a:c,I=op(v,l,f),E=v.currentIndex;if(v===c)l--,c=c._nextRemoved;else if(a=a._next,null==v.previousIndex)l++;else{f||(f=[]);const T=I-l,M=E-l;if(T!=M){for(let H=0;H<T;H++){const X=H<f.length?f[H]:f[H]=0,me=X+H;M<=me&&me<T&&(f[H]=X+1)}f[v.previousIndex]=M-T}}I!==E&&s(v,I,E)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Af(s))throw new we(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,f,v,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let I=0;I<this.length;I++)f=s[I],v=this._trackByFn(I,f),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,f,v,I)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,v,I),c=!0),a=a._next}else l=0,function Jb(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[hl()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,I=>{v=this._trackByFn(l,I),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,I,v,l)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,v,l),c=!0),a=a._next,l++}),this.length=l;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,l){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,l))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,l)):s=this._addAfter(new Ml(a,c),f,l),s}_verifyReinsertion(s,a,c,l){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?s=this._reinsertAfter(f,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,f=s._nextRemoved;return null===l?this._removalsHead=f:l._nextRemoved=f,null===f?this._removalsTail=l:f._prevRemoved=l,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const l=null===a?this._itHead:a._next;return s._next=l,s._prev=a,null===l?this._itTail=s:l._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new hh),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new hh),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class Ml{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class TT{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class hh{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new TT,this.map.set(a,c)),c.add(s)}get(s,a){const l=this.map.get(s);return l?l.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function op(i,s,a){const c=i.previousIndex;if(null===c)return c;let l=0;return a&&c<a.length&&(l=a[c]),c+s+l}class ap{constructor(){}supports(s){return s instanceof Map||rI(s)}create(){return new eD}}class eD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||rI(s)))throw new we(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,l)=>{if(a&&a.key===l)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(l,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,a);const f=l._prev,v=l._next;return f&&(f._next=v),v&&(v._prev=f),l._next=null,l._prev=null,l}const c=new tD(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class tD{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function kr(){return new J_([new bn])}let J_=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||kr()),deps:[[i,new gt,new Be]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(null!=c)return c;throw new we(901,!1)}}return i.\u0275prov=Zt({token:i,providedIn:"root",factory:kr}),i})();function nD(){return new Mm([new ap])}let Mm=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||nD()),deps:[[i,new gt,new Be]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(c)return c;throw new we(901,!1)}}return i.\u0275prov=Zt({token:i,providedIn:"root",factory:nD}),i})();const tc=Ju(null,"core",[]);let fh=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Rn(Jn))},i.\u0275mod=Mt({type:i}),i.\u0275inj=At({}),i})();function xT(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(ot,Te,k)=>{k.d(Te,{Z:()=>we});var g=k(2090),J=k(4859),O=k(9681),ie=k(1877);class re{constructor(ge,fe){this._delegate=ge,this.firebase=fe,(0,O._addComponent)(ge,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(ge,fe=O._DEFAULT_ENTRY_NAME){var Qe;this._delegate.checkDestroyed();const nt=this._delegate.container.getProvider(ge);return!nt.isInitialized()&&"EXPLICIT"===(null===(Qe=nt.getComponent())||void 0===Qe?void 0:Qe.instantiationMode)&&nt.initialize(),nt.getImmediate({identifier:fe})}_removeServiceInstance(ge,fe=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(fe)}_addComponent(ge){(0,O._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,O._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function he(){const et=function de(et){const ge={},fe={__esModule:!0,initializeApp:function Ae(je,V={}){const pe=O.initializeApp(je,V);if((0,g.r3)(ge,pe.name))return ge[pe.name];const z=new et(pe,fe);return ge[pe.name]=z,z},app:nt,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ie(je){const V=je.name,pe=V.replace("-compat","");if(O._registerComponent(je)&&"PUBLIC"===je.type){const z=(Q=nt())=>{if("function"!=typeof Q[pe])throw ue.create("invalid-app-argument",{appName:V});return Q[pe]()};void 0!==je.serviceProps&&(0,g.ZB)(z,je.serviceProps),fe[pe]=z,et.prototype[pe]=function(...Q){return this._getService.bind(this,V).apply(this,je.multipleInstances?Q:[])}}return"PUBLIC"===je.type?fe[pe]:null},removeApp:function Qe(je){delete ge[je]},useAsService:function Ue(je,V){return"serverAuth"===V?null:V},modularAPIs:O}};function nt(je){if(!(0,g.r3)(ge,je=je||O._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:je});return ge[je]}return fe.default=fe,Object.defineProperty(fe,"apps",{get:function ve(){return Object.keys(ge).map(je=>ge[je])}}),nt.App=et,fe}(re);return et.INTERNAL=Object.assign(Object.assign({},et.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function ge(fe){(0,g.ZB)(et,fe)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),et}(),B=new ie.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const et=self.firebase.SDK_VERSION;et&&et.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const we=U;!function Se(et){(0,O.registerVersion)("@firebase/app-compat","0.1.38",et)}()},9681:(ot,Te,k)=>{k.r(Te),k.d(Te,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>Vs,_DEFAULT_ENTRY_NAME:()=>Ut,_addComponent:()=>qt,_addOrOverwriteComponent:()=>Zt,_apps:()=>nn,_clearComponents:()=>Hi,_components:()=>yn,_getProvider:()=>At,_registerComponent:()=>Er,_removeServiceInstance:()=>un,deleteApp:()=>Bo,getApp:()=>Xr,getApps:()=>ei,initializeApp:()=>yi,onLog:()=>gs,registerVersion:()=>gr,setLogLevel:()=>zn});var g=k(5861),J=k(4859),O=k(1877),ie=k(2090),re=k(8766);class le{constructor(be){this.container=be}getPlatformInfoString(){return this.container.getProviders().map(Je=>{if(function ue(Xe){return"VERSION"===Xe.getComponent()?.type}(Je)){const _t=Je.getImmediate();return`${_t.library}/${_t.version}`}return null}).filter(Je=>Je).join(" ")}}const de="@firebase/app",U=new O.Yd("@firebase/app"),Ut="[DEFAULT]",We={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},nn=new Map,yn=new Map;function qt(Xe,be){try{Xe.container.addComponent(be)}catch(Je){U.debug(`Component ${be.name} failed to register with FirebaseApp ${Xe.name}`,Je)}}function Zt(Xe,be){Xe.container.addOrOverwriteComponent(be)}function Er(Xe){const be=Xe.name;if(yn.has(be))return U.debug(`There were multiple attempts to register component ${be}.`),!1;yn.set(be,Xe);for(const Je of nn.values())qt(Je,Xe);return!0}function At(Xe,be){const Je=Xe.container.getProvider("heartbeat").getImmediate({optional:!0});return Je&&Je.triggerHeartbeat(),Xe.container.getProvider(be)}function un(Xe,be,Je=Ut){At(Xe,be).clearInstance(Je)}function Hi(){yn.clear()}const Dr=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Lr{constructor(be,Je,_t){this._isDeleted=!1,this._options=Object.assign({},be),this._config=Object.assign({},Je),this._name=Je.name,this._automaticDataCollectionEnabled=Je.automaticDataCollectionEnabled,this._container=_t,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this.checkDestroyed(),this._automaticDataCollectionEnabled=be}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(be){this._isDeleted=be}checkDestroyed(){if(this.isDeleted)throw Dr.create("app-deleted",{appName:this._name})}}const Vs="9.13.0";function yi(Xe,be={}){let Je=Xe;"object"!=typeof be&&(be={name:be});const _t=Object.assign({name:Ut,automaticDataCollectionEnabled:!1},be),yt=_t.name;if("string"!=typeof yt||!yt)throw Dr.create("bad-app-name",{appName:String(yt)});if(Je||(Je=(0,ie.aH)()),!Je)throw Dr.create("no-options");const Mt=nn.get(yt);if(Mt){if((0,ie.vZ)(Je,Mt.options)&&(0,ie.vZ)(_t,Mt.config))return Mt;throw Dr.create("duplicate-app",{appName:yt})}const j=new J.H0(yt);for(const q of yn.values())j.addComponent(q);const L=new Lr(Je,_t,j);return nn.set(yt,L),L}function Xr(Xe=Ut){const be=nn.get(Xe);if(!be&&Xe===Ut)return yi();if(!be)throw Dr.create("no-app",{appName:Xe});return be}function ei(){return Array.from(nn.values())}function Bo(Xe){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,g.Z)(function*(Xe){const be=Xe.name;nn.has(be)&&(nn.delete(be),yield Promise.all(Xe.container.getProviders().map(Je=>Je.delete())),Xe.isDeleted=!0)})).apply(this,arguments)}function gr(Xe,be,Je){var _t;let yt=null!==(_t=We[Xe])&&void 0!==_t?_t:Xe;Je&&(yt+=`-${Je}`);const Mt=yt.match(/\s|\//),j=be.match(/\s|\//);if(Mt||j){const L=[`Unable to register library "${yt}" with version "${be}":`];return Mt&&L.push(`library name "${yt}" contains illegal characters (whitespace or "/")`),Mt&&j&&L.push("and"),j&&L.push(`version name "${be}" contains illegal characters (whitespace or "/")`),void U.warn(L.join(" "))}Er(new J.wA(`${yt}-version`,()=>({library:yt,version:be}),"VERSION"))}function gs(Xe,be){if(null!==Xe&&"function"!=typeof Xe)throw Dr.create("invalid-log-argument");(0,O.Am)(Xe,be)}function zn(Xe){(0,O.Ub)(Xe)}const On="firebase-heartbeat-store";let Ln=null;function fn(){return Ln||(Ln=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(Xe,be)=>{0===be&&Xe.createObjectStore(On)}}).catch(Xe=>{throw Dr.create("idb-open",{originalErrorMessage:Xe.message})})),Ln}function it(){return(it=(0,g.Z)(function*(Xe){var be;try{return(yield fn()).transaction(On).objectStore(On).get(Vn(Xe))}catch(Je){if(Je instanceof ie.ZR)U.warn(Je.message);else{const _t=Dr.create("idb-get",{originalErrorMessage:null===(be=Je)||void 0===be?void 0:be.message});U.warn(_t.message)}}})).apply(this,arguments)}function tn(Xe,be){return ur.apply(this,arguments)}function ur(){return(ur=(0,g.Z)(function*(Xe,be){var Je;try{const yt=(yield fn()).transaction(On,"readwrite");return yield yt.objectStore(On).put(be,Vn(Xe)),yt.done}catch(_t){if(_t instanceof ie.ZR)U.warn(_t.message);else{const yt=Dr.create("idb-set",{originalErrorMessage:null===(Je=_t)||void 0===Je?void 0:Je.message});U.warn(yt.message)}}})).apply(this,arguments)}function Vn(Xe){return`${Xe.name}!${Xe.options.appId}`}class ms{constructor(be){this.container=be,this._heartbeatsCache=null;const Je=this.container.getProvider("app").getImmediate();this._storage=new Jt(Je),this._heartbeatsCachePromise=this._storage.read().then(_t=>(this._heartbeatsCache=_t,_t))}triggerHeartbeat(){var be=this;return(0,g.Z)(function*(){const _t=be.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),yt=Qt();if(null===be._heartbeatsCache&&(be._heartbeatsCache=yield be._heartbeatsCachePromise),be._heartbeatsCache.lastSentHeartbeatDate!==yt&&!be._heartbeatsCache.heartbeats.some(Mt=>Mt.date===yt))return be._heartbeatsCache.heartbeats.push({date:yt,agent:_t}),be._heartbeatsCache.heartbeats=be._heartbeatsCache.heartbeats.filter(Mt=>{const j=new Date(Mt.date).valueOf();return Date.now()-j<=2592e6}),be._storage.overwrite(be._heartbeatsCache)})()}getHeartbeatsHeader(){var be=this;return(0,g.Z)(function*(){if(null===be._heartbeatsCache&&(yield be._heartbeatsCachePromise),null===be._heartbeatsCache||0===be._heartbeatsCache.heartbeats.length)return"";const Je=Qt(),{heartbeatsToSend:_t,unsentEntries:yt}=function Ti(Xe,be=1024){const Je=[];let _t=Xe.slice();for(const yt of Xe){const Mt=Je.find(j=>j.agent===yt.agent);if(Mt){if(Mt.dates.push(yt.date),qn(Je)>be){Mt.dates.pop();break}}else if(Je.push({agent:yt.agent,dates:[yt.date]}),qn(Je)>be){Je.pop();break}_t=_t.slice(1)}return{heartbeatsToSend:Je,unsentEntries:_t}}(be._heartbeatsCache.heartbeats),Mt=(0,ie.L)(JSON.stringify({version:2,heartbeats:_t}));return be._heartbeatsCache.lastSentHeartbeatDate=Je,yt.length>0?(be._heartbeatsCache.heartbeats=yt,yield be._storage.overwrite(be._heartbeatsCache)):(be._heartbeatsCache.heartbeats=[],be._storage.overwrite(be._heartbeatsCache)),Mt})()}}function Qt(){return(new Date).toISOString().substring(0,10)}class Jt{constructor(be){this.app=be,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var be=this;return(0,g.Z)(function*(){return(yield be._canUseIndexedDBPromise)&&(yield function dt(Xe){return it.apply(this,arguments)}(be.app))||{heartbeats:[]}})()}overwrite(be){var Je=this;return(0,g.Z)(function*(){var _t;if(yield Je._canUseIndexedDBPromise){const Mt=yield Je.read();return tn(Je.app,{lastSentHeartbeatDate:null!==(_t=be.lastSentHeartbeatDate)&&void 0!==_t?_t:Mt.lastSentHeartbeatDate,heartbeats:be.heartbeats})}})()}add(be){var Je=this;return(0,g.Z)(function*(){var _t;if(yield Je._canUseIndexedDBPromise){const Mt=yield Je.read();return tn(Je.app,{lastSentHeartbeatDate:null!==(_t=be.lastSentHeartbeatDate)&&void 0!==_t?_t:Mt.lastSentHeartbeatDate,heartbeats:[...Mt.heartbeats,...be.heartbeats]})}})()}}function qn(Xe){return(0,ie.L)(JSON.stringify({version:2,heartbeats:Xe})).length}!function br(Xe){Er(new J.wA("platform-logger",be=>new le(be),"PRIVATE")),Er(new J.wA("heartbeat",be=>new ms(be),"PRIVATE")),gr(de,"0.8.3",Xe),gr(de,"0.8.3","esm2017"),gr("fire-js","")}("")},4859:(ot,Te,k)=>{k.d(Te,{H0:()=>de,wA:()=>O});var g=k(5861),J=k(2090);class O{constructor(U,B,W){this.name=U,this.instanceFactory=B,this.type=W,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const ie="[DEFAULT]";class re{constructor(U,B){this.name=U,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const B=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(B)){const W=new J.BH;if(this.instancesDeferred.set(B,W),this.isInitialized(B)||this.shouldAutoInitialize())try{const Le=this.getOrInitializeService({instanceIdentifier:B});Le&&W.resolve(Le)}catch{}}return this.instancesDeferred.get(B).promise}getImmediate(U){var B;const W=this.normalizeInstanceIdentifier(U?.identifier),Le=null!==(B=U?.optional)&&void 0!==B&&B;if(!this.isInitialized(W)&&!this.shouldAutoInitialize()){if(Le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:W})}catch(Se){if(Le)return null;throw Se}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if(function ue(he){return"EAGER"===he.instantiationMode}(U))try{this.getOrInitializeService({instanceIdentifier:ie})}catch{}for(const[B,W]of this.instancesDeferred.entries()){const Le=this.normalizeInstanceIdentifier(B);try{const Se=this.getOrInitializeService({instanceIdentifier:Le});W.resolve(Se)}catch{}}}}clearInstance(U=ie){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,g.Z)(function*(){const B=Array.from(U.instances.values());yield Promise.all([...B.filter(W=>"INTERNAL"in W).map(W=>W.INTERNAL.delete()),...B.filter(W=>"_delete"in W).map(W=>W._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=ie){return this.instances.has(U)}getOptions(U=ie){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:B={}}=U,W=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(W))throw Error(`${this.name}(${W}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Le=this.getOrInitializeService({instanceIdentifier:W,options:B});for(const[Se,we]of this.instancesDeferred.entries())W===this.normalizeInstanceIdentifier(Se)&&we.resolve(Le);return Le}onInit(U,B){var W;const Le=this.normalizeInstanceIdentifier(B),Se=null!==(W=this.onInitCallbacks.get(Le))&&void 0!==W?W:new Set;Se.add(U),this.onInitCallbacks.set(Le,Se);const we=this.instances.get(Le);return we&&U(we,Le),()=>{Se.delete(U)}}invokeOnInitCallbacks(U,B){const W=this.onInitCallbacks.get(B);if(W)for(const Le of W)try{Le(U,B)}catch{}}getOrInitializeService({instanceIdentifier:U,options:B={}}){let W=this.instances.get(U);if(!W&&this.component&&(W=this.component.instanceFactory(this.container,{instanceIdentifier:(he=U,he===ie?void 0:he),options:B}),this.instances.set(U,W),this.instancesOptions.set(U,B),this.invokeOnInitCallbacks(W,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,W)}catch{}var he;return W||null}normalizeInstanceIdentifier(U=ie){return this.component?this.component.multipleInstances?U:ie:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const B=this.getProvider(U.name);if(B.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);B.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const B=new re(U,this);return this.providers.set(U,B),B}getProviders(){return Array.from(this.providers.values())}}},1877:(ot,Te,k)=>{k.d(Te,{Am:()=>he,Ub:()=>de,Yd:()=>ue,in:()=>J});const g=[];var J=(()=>{return(U=J||(J={}))[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",J;var U})();const O={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},ie=J.INFO,re={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},le=(U,B,...W)=>{if(B<U.logLevel)return;const Le=(new Date).toISOString(),Se=re[B];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[Se](`[${Le}]  ${U.name}:`,...W)};class ue{constructor(B){this.name=B,this._logLevel=ie,this._logHandler=le,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in J))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?O[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...B),this._logHandler(this,J.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...B),this._logHandler(this,J.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,J.INFO,...B),this._logHandler(this,J.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,J.WARN,...B),this._logHandler(this,J.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...B),this._logHandler(this,J.ERROR,...B)}}function de(U){g.forEach(B=>{B.setLogLevel(U)})}function he(U,B){for(const W of g){let Le=null;B&&B.level&&(Le=O[B.level]),W.userLogHandler=null===U?null:(Se,we,...et)=>{const ge=et.map(fe=>{if(null==fe)return null;if("string"==typeof fe)return fe;if("number"==typeof fe||"boolean"==typeof fe)return fe.toString();if(fe instanceof Error)return fe.message;try{return JSON.stringify(fe)}catch{return null}}).filter(fe=>fe).join(" ");we>=(Le??Se.logLevel)&&U({level:J[we].toLowerCase(),message:ge,args:et,type:Se.name})}}}},8766:(ot,Te,k)=>{k.d(Te,{Lj:()=>Ae,X3:()=>nt});var g=k(5861);let O,ie;const ue=new WeakMap,de=new WeakMap,he=new WeakMap,U=new WeakMap,B=new WeakMap;let Se={get(V,pe,z){if(V instanceof IDBTransaction){if("done"===pe)return de.get(V);if("objectStoreNames"===pe)return V.objectStoreNames||he.get(V);if("store"===pe)return z.objectStoreNames[1]?void 0:z.objectStore(z.objectStoreNames[0])}return fe(V[pe])},set:(V,pe,z)=>(V[pe]=z,!0),has:(V,pe)=>V instanceof IDBTransaction&&("done"===pe||"store"===pe)||pe in V};function ge(V){return"function"==typeof V?function et(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function le(){return ie||(ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(V)?function(...pe){return V.apply(Qe(this),pe),fe(ue.get(this))}:function(...pe){return fe(V.apply(Qe(this),pe))}:function(pe,...z){const Q=V.call(Qe(this),pe,...z);return he.set(Q,pe.sort?pe.sort():[pe]),fe(Q)}}(V):(V instanceof IDBTransaction&&function Le(V){if(de.has(V))return;const pe=new Promise((z,Q)=>{const te=()=>{V.removeEventListener("complete",ee),V.removeEventListener("error",ke),V.removeEventListener("abort",ke)},ee=()=>{z(),te()},ke=()=>{Q(V.error||new DOMException("AbortError","AbortError")),te()};V.addEventListener("complete",ee),V.addEventListener("error",ke),V.addEventListener("abort",ke)});de.set(V,pe)}(V),((V,pe)=>pe.some(z=>V instanceof z))(V,function re(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(V,Se):V)}function fe(V){if(V instanceof IDBRequest)return function W(V){const pe=new Promise((z,Q)=>{const te=()=>{V.removeEventListener("success",ee),V.removeEventListener("error",ke)},ee=()=>{z(fe(V.result)),te()},ke=()=>{Q(V.error),te()};V.addEventListener("success",ee),V.addEventListener("error",ke)});return pe.then(z=>{z instanceof IDBCursor&&ue.set(z,V)}).catch(()=>{}),B.set(pe,V),pe}(V);if(U.has(V))return U.get(V);const pe=ge(V);return pe!==V&&(U.set(V,pe),B.set(pe,V)),pe}const Qe=V=>B.get(V);function nt(V,pe,{blocked:z,upgrade:Q,blocking:te,terminated:ee}={}){const ke=indexedDB.open(V,pe),Re=fe(ke);return Q&&ke.addEventListener("upgradeneeded",at=>{Q(fe(ke.result),at.oldVersion,at.newVersion,fe(ke.transaction))}),z&&ke.addEventListener("blocked",()=>z()),Re.then(at=>{ee&&at.addEventListener("close",()=>ee()),te&&at.addEventListener("versionchange",()=>te())}).catch(()=>{}),Re}function Ae(V,{blocked:pe}={}){const z=indexedDB.deleteDatabase(V);return pe&&z.addEventListener("blocked",()=>pe()),fe(z).then(()=>{})}const ve=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Ue=new Map;function je(V,pe){if(!(V instanceof IDBDatabase)||pe in V||"string"!=typeof pe)return;if(Ue.get(pe))return Ue.get(pe);const z=pe.replace(/FromIndex$/,""),Q=pe!==z,te=Ie.includes(z);if(!(z in(Q?IDBIndex:IDBObjectStore).prototype)||!te&&!ve.includes(z))return;const ee=function(){var ke=(0,g.Z)(function*(Re,...at){const Kt=this.transaction(Re,te?"readwrite":"readonly");let Ut=Kt.store;return Q&&(Ut=Ut.index(at.shift())),(yield Promise.all([Ut[z](...at),te&&Kt.done]))[0]});return function(at){return ke.apply(this,arguments)}}();return Ue.set(pe,ee),ee}!function we(V){Se=V(Se)}(V=>({...V,get:(pe,z,Q)=>je(pe,z)||V.get(pe,z,Q),has:(pe,z)=>!!je(pe,z)||V.has(pe,z)}))},5861:(ot,Te,k)=>{function g(O,ie,re,le,ue,de,he){try{var U=O[de](he),B=U.value}catch(W){return void re(W)}U.done?ie(B):Promise.resolve(B).then(le,ue)}function J(O){return function(){var ie=this,re=arguments;return new Promise(function(le,ue){var de=O.apply(ie,re);function he(B){g(de,le,ue,he,U,"next",B)}function U(B){g(de,le,ue,he,U,"throw",B)}he(void 0)})}}k.d(Te,{Z:()=>J})}},ot=>{ot(ot.s=2601)}]);